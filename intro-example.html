<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 A simple example | Introduction to R</title>
  <meta name="description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="4 A simple example | Introduction to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 A simple example | Introduction to R" />
  
  <meta name="twitter:description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  



<meta name="date" content="2024-03-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro_rstudio.html"/>
<link rel="next" href="data-types-struct.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this document</a></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="1" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="background.html"><a href="background.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="background.html"><a href="background.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2</b> What is RStudio?</a></li>
<li class="chapter" data-level="1.3" data-path="background.html"><a href="background.html#software-installation"><i class="fa fa-check"></i><b>1.3</b> Software installation</a></li>
<li class="chapter" data-level="1.4" data-path="background.html"><a href="background.html#references"><i class="fa fa-check"></i><b>1.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Working with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#starting-r"><i class="fa fa-check"></i><b>2.1</b> Starting R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#storing-data-as-objects"><i class="fa fa-check"></i><b>2.2</b> Storing data as objects</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#about-variable-names"><i class="fa fa-check"></i><b>2.2.1</b> About variable names</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#data-structure-i-the-vector"><i class="fa fa-check"></i><b>2.3</b> Data structure I: The vector</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#ex-simple-desc"><i class="fa fa-check"></i><b>2.3.1</b> Example: simple descriptives</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#ex-simple-plots"><i class="fa fa-check"></i><b>2.3.2</b> Example: simple plots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#non-numeric-data"><i class="fa fa-check"></i><b>2.4</b> Non-numeric data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#descriptives-for-grouping-data"><i class="fa fa-check"></i><b>2.4.1</b> Descriptives for grouping data</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#character-vector-vs-factor"><i class="fa fa-check"></i><b>2.4.2</b> Character vector vs factor</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#general-data-in-r"><i class="fa fa-check"></i><b>2.5</b> General data in R</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#extracting-parts-of-a-data-frame"><i class="fa fa-check"></i><b>2.5.1</b> Extracting parts of a data frame</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#ex_desc_stats"><i class="fa fa-check"></i><b>2.5.2</b> Example: descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#meta-activity"><i class="fa fa-check"></i><b>2.6</b> Meta-activity</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>2.6.1</b> Getting help</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction.html"><a href="introduction.html#keeping-track-of-objects"><i class="fa fa-check"></i><b>2.6.2</b> Keeping track of objects</a></li>
<li class="chapter" data-level="2.6.3" data-path="introduction.html"><a href="introduction.html#finding-files"><i class="fa fa-check"></i><b>2.6.3</b> Finding files</a></li>
<li class="chapter" data-level="2.6.4" data-path="introduction.html"><a href="introduction.html#quitting-r"><i class="fa fa-check"></i><b>2.6.4</b> Quitting R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro_rstudio.html"><a href="intro_rstudio.html"><i class="fa fa-check"></i><b>3</b> Working in RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#getting-started"><i class="fa fa-check"></i><b>3.1</b> Getting started</a></li>
<li class="chapter" data-level="3.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#a-quick-tour-of-the-gui"><i class="fa fa-check"></i><b>3.2</b> A quick tour of the GUI</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#console-and-friends"><i class="fa fa-check"></i><b>3.2.1</b> Console and friends</a></li>
<li class="chapter" data-level="3.2.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#rstudio-console-specials"><i class="fa fa-check"></i><b>3.2.2</b> RStudio Console specials</a></li>
<li class="chapter" data-level="3.2.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#navigating-the-pane-layout"><i class="fa fa-check"></i><b>3.2.3</b> Navigating the pane layout</a></li>
<li class="chapter" data-level="3.2.4" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-default-upper-pane"><i class="fa fa-check"></i><b>3.2.4</b> The default upper pane</a></li>
<li class="chapter" data-level="3.2.5" data-path="intro_rstudio.html"><a href="intro_rstudio.html#def-lower-pane"><i class="fa fa-check"></i><b>3.2.5</b> The default lower pane</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#source-pane-scripting"><i class="fa fa-check"></i><b>3.3</b> Source pane &amp; scripting</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#console2source"><i class="fa fa-check"></i><b>3.3.1</b> From console to source</a></li>
<li class="chapter" data-level="3.3.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-source-pane-file-editor"><i class="fa fa-check"></i><b>3.3.2</b> The Source pane file editor</a></li>
<li class="chapter" data-level="3.3.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#displays"><i class="fa fa-check"></i><b>3.3.3</b> Displays</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>4</b> A simple example</a>
<ul>
<li class="chapter" data-level="4.1" data-path="intro-example.html"><a href="intro-example.html#intro-ex-import"><i class="fa fa-check"></i><b>4.1</b> Data import</a></li>
<li class="chapter" data-level="4.2" data-path="intro-example.html"><a href="intro-example.html#analysis"><i class="fa fa-check"></i><b>4.2</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="intro-example.html"><a href="intro-example.html#desc-ex"><i class="fa fa-check"></i><b>4.2.1</b> Descriptives</a></li>
<li class="chapter" data-level="4.2.2" data-path="intro-example.html"><a href="intro-example.html#blood-pressure-by-salt-intake"><i class="fa fa-check"></i><b>4.2.2</b> Blood pressure by salt intake</a></li>
<li class="chapter" data-level="4.2.3" data-path="intro-example.html"><a href="intro-example.html#salt-intake-by-sex"><i class="fa fa-check"></i><b>4.2.3</b> Salt intake by sex</a></li>
<li class="chapter" data-level="4.2.4" data-path="intro-example.html"><a href="intro-example.html#save-results"><i class="fa fa-check"></i><b>4.2.4</b> Save results</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="intro-example.html"><a href="intro-example.html#turning-into-script"><i class="fa fa-check"></i><b>4.3</b> Turning it into a script</a></li>
<li class="chapter" data-level="4.4" data-path="intro-example.html"><a href="intro-example.html#exp-res"><i class="fa fa-check"></i><b>4.4</b> Exporting results</a></li>
</ul></li>
<li class="part"><span><b>II Working with data</b></span></li>
<li class="chapter" data-level="5" data-path="data-types-struct.html"><a href="data-types-struct.html"><i class="fa fa-check"></i><b>5</b> Data types and structures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-types-struct.html"><a href="data-types-struct.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-types-struct.html"><a href="data-types-struct.html#data-examples"><i class="fa fa-check"></i><b>5.1.1</b> Data examples</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-types-struct.html"><a href="data-types-struct.html#background-1"><i class="fa fa-check"></i><b>5.2</b> Background</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-types-struct.html"><a href="data-types-struct.html#recap"><i class="fa fa-check"></i><b>5.2.1</b> Recap</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-types-struct.html"><a href="data-types-struct.html#motivation"><i class="fa fa-check"></i><b>5.2.2</b> Motivation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-types-struct.html"><a href="data-types-struct.html#more-about-vectors"><i class="fa fa-check"></i><b>5.3</b> More about vectors</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-types-struct.html"><a href="data-types-struct.html#vector-calculations"><i class="fa fa-check"></i><b>5.3.1</b> Vector calculations</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-types-struct.html"><a href="data-types-struct.html#indexing-vectors-by-position"><i class="fa fa-check"></i><b>5.3.2</b> Indexing vectors by position</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-data"><i class="fa fa-check"></i><b>5.4</b> Logical data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-types-struct.html"><a href="data-types-struct.html#definition"><i class="fa fa-check"></i><b>5.4.1</b> Definition</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-expressions"><i class="fa fa-check"></i><b>5.4.2</b> Logical expressions</a></li>
<li class="chapter" data-level="5.4.3" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-vectors"><i class="fa fa-check"></i><b>5.4.3</b> Logical vectors</a></li>
<li class="chapter" data-level="5.4.4" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-vectors-for-indexing"><i class="fa fa-check"></i><b>5.4.4</b> Logical vectors for indexing</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-types-struct.html"><a href="data-types-struct.html#more-on-rectangular-data"><i class="fa fa-check"></i><b>5.5</b> More on rectangular data</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data-types-struct.html"><a href="data-types-struct.html#data-frame"><i class="fa fa-check"></i><b>5.5.1</b> Data frame</a></li>
<li class="chapter" data-level="5.5.2" data-path="data-types-struct.html"><a href="data-types-struct.html#matrix"><i class="fa fa-check"></i><b>5.5.2</b> Matrix</a></li>
<li class="chapter" data-level="5.5.3" data-path="data-types-struct.html"><a href="data-types-struct.html#extensions-alternatives"><i class="fa fa-check"></i><b>5.5.3</b> Extensions &amp; alternatives</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-types-struct.html"><a href="data-types-struct.html#helpers-subset-and-transform"><i class="fa fa-check"></i><b>5.6</b> Helpers: <code>subset</code> and <code>transform</code></a></li>
<li class="chapter" data-level="5.7" data-path="data-types-struct.html"><a href="data-types-struct.html#list-struct"><i class="fa fa-check"></i><b>5.7</b> Free-style data: lists</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="data-types-struct.html"><a href="data-types-struct.html#background-2"><i class="fa fa-check"></i><b>5.7.1</b> Background</a></li>
<li class="chapter" data-level="5.7.2" data-path="data-types-struct.html"><a href="data-types-struct.html#basic_lists"><i class="fa fa-check"></i><b>5.7.2</b> Basic list</a></li>
<li class="chapter" data-level="5.7.3" data-path="data-types-struct.html"><a href="data-types-struct.html#named_lists"><i class="fa fa-check"></i><b>5.7.3</b> Named lists</a></li>
<li class="chapter" data-level="5.7.4" data-path="data-types-struct.html"><a href="data-types-struct.html#example-data-frames"><i class="fa fa-check"></i><b>5.7.4</b> Example: data frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-processing.html"><a href="data-processing.html"><i class="fa fa-check"></i><b>6</b> Processing data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-processing.html"><a href="data-processing.html#overview-1"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="data-processing.html"><a href="data-processing.html#group-stats"><i class="fa fa-check"></i><b>6.2</b> Groupwise statistics</a></li>
<li class="chapter" data-level="6.3" data-path="data-processing.html"><a href="data-processing.html#own-functions"><i class="fa fa-check"></i><b>6.3</b> Using your own functions</a></li>
<li class="chapter" data-level="6.4" data-path="data-processing.html"><a href="data-processing.html#split-apply-combine"><i class="fa fa-check"></i><b>6.4</b> Split - Apply - Combine</a></li>
<li class="chapter" data-level="6.5" data-path="data-processing.html"><a href="data-processing.html#merge-data-base"><i class="fa fa-check"></i><b>6.5</b> Merging data sets</a></li>
<li class="chapter" data-level="6.6" data-path="data-processing.html"><a href="data-processing.html#general-pipeline"><i class="fa fa-check"></i><b>6.6</b> Using pipelines</a></li>
<li class="chapter" data-level="6.7" data-path="data-processing.html"><a href="data-processing.html#next-steps"><i class="fa fa-check"></i><b>6.7</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-tidyverse.html"><a href="data-tidyverse.html"><i class="fa fa-check"></i><b>7</b> The <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-tidyverse.html"><a href="data-tidyverse.html#overview-2"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="data-tidyverse.html"><a href="data-tidyverse.html#example-using-dplyr-for-data-processing"><i class="fa fa-check"></i><b>7.2</b> Example: Using <code>dplyr</code> for data processing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-tidyverse.html"><a href="data-tidyverse.html#overview-3"><i class="fa fa-check"></i><b>7.2.1</b> Overview</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-tidyverse.html"><a href="data-tidyverse.html#basic-data-operations"><i class="fa fa-check"></i><b>7.2.2</b> Basic data operations</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-tidyverse.html"><a href="data-tidyverse.html#groupwise-data-operations"><i class="fa fa-check"></i><b>7.2.3</b> Groupwise data operations</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-tidyverse.html"><a href="data-tidyverse.html#tidyverse-vs-base-r"><i class="fa fa-check"></i><b>7.3</b> <code>tidyverse</code> vs base R?</a></li>
</ul></li>
<li class="part"><span><b>III Estimation, inference, modelling</b></span></li>
<li class="chapter" data-level="8" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html"><i class="fa fa-check"></i><b>8</b> Basic Statistics &amp; Epidemiology</a>
<ul>
<li class="chapter" data-level="8.1" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#descriptives"><i class="fa fa-check"></i><b>8.1</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#base-desc"><i class="fa fa-check"></i><b>8.1.1</b> In base R</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#using-package-summarytools"><i class="fa fa-check"></i><b>8.1.2</b> Using package <code>summarytools</code></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#confidence-intervals"><i class="fa fa-check"></i><b>8.2</b> Confidence intervals</a></li>
<li class="chapter" data-level="8.3" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#statistical-tests"><i class="fa fa-check"></i><b>8.3</b> Statistical tests</a></li>
<li class="chapter" data-level="8.4" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#epidemiological-risk-measures"><i class="fa fa-check"></i><b>8.4</b> Epidemiological risk measures</a></li>
<li class="chapter" data-level="8.5" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#pander-intro"><i class="fa fa-check"></i><b>8.5</b> Improved display of descriptives</a></li>
<li class="chapter" data-level="8.6" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#next-steps-1"><i class="fa fa-check"></i><b>8.6</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-linear.html"><a href="regression-linear.html"><i class="fa fa-check"></i><b>9</b> Linear regression</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression-linear.html"><a href="regression-linear.html#overview-4"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="regression-linear.html"><a href="regression-linear.html#background-3"><i class="fa fa-check"></i><b>9.2</b> Background</a></li>
<li class="chapter" data-level="9.3" data-path="regression-linear.html"><a href="regression-linear.html#simple-linear-regression"><i class="fa fa-check"></i><b>9.3</b> Simple linear regression</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="regression-linear.html"><a href="regression-linear.html#scatter-loess"><i class="fa fa-check"></i><b>9.3.1</b> Looking at the data</a></li>
<li class="chapter" data-level="9.3.2" data-path="regression-linear.html"><a href="regression-linear.html#fitting-a-linear-regression-model"><i class="fa fa-check"></i><b>9.3.2</b> Fitting a linear regression model</a></li>
<li class="chapter" data-level="9.3.3" data-path="regression-linear.html"><a href="regression-linear.html#regression-table-and-inference"><i class="fa fa-check"></i><b>9.3.3</b> Regression table and inference</a></li>
<li class="chapter" data-level="9.3.4" data-path="regression-linear.html"><a href="regression-linear.html#prediction"><i class="fa fa-check"></i><b>9.3.4</b> Prediction</a></li>
<li class="chapter" data-level="9.3.5" data-path="regression-linear.html"><a href="regression-linear.html#diagnostics"><i class="fa fa-check"></i><b>9.3.5</b> Diagnostics</a></li>
<li class="chapter" data-level="9.3.6" data-path="regression-linear.html"><a href="regression-linear.html#binary-predictor-and-dummy-coding"><i class="fa fa-check"></i><b>9.3.6</b> Binary predictor and dummy coding</a></li>
<li class="chapter" data-level="9.3.7" data-path="regression-linear.html"><a href="regression-linear.html#nicer-regression-tables"><i class="fa fa-check"></i><b>9.3.7</b> Nicer regression tables</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression-linear.html"><a href="regression-linear.html#multiple-linear-regression"><i class="fa fa-check"></i><b>9.4</b> Multiple linear regression</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="regression-linear.html"><a href="regression-linear.html#multiple-predictors"><i class="fa fa-check"></i><b>9.4.1</b> Multiple predictors</a></li>
<li class="chapter" data-level="9.4.2" data-path="regression-linear.html"><a href="regression-linear.html#categorical-predictors-with-2-levels"><i class="fa fa-check"></i><b>9.4.2</b> Categorical predictors with <span class="math inline">\(&gt;\)</span> 2 levels</a></li>
<li class="chapter" data-level="9.4.3" data-path="regression-linear.html"><a href="regression-linear.html#interactions"><i class="fa fa-check"></i><b>9.4.3</b> Interactions</a></li>
<li class="chapter" data-level="9.4.4" data-path="regression-linear.html"><a href="regression-linear.html#splines"><i class="fa fa-check"></i><b>9.4.4</b> Splines</a></li>
<li class="chapter" data-level="9.4.5" data-path="regression-linear.html"><a href="regression-linear.html#model-comparisons"><i class="fa fa-check"></i><b>9.4.5</b> Model comparisons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression-other.html"><a href="regression-other.html"><i class="fa fa-check"></i><b>10</b> More regression models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regression-other.html"><a href="regression-other.html#logistic-regression"><i class="fa fa-check"></i><b>10.1</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="regression-other.html"><a href="regression-other.html#ex.-birthweight-uterine-irritability"><i class="fa fa-check"></i><b>10.1.1</b> Ex.: Birthweight &amp; uterine irritability</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="regression-other.html"><a href="regression-other.html#survival-regression"><i class="fa fa-check"></i><b>10.2</b> Survival regression</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="regression-other.html"><a href="regression-other.html#survival-data"><i class="fa fa-check"></i><b>10.2.1</b> Survival data</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression-other.html"><a href="regression-other.html#survival-curves"><i class="fa fa-check"></i><b>10.2.2</b> Survival curves</a></li>
<li class="chapter" data-level="10.2.3" data-path="regression-other.html"><a href="regression-other.html#cox-regression"><i class="fa fa-check"></i><b>10.2.3</b> Cox regression</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression-other.html"><a href="regression-other.html#other-models"><i class="fa fa-check"></i><b>10.3</b> Other models</a></li>
</ul></li>
<li class="part"><span><b>IV Graphics</b></span></li>
<li class="chapter" data-level="11" data-path="graphics-base.html"><a href="graphics-base.html"><i class="fa fa-check"></i><b>11</b> Graphics in base R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="graphics-base.html"><a href="graphics-base.html#overview-5"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="graphics-base.html"><a href="graphics-base.html#base-plots-base-plots"><i class="fa fa-check"></i><b>11.2</b> Base plots</a></li>
<li class="chapter" data-level="11.3" data-path="graphics-base.html"><a href="graphics-base.html#graphical-parameters"><i class="fa fa-check"></i><b>11.3</b> Graphical parameters</a>
<ul>
<li class="chapter" data-level="" data-path="graphics-base.html"><a href="graphics-base.html#vectorized-graphical-parameters"><i class="fa fa-check"></i>Vectorized graphical parameters</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="graphics-base.html"><a href="graphics-base.html#graphical-devices"><i class="fa fa-check"></i><b>11.4</b> Displaying and saving plots</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="graphics-base.html"><a href="graphics-base.html#device-par"><i class="fa fa-check"></i><b>11.4.1</b> Controlling a device through <code>par</code></a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="graphics-base.html"><a href="graphics-base.html#high-low-plots"><i class="fa fa-check"></i><b>11.5</b> High- vs. low-level plotting</a></li>
<li class="chapter" data-level="11.6" data-path="graphics-base.html"><a href="graphics-base.html#using-colors"><i class="fa fa-check"></i><b>11.6</b> Using colors</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="graphics-base.html"><a href="graphics-base.html#specifying-colors-by-name"><i class="fa fa-check"></i><b>11.6.1</b> Specifying colors by name</a></li>
<li class="chapter" data-level="11.6.2" data-path="graphics-base.html"><a href="graphics-base.html#specifying-colors-mathematically"><i class="fa fa-check"></i><b>11.6.2</b> Specifying colors mathematically</a></li>
<li class="chapter" data-level="11.6.3" data-path="graphics-base.html"><a href="graphics-base.html#using-sets-of-colors-palettes"><i class="fa fa-check"></i><b>11.6.3</b> Using sets of colors: palettes</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="graphics-base.html"><a href="graphics-base.html#next-steps-2"><i class="fa fa-check"></i><b>11.7</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html"><i class="fa fa-check"></i><b>12</b> ggplot2: an alternative plotting system</a>
<ul>
<li class="chapter" data-level="12.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#introduction-1"><i class="fa fa-check"></i><b>12.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#concepts-basic-usage"><i class="fa fa-check"></i><b>12.1.1</b> Concepts &amp; basic usage</a></li>
<li class="chapter" data-level="12.1.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#practicalities"><i class="fa fa-check"></i><b>12.1.2</b> Practicalities</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#more-about-aesthetics-and-geoms"><i class="fa fa-check"></i><b>12.2</b> More about aesthetics and geoms</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#optional-aesthetics"><i class="fa fa-check"></i><b>12.2.1</b> Optional aesthetics</a></li>
<li class="chapter" data-level="12.2.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#multiple-geoms"><i class="fa fa-check"></i><b>12.2.2</b> Multiple geoms</a></li>
<li class="chapter" data-level="12.2.3" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#using-geom-arguments"><i class="fa fa-check"></i><b>12.2.3</b> Using geom arguments</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#splitting-plots-by-sub-groups"><i class="fa fa-check"></i><b>12.3</b> Splitting plots by sub-groups</a></li>
<li class="chapter" data-level="12.4" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#changing-the-default-appearance"><i class="fa fa-check"></i><b>12.4</b> Changing the default appearance</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#scales"><i class="fa fa-check"></i><b>12.4.1</b> Scales</a></li>
<li class="chapter" data-level="12.4.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#fixing-aesthetics"><i class="fa fa-check"></i><b>12.4.2</b> Fixing aesthetics</a></li>
<li class="chapter" data-level="12.4.3" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#themes"><i class="fa fa-check"></i><b>12.4.3</b> Themes</a></li>
<li class="chapter" data-level="12.4.4" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#other"><i class="fa fa-check"></i><b>12.4.4</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#complex-layering-and-annotation"><i class="fa fa-check"></i><b>12.5</b> Complex layering and annotation</a></li>
<li class="chapter" data-level="12.6" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#extensions"><i class="fa fa-check"></i><b>12.6</b> Extensions</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#assemble-multi-panel-plots-patchwork"><i class="fa fa-check"></i><b>12.6.1</b> Assemble multi-panel plots: patchwork</a></li>
<li class="chapter" data-level="12.6.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#others"><i class="fa fa-check"></i><b>12.6.2</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#next-steps-3"><i class="fa fa-check"></i><b>12.7</b> Next steps</a></li>
</ul></li>
<li class="part"><span><b>V Organizing the analysis</b></span></li>
<li class="chapter" data-level="13" data-path="tables-nice.html"><a href="tables-nice.html"><i class="fa fa-check"></i><b>13</b> Generating nice tables</a></li>
<li class="chapter" data-level="14" data-path="dynamic-documents.html"><a href="dynamic-documents.html"><i class="fa fa-check"></i><b>14</b> Dynamic documents</a></li>
<li class="chapter" data-level="15" data-path="scripting-workflow.html"><a href="scripting-workflow.html"><i class="fa fa-check"></i><b>15</b> Scripting and workflow</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro-example" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> A simple example<a href="intro-example.html#intro-example" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="intro-ex-import" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Data import<a href="intro-example.html#intro-ex-import" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The data in question is part of a survey, where patients who came to a health center for having their blood pressure measured were asked about lifestyle factors, including physical activity and nutrition. For the current example, we only have a small subset of <span class="math inline">\(n=100\)</span> subjects, for whom we have age, sex, systolic and diastolic blood pressure as well their answer to the question “Do you regularly add salt to your meal after it has been served?”. We are interested in how the risk factors sex and “extra salt” are related to the blood pressure variables.</p>
<p>Looking at the file <code>saltadd.txt</code> in a text editor (e.g. notepad on Windows), we notice that</p>
<ol style="list-style-type: lower-alpha">
<li>the first row of the file contains variable names, and</li>
<li>the columns of the data seem to be separated by tabulators (tabs).</li>
</ol>
<p>We therefore can read the file with the command</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="intro-example.html#cb49-1" tabindex="-1"></a><span class="sc">&gt;</span> salt_ht <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;Data/saltadd.txt&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-2"><a href="intro-example.html#cb49-2" tabindex="-1"></a><span class="sc">+</span>     <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>In other words, we command R to take the file named <code>saltadd.txt</code> in the sub-directory <code>Data</code> of the current working directory,
and read it in</p>
<ul>
<li>using a tabulator<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> as separator between fields in the same row,</li>
<li>using the first row to set the column names,</li>
<li>converting non-numerical variables into factors.</li>
</ul>
<p>The resulting data frame is then stored as object <code>salt_ht</code> in the current working environment, where we can process it as we see fit.</p>
<p>Alternatively, you can import the data file via opening the drop-down menu <em>Import Data</em> in the Environment tab and selecting <em>From Text (base)</em>. After selecting the data file via the GUI, this opens a dialogue where you can set the appropriate options for the data import, including the name of the resulting data frame, the column separator, and conversion of text columns to factors, just as above. RStudio will translate your input into the corresponding call to function <code>read.delim</code>, which is a variant of <code>read.table</code> with different default settings (see <code>?read.delim</code> for details).</p>
</div>
<div id="analysis" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Analysis<a href="intro-example.html#analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="desc-ex" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Descriptives<a href="intro-example.html#desc-ex" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s start with a simple summary of the whole data, to familiarize ourselves with it, and to do some general quality control:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="intro-example.html#cb50-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">summary</span>(salt_ht)</span>
<span id="cb50-2"><a href="intro-example.html#cb50-2" tabindex="-1"></a>       ID           sex          sbp             dbp         saltadd        age       </span>
<span id="cb50-3"><a href="intro-example.html#cb50-3" tabindex="-1"></a> Min.   <span class="sc">:</span><span class="dv">1006</span>   female<span class="sc">:</span><span class="dv">55</span>   Min.   <span class="sc">:</span> <span class="fl">80.0</span>   Min.   <span class="sc">:</span> <span class="fl">55.00</span>   no  <span class="sc">:</span><span class="dv">37</span>   Min.   <span class="sc">:</span><span class="fl">26.00</span>  </span>
<span id="cb50-4"><a href="intro-example.html#cb50-4" tabindex="-1"></a> 1st Qu.<span class="sc">:</span><span class="dv">2879</span>   male  <span class="sc">:</span><span class="dv">45</span>   1st Qu.<span class="sc">:</span><span class="fl">121.0</span>   1st Qu.<span class="sc">:</span> <span class="fl">80.00</span>   yes <span class="sc">:</span><span class="dv">43</span>   1st Qu.<span class="sc">:</span><span class="fl">39.75</span>  </span>
<span id="cb50-5"><a href="intro-example.html#cb50-5" tabindex="-1"></a> Median <span class="sc">:</span><span class="dv">5237</span>               Median <span class="sc">:</span><span class="fl">148.5</span>   Median <span class="sc">:</span> <span class="fl">96.00</span>   NA<span class="st">&#39;s:20   Median :50.00  </span></span>
<span id="cb50-6"><a href="intro-example.html#cb50-6" tabindex="-1"></a><span class="st"> Mean   :5227               Mean   :154.3   Mean   : 98.51             Mean   :48.71  </span></span>
<span id="cb50-7"><a href="intro-example.html#cb50-7" tabindex="-1"></a><span class="st"> 3rd Qu.:7309               3rd Qu.:184.0   3rd Qu.:116.25             3rd Qu.:58.00  </span></span>
<span id="cb50-8"><a href="intro-example.html#cb50-8" tabindex="-1"></a><span class="st"> Max.   :9962               Max.   :238.0   Max.   :158.00             Max.   :71.00  </span></span></code></pre></div>
<p>These seem overall reasonable values, though the blood pressure of the subjects do tend towards high and even very high values (e.g. systolic blood pressures above 200 points).</p>
<p>Note that the salt variable actually has 20 missing values (coded as <code>NA</code> in R); any comparison involving this variable will by default only use the 80 subjects where the variable has non-missing values.</p>
</div>
<div id="blood-pressure-by-salt-intake" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Blood pressure by salt intake<a href="intro-example.html#blood-pressure-by-salt-intake" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s look at the distribution of the systolic blood pressure by salt intake. For a small data set like this, side-by-side boxplots work well for comparison, so we use the function <code>boxplot</code> with the formula interface we have seen before:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="intro-example.html#cb51-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">boxplot</span>(sbp <span class="sc">~</span> saltadd, <span class="at">data =</span> salt_ht)</span></code></pre></div>
<p><img src="introductio-to-r_files/figure-html/unnamed-chunk-57-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>It appears that the median blood pressure is higher in those who add extra salt, though both groups also show considerable variability, as indicated by the box heights (interquartile ranges).</p>
<p>We also want to report the actual mean- and median blood pressures for both groups separately. We can do this using the <code>subset</code> function we have introduced earlier:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="intro-example.html#cb52-1" tabindex="-1"></a><span class="sc">&gt;</span> salt_ht_yes <span class="ot">&lt;-</span> <span class="fu">subset</span>(salt_ht, saltadd <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>)</span>
<span id="cb52-2"><a href="intro-example.html#cb52-2" tabindex="-1"></a><span class="sc">&gt;</span> salt_ht_no <span class="ot">&lt;-</span> <span class="fu">subset</span>(salt_ht, saltadd <span class="sc">==</span> <span class="st">&quot;no&quot;</span>)</span>
<span id="cb52-3"><a href="intro-example.html#cb52-3" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">summary</span>(salt_ht_yes<span class="sc">$</span>sbp)</span>
<span id="cb52-4"><a href="intro-example.html#cb52-4" tabindex="-1"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb52-5"><a href="intro-example.html#cb52-5" tabindex="-1"></a>   <span class="fl">80.0</span>   <span class="fl">125.0</span>   <span class="fl">171.0</span>   <span class="fl">163.0</span>   <span class="fl">195.5</span>   <span class="fl">224.0</span> </span>
<span id="cb52-6"><a href="intro-example.html#cb52-6" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">summary</span>(salt_ht_no<span class="sc">$</span>sbp)</span>
<span id="cb52-7"><a href="intro-example.html#cb52-7" tabindex="-1"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb52-8"><a href="intro-example.html#cb52-8" tabindex="-1"></a>   <span class="fl">80.0</span>   <span class="fl">118.0</span>   <span class="fl">132.0</span>   <span class="fl">137.4</span>   <span class="fl">160.0</span>   <span class="fl">201.0</span> </span></code></pre></div>
<p>Note that this is not an efficient or recommended way of doing sub-group analysis in R, but it is what works with our still very limited R vocabulary. Per-group data processing will be discussed in more detail in Section <a href="data-processing.html#data-processing">6</a>.</p>
<p>The question remains whether the difference in blood pressure we see is small or large in relation to the sampling variation in the data. We can test the null hypothesis that the underlying true mean systolic blood pressure is the same in both groups using the function <code>t.test</code> with the now already customary formula notation:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="intro-example.html#cb53-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">t.test</span>(sbp <span class="sc">~</span> saltadd, <span class="at">data =</span> salt_ht)</span>
<span id="cb53-2"><a href="intro-example.html#cb53-2" tabindex="-1"></a></span>
<span id="cb53-3"><a href="intro-example.html#cb53-3" tabindex="-1"></a>    Welch Two Sample t<span class="sc">-</span>test</span>
<span id="cb53-4"><a href="intro-example.html#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="intro-example.html#cb53-5" tabindex="-1"></a>data<span class="sc">:</span>  sbp by saltadd</span>
<span id="cb53-6"><a href="intro-example.html#cb53-6" tabindex="-1"></a>t <span class="ot">=</span> <span class="sc">-</span><span class="fl">3.3088</span>, df <span class="ot">=</span> <span class="fl">76.733</span>, p<span class="sc">-</span>value <span class="ot">=</span> <span class="fl">0.001429</span></span>
<span id="cb53-7"><a href="intro-example.html#cb53-7" tabindex="-1"></a>alternative hypothesis<span class="sc">:</span> true difference <span class="cf">in</span> means between group no and group yes is not equal to <span class="dv">0</span></span>
<span id="cb53-8"><a href="intro-example.html#cb53-8" tabindex="-1"></a><span class="dv">95</span> percent confidence interval<span class="sc">:</span></span>
<span id="cb53-9"><a href="intro-example.html#cb53-9" tabindex="-1"></a> <span class="sc">-</span><span class="fl">40.95533</span> <span class="sc">-</span><span class="fl">10.17981</span></span>
<span id="cb53-10"><a href="intro-example.html#cb53-10" tabindex="-1"></a>sample estimates<span class="sc">:</span></span>
<span id="cb53-11"><a href="intro-example.html#cb53-11" tabindex="-1"></a> mean <span class="cf">in</span> group no mean <span class="cf">in</span> group yes </span>
<span id="cb53-12"><a href="intro-example.html#cb53-12" tabindex="-1"></a>         <span class="fl">137.4324</span>          <span class="fl">163.0000</span> </span></code></pre></div>
<p>The result is a Welch t-test (i.e. not assuming equal variances in both groups). R reports the name of the test, the test statistic, degrees of freedom and the resulting p-value plus the alternative hypothesis (here indicating that this is a two-sided p-value). We conclude that at the usual significance level of <span class="math inline">\(\alpha=0.05\)</span>, there is indeed a statistically significant difference between the mean systolic blood pressures in the two underlying populations. Additionally, the output also lists a 95% confidence interval for the mean difference as well as the group means.</p>
<p><strong>Exercises:</strong></p>
<ol style="list-style-type: decimal">
<li>How can we calculate the standard deviation of the systolic blood pressure in both groups?</li>
<li>How can we run a <em>Student</em> t-test using the function <code>t.test</code>?</li>
<li>Repeat the analysis, but for the diastolic blood pressure; add an informative title to the boxplot.</li>
</ol>
</div>
<div id="salt-intake-by-sex" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Salt intake by sex<a href="intro-example.html#salt-intake-by-sex" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We also want to look a the relationship between sex and salt intake. As both of these are categorical, we just need to look at the corresponding cross-tabulation. This can be done via the function <code>table</code> simply by specifying two arguments instead of one as before:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="intro-example.html#cb54-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">table</span>(salt_ht<span class="sc">$</span>sex, salt_ht<span class="sc">$</span>saltadd)</span>
<span id="cb54-2"><a href="intro-example.html#cb54-2" tabindex="-1"></a>        </span>
<span id="cb54-3"><a href="intro-example.html#cb54-3" tabindex="-1"></a>         no yes</span>
<span id="cb54-4"><a href="intro-example.html#cb54-4" tabindex="-1"></a>  female <span class="dv">13</span>  <span class="dv">28</span></span>
<span id="cb54-5"><a href="intro-example.html#cb54-5" tabindex="-1"></a>  male   <span class="dv">24</span>  <span class="dv">15</span></span></code></pre></div>
<p>At first glance, it seems that the salt intake does indeed differ by sex. As before, we can use the function <code>proportions</code> to convert the asbolute frequencies to proportions / relative frequencies:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="intro-example.html#cb55-1" tabindex="-1"></a><span class="sc">&gt;</span> tab <span class="ot">&lt;-</span> <span class="fu">table</span>(salt_ht<span class="sc">$</span>sex, salt_ht<span class="sc">$</span>saltadd)</span>
<span id="cb55-2"><a href="intro-example.html#cb55-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">proportions</span>(tab)</span>
<span id="cb55-3"><a href="intro-example.html#cb55-3" tabindex="-1"></a>        </span>
<span id="cb55-4"><a href="intro-example.html#cb55-4" tabindex="-1"></a>             no    yes</span>
<span id="cb55-5"><a href="intro-example.html#cb55-5" tabindex="-1"></a>  female <span class="fl">0.1625</span> <span class="fl">0.3500</span></span>
<span id="cb55-6"><a href="intro-example.html#cb55-6" tabindex="-1"></a>  male   <span class="fl">0.3000</span> <span class="fl">0.1875</span></span></code></pre></div>
<p>Note that for a two-by-two table like here, we have different possibilities for calculating proportions: we can report the proportion of the total, like above, or we can calculate row- or column-proportions (i.e. split by salt intake within sex, or split within salt intake by sex). If we want one of the latter, we can specify the <em>margin</em> as second argument to <code>proportions</code>, with <code>1</code> indicating rows and <code>2</code> indicating columns:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="intro-example.html#cb56-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">proportions</span>(tab, <span class="at">margin =</span> <span class="dv">1</span>)</span>
<span id="cb56-2"><a href="intro-example.html#cb56-2" tabindex="-1"></a>        </span>
<span id="cb56-3"><a href="intro-example.html#cb56-3" tabindex="-1"></a>                no       yes</span>
<span id="cb56-4"><a href="intro-example.html#cb56-4" tabindex="-1"></a>  female <span class="fl">0.3170732</span> <span class="fl">0.6829268</span></span>
<span id="cb56-5"><a href="intro-example.html#cb56-5" tabindex="-1"></a>  male   <span class="fl">0.6153846</span> <span class="fl">0.3846154</span></span>
<span id="cb56-6"><a href="intro-example.html#cb56-6" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">proportions</span>(tab, <span class="at">margin =</span> <span class="dv">2</span>)</span>
<span id="cb56-7"><a href="intro-example.html#cb56-7" tabindex="-1"></a>        </span>
<span id="cb56-8"><a href="intro-example.html#cb56-8" tabindex="-1"></a>                no       yes</span>
<span id="cb56-9"><a href="intro-example.html#cb56-9" tabindex="-1"></a>  female <span class="fl">0.3513514</span> <span class="fl">0.6511628</span></span>
<span id="cb56-10"><a href="intro-example.html#cb56-10" tabindex="-1"></a>  male   <span class="fl">0.6486486</span> <span class="fl">0.3488372</span></span></code></pre></div>
<p>So we have e.g. 68% of women who usually add salt, as compared to only 38% of men.</p>
<p>We can use the function <code>chisq.test</code> to test the null hypothesis that there is no association between the rows (i.e. sex) and the columns (i.e. salt intake) of this frequency table:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="intro-example.html#cb57-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">chisq.test</span>(tab)</span>
<span id="cb57-2"><a href="intro-example.html#cb57-2" tabindex="-1"></a></span>
<span id="cb57-3"><a href="intro-example.html#cb57-3" tabindex="-1"></a>    Pearson<span class="st">&#39;s Chi-squared test with Yates&#39;</span> continuity correction</span>
<span id="cb57-4"><a href="intro-example.html#cb57-4" tabindex="-1"></a></span>
<span id="cb57-5"><a href="intro-example.html#cb57-5" tabindex="-1"></a>data<span class="sc">:</span>  tab</span>
<span id="cb57-6"><a href="intro-example.html#cb57-6" tabindex="-1"></a>X<span class="sc">-</span>squared <span class="ot">=</span> <span class="fl">6.0053</span>, df <span class="ot">=</span> <span class="dv">1</span>, p<span class="sc">-</span>value <span class="ot">=</span> <span class="fl">0.01426</span></span></code></pre></div>
<p>Note that the results of this test look quite similar to what we have seen from the t-test above: name of the test, test statistic and degrees of freedom, p-value (and it appears that men and women do differ significantly in their intake of salt in this example, at least at the conventional <span class="math inline">\(\alpha=0.05\)</span>).</p>
</div>
<div id="save-results" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Save results<a href="intro-example.html#save-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As final touch, we want to save the data frame we have imported for further processing. This can be done via the function <code>save</code> which takes any number of objects as arguments, and saves them to the binary data file specified via argument <code>file</code>:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="intro-example.html#cb58-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">save</span>(salt_ht, <span class="at">file =</span> <span class="st">&quot;Data/saltadd.RData&quot;</span>)</span></code></pre></div>
<p>A quick check with <code>dir</code> will show that we now have the new file <code>saltadd.RData</code> in the folder <code>Data</code>. The content of this file (i.e. the single data frame <code>salt_ht</code>) can be loaded into any R session either via the function <code>load</code> at the console, by clicking on the file name in the Files tab, or via the open folder-icon in the top left of the Environment tab.</p>
</div>
</div>
<div id="turning-into-script" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Turning it into a script<a href="intro-example.html#turning-into-script" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A proper statistical analysis consists of two elements, the original raw data and the code used to generate the reported output - everything else is just messing around with data. Specifically, a result file is <em>not</em> an analysis, but only the output from an analysis.</p>
<p>This means we are not done yet - we still have to turn our interactive session into a proper R script. We have already looked at the mechanics of this process in Section <a href="intro_rstudio.html#console2source">3.3.1</a>: highlight all relevant commands in the History tab and click on <code>To Source</code> to copy them to the Source pane, either to a freshly opened new script file or just into the currently open text file.
Here, let’s assume that we have saved the commands we just copied to from the History tab to a script file called <code>BasicExample.R</code>. This is still a very crude affair: hard to read, may well continue incorrect commands (typos), and completely lacks context. This cannot stand, and we should perform at a minimum the following four steps:</p>
<ol style="list-style-type: decimal">
<li><p>Clean up the code: delete repeated commands, incorrect commands, help calls, explorations that do not contribute to the final analysis etc. (short is good).</p></li>
<li><p>Add a comment header that very briefly explains what the script does, who has written it, and roughly when the script was first written. Whoever opens the file should not have to scroll to see this minimal information.</p></li>
<li><p>Arrange the code in smaller, logical units separated by empty lines; each unit should correspond to one step in the overall analysis, similar to how we use paragraphs to structure ideas in a paper.</p></li>
<li><p>Add comments throughout, explaining what you do and why. You don’t have to go overboard, but it should provide sufficient context to understand your reasoning. A reasonable ambition level is that you yourself should understand what is going on six months after you have last touched the script (harder than it sounds!).</p></li>
</ol>
<p>For our minimal example in this section, a reasonable script could look like this:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="intro-example.html#cb59-1" tabindex="-1"></a><span class="co"># BasicExample.R</span></span>
<span id="cb59-2"><a href="intro-example.html#cb59-2" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb59-3"><a href="intro-example.html#cb59-3" tabindex="-1"></a><span class="co"># Example code for course Introduction to R (2958)</span></span>
<span id="cb59-4"><a href="intro-example.html#cb59-4" tabindex="-1"></a><span class="co"># Module 1: A scripted data analysis example</span></span>
<span id="cb59-5"><a href="intro-example.html#cb59-5" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb59-6"><a href="intro-example.html#cb59-6" tabindex="-1"></a><span class="co"># Alexander.Ploner@ki.se 2024-03-08</span></span>
<span id="cb59-7"><a href="intro-example.html#cb59-7" tabindex="-1"></a></span>
<span id="cb59-8"><a href="intro-example.html#cb59-8" tabindex="-1"></a></span>
<span id="cb59-9"><a href="intro-example.html#cb59-9" tabindex="-1"></a><span class="co"># Load the data; note explicit path to file</span></span>
<span id="cb59-10"><a href="intro-example.html#cb59-10" tabindex="-1"></a>salt_ht <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;~/Rcourse/Data/saltadd.txt&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, </span>
<span id="cb59-11"><a href="intro-example.html#cb59-11" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">stringsAsFactors=</span><span class="cn">TRUE</span>)</span>
<span id="cb59-12"><a href="intro-example.html#cb59-12" tabindex="-1"></a></span>
<span id="cb59-13"><a href="intro-example.html#cb59-13" tabindex="-1"></a><span class="co"># Descriptives: quality control</span></span>
<span id="cb59-14"><a href="intro-example.html#cb59-14" tabindex="-1"></a><span class="fu">summary</span>(salt_ht)</span>
<span id="cb59-15"><a href="intro-example.html#cb59-15" tabindex="-1"></a></span>
<span id="cb59-16"><a href="intro-example.html#cb59-16" tabindex="-1"></a><span class="co"># Q1: systolic blood pressure by saltadd - descriptives</span></span>
<span id="cb59-17"><a href="intro-example.html#cb59-17" tabindex="-1"></a><span class="fu">boxplot</span>(sbp <span class="sc">~</span> saltadd, <span class="at">data =</span> salt_ht)</span>
<span id="cb59-18"><a href="intro-example.html#cb59-18" tabindex="-1"></a>salt_ht_yes <span class="ot">&lt;-</span> <span class="fu">subset</span>(salt_ht, saltadd <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>)</span>
<span id="cb59-19"><a href="intro-example.html#cb59-19" tabindex="-1"></a>salt_ht_no  <span class="ot">&lt;-</span> <span class="fu">subset</span>(salt_ht, saltadd <span class="sc">==</span> <span class="st">&quot;no&quot;</span>)</span>
<span id="cb59-20"><a href="intro-example.html#cb59-20" tabindex="-1"></a><span class="fu">summary</span>(salt_ht_yes<span class="sc">$</span>sbp)</span>
<span id="cb59-21"><a href="intro-example.html#cb59-21" tabindex="-1"></a><span class="fu">summary</span>(salt_ht_no<span class="sc">$</span>sbp)</span>
<span id="cb59-22"><a href="intro-example.html#cb59-22" tabindex="-1"></a></span>
<span id="cb59-23"><a href="intro-example.html#cb59-23" tabindex="-1"></a><span class="co"># Q1: inference</span></span>
<span id="cb59-24"><a href="intro-example.html#cb59-24" tabindex="-1"></a><span class="fu">t.test</span>(sbp <span class="sc">~</span> saltadd, <span class="at">data =</span> salt_ht)</span>
<span id="cb59-25"><a href="intro-example.html#cb59-25" tabindex="-1"></a></span>
<span id="cb59-26"><a href="intro-example.html#cb59-26" tabindex="-1"></a><span class="co"># Q2: salt intake by sex - descriptives</span></span>
<span id="cb59-27"><a href="intro-example.html#cb59-27" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">table</span>(salt_ht<span class="sc">$</span>sex, salt_ht<span class="sc">$</span>saltadd)</span>
<span id="cb59-28"><a href="intro-example.html#cb59-28" tabindex="-1"></a>tab</span>
<span id="cb59-29"><a href="intro-example.html#cb59-29" tabindex="-1"></a><span class="co"># Proportion saltadders per sex</span></span>
<span id="cb59-30"><a href="intro-example.html#cb59-30" tabindex="-1"></a><span class="fu">proportions</span>(tab, <span class="at">margin=</span><span class="dv">1</span>)</span>
<span id="cb59-31"><a href="intro-example.html#cb59-31" tabindex="-1"></a></span>
<span id="cb59-32"><a href="intro-example.html#cb59-32" tabindex="-1"></a><span class="co"># Q2: inference</span></span>
<span id="cb59-33"><a href="intro-example.html#cb59-33" tabindex="-1"></a><span class="fu">chisq.test</span>(tab)</span>
<span id="cb59-34"><a href="intro-example.html#cb59-34" tabindex="-1"></a></span>
<span id="cb59-35"><a href="intro-example.html#cb59-35" tabindex="-1"></a><span class="co"># Save the imported data frame; note - same explicit path </span></span>
<span id="cb59-36"><a href="intro-example.html#cb59-36" tabindex="-1"></a><span class="co"># as for original text file</span></span>
<span id="cb59-37"><a href="intro-example.html#cb59-37" tabindex="-1"></a><span class="fu">save</span>(salt_ht, <span class="at">file=</span><span class="st">&quot;~/Rcourse/Data/saltadd.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="exp-res" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Exporting results<a href="intro-example.html#exp-res" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Simply running an analysis script will recreate the original analysis results in RStudio, with numerical output in the console and graphical output in the Plots tab. Alternatively, R scripts can be <em>compiled</em> to create a document that contains both the original R commands and the output they generate. At the simplest level, the resulting document corresponds to a log file in other statistical programs like Stata or SAS, which serves as a record of running a script on a specific data set.</p>
<p>In order to generate such an output file, simply load the script into the RStudio Source Pane, and click on the notebook icon <img src="figures/RStudio_2023_12_1_402/CompileReport.png" /> (alternatively, press the hotkey combination Ctrl-Shift-K). This will open a small dialogue with a choice of three output formats, HTML, PDF and MS Word. Clicking on Compile will generate an output file with the same basename as the script file and the file extension corresponding to the chosen output format.</p>
<p>Figure <a href="intro-example.html#fig:compiledViewer">4.1</a> below shows what this looks like: in the output file, the comments and code from the original script (<code>boxplot</code>, <code>subset</code>, <code>summary</code>) are combined with the output they produce, both graphical (the boxplots) and numerical (the six-number summaries). Together, this is a self-contained record of both the analysis steps and their results.</p>
<p>If we compile the script to a file format that is a bit easier to edit than HTML, say the MS Word format, the resulting output file can also serve as the starting point for a report on the analysis and its results.</p>
<p>Note that this is just a starting point for exporting results from R/RStudio. We will see that it is easy to add R functions to a script that will format results in an attractive manner in the compiled document (Sections <a href="basic-stats-epi.html#pander-intro">8.5</a> and <a href="tables-nice.html#tables-nice">13</a>), and easy to write comments that appear as formatted text (Section <a href="dynamic-documents.html#dynamic-documents">14</a>). Together, this will allow us to turn a simple R script into a very reasonable draft report with just the click of a button.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:compiledViewer"></span>
<img src="figures/RStudio_2023_12_1_402/CompiledBasicExample_Viewer.png" alt="Extract from `BasicExample.html`, compiled from script `BasicExample.R`" width="90%" />
<p class="caption">
Figure 4.1: Extract from <code>BasicExample.html</code>, compiled from script <code>BasicExample.R</code>
</p>
</div>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>Note that <code>\t</code> represents a special character (ASCII code 9) used to indicate indentation and separation (e.g. in data files as in this example); the combination <code>\t</code> is not a string of two characters, but represents the single (unprintable) tab character, see e.g. <a href="https://en.wikipedia.org/wiki/Tab_key#Tab_characters" class="uri">https://en.wikipedia.org/wiki/Tab_key#Tab_characters</a><a href="intro-example.html#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro_rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-types-struct.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/intro_example.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introductio-to-r.pdf", "introductio-to-r.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
