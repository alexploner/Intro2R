<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 The tidyverse | Introduction to R</title>
  <meta name="description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="7 The tidyverse | Introduction to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 The tidyverse | Introduction to R" />
  
  <meta name="twitter:description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  



<meta name="date" content="2023-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-processing.html"/>
<link rel="next" href="basic-stats-epi.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this document</a></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="1" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="background.html"><a href="background.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="background.html"><a href="background.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2</b> What is RStudio?</a></li>
<li class="chapter" data-level="1.3" data-path="background.html"><a href="background.html#software-installation"><i class="fa fa-check"></i><b>1.3</b> Software installation</a></li>
<li class="chapter" data-level="1.4" data-path="background.html"><a href="background.html#references"><i class="fa fa-check"></i><b>1.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Working with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#starting-r"><i class="fa fa-check"></i><b>2.1</b> Starting R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#storing-data-as-objects"><i class="fa fa-check"></i><b>2.2</b> Storing data as objects</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#about-variable-names"><i class="fa fa-check"></i><b>2.2.1</b> About variable names</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#data-structure-i-the-vector"><i class="fa fa-check"></i><b>2.3</b> Data structure I: The vector</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#ex-simple-desc"><i class="fa fa-check"></i><b>2.3.1</b> Example: simple descriptives</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#ex-simple-plots"><i class="fa fa-check"></i><b>2.3.2</b> Example: simple plots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#non-numeric-data"><i class="fa fa-check"></i><b>2.4</b> Non-numeric data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#descriptives-for-grouping-data"><i class="fa fa-check"></i><b>2.4.1</b> Descriptives for grouping data</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#character-vector-vs-factor"><i class="fa fa-check"></i><b>2.4.2</b> Character vector vs factor</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#general-data-in-r"><i class="fa fa-check"></i><b>2.5</b> General data in R</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#extracting-parts-of-a-data-frame"><i class="fa fa-check"></i><b>2.5.1</b> Extracting parts of a data frame</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#ex_desc_stats"><i class="fa fa-check"></i><b>2.5.2</b> Example: descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#meta-activity"><i class="fa fa-check"></i><b>2.6</b> Meta-activity</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>2.6.1</b> Getting help</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction.html"><a href="introduction.html#keeping-track-of-objects"><i class="fa fa-check"></i><b>2.6.2</b> Keeping track of objects</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#finding-files"><i class="fa fa-check"></i><b>2.7</b> Finding files</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introduction.html"><a href="introduction.html#quitting-r"><i class="fa fa-check"></i><b>2.7.1</b> Quitting R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro_rstudio.html"><a href="intro_rstudio.html"><i class="fa fa-check"></i><b>3</b> Working in RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#getting-started"><i class="fa fa-check"></i><b>3.1</b> Getting started</a></li>
<li class="chapter" data-level="3.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#a-quick-tour-of-the-gui"><i class="fa fa-check"></i><b>3.2</b> A quick tour of the GUI</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#console-and-friends"><i class="fa fa-check"></i><b>3.2.1</b> Console and friends</a></li>
<li class="chapter" data-level="3.2.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#rstudio-console-specials"><i class="fa fa-check"></i><b>3.2.2</b> RStudio Console specials</a></li>
<li class="chapter" data-level="3.2.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#navigating-the-pane-layout"><i class="fa fa-check"></i><b>3.2.3</b> Navigating the pane layout</a></li>
<li class="chapter" data-level="3.2.4" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-default-upper-pane"><i class="fa fa-check"></i><b>3.2.4</b> The default upper pane</a></li>
<li class="chapter" data-level="3.2.5" data-path="intro_rstudio.html"><a href="intro_rstudio.html#def-lower-pane"><i class="fa fa-check"></i><b>3.2.5</b> The default lower pane</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#source-pane-scripting"><i class="fa fa-check"></i><b>3.3</b> Source pane &amp; scripting</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#console2source"><i class="fa fa-check"></i><b>3.3.1</b> From console to source</a></li>
<li class="chapter" data-level="3.3.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-source-pane-file-editor"><i class="fa fa-check"></i><b>3.3.2</b> The Source pane file editor</a></li>
<li class="chapter" data-level="3.3.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#displays"><i class="fa fa-check"></i><b>3.3.3</b> Displays</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>4</b> A simple example</a>
<ul>
<li class="chapter" data-level="4.1" data-path="intro-example.html"><a href="intro-example.html#intro-ex-import"><i class="fa fa-check"></i><b>4.1</b> Data import</a></li>
<li class="chapter" data-level="4.2" data-path="intro-example.html"><a href="intro-example.html#analysis"><i class="fa fa-check"></i><b>4.2</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="intro-example.html"><a href="intro-example.html#desc-ex"><i class="fa fa-check"></i><b>4.2.1</b> Descriptives</a></li>
<li class="chapter" data-level="4.2.2" data-path="intro-example.html"><a href="intro-example.html#blood-pressure-by-salt-intake"><i class="fa fa-check"></i><b>4.2.2</b> Blood pressure by salt intake</a></li>
<li class="chapter" data-level="4.2.3" data-path="intro-example.html"><a href="intro-example.html#salt-intake-by-sex"><i class="fa fa-check"></i><b>4.2.3</b> Salt intake by sex</a></li>
<li class="chapter" data-level="4.2.4" data-path="intro-example.html"><a href="intro-example.html#save-results"><i class="fa fa-check"></i><b>4.2.4</b> Save results</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="intro-example.html"><a href="intro-example.html#turning-into-script"><i class="fa fa-check"></i><b>4.3</b> Turning it into a script</a></li>
<li class="chapter" data-level="4.4" data-path="intro-example.html"><a href="intro-example.html#exp-res"><i class="fa fa-check"></i><b>4.4</b> Exporting results</a></li>
</ul></li>
<li class="part"><span><b>II Working with data</b></span></li>
<li class="chapter" data-level="5" data-path="data-types-struct.html"><a href="data-types-struct.html"><i class="fa fa-check"></i><b>5</b> Data types and structures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-types-struct.html"><a href="data-types-struct.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-types-struct.html"><a href="data-types-struct.html#data-examples"><i class="fa fa-check"></i><b>5.1.1</b> Data examples</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-types-struct.html"><a href="data-types-struct.html#background-1"><i class="fa fa-check"></i><b>5.2</b> Background</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-types-struct.html"><a href="data-types-struct.html#recap"><i class="fa fa-check"></i><b>5.2.1</b> Recap</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-types-struct.html"><a href="data-types-struct.html#motivation"><i class="fa fa-check"></i><b>5.2.2</b> Motivation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-types-struct.html"><a href="data-types-struct.html#more-about-vectors"><i class="fa fa-check"></i><b>5.3</b> More about vectors</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-types-struct.html"><a href="data-types-struct.html#vector-calculations"><i class="fa fa-check"></i><b>5.3.1</b> Vector calculations</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-types-struct.html"><a href="data-types-struct.html#indexing-vectors-by-position"><i class="fa fa-check"></i><b>5.3.2</b> Indexing vectors by position</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-data"><i class="fa fa-check"></i><b>5.4</b> Logical data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-types-struct.html"><a href="data-types-struct.html#definition"><i class="fa fa-check"></i><b>5.4.1</b> Definition</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-expressions"><i class="fa fa-check"></i><b>5.4.2</b> Logical expressions</a></li>
<li class="chapter" data-level="5.4.3" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-vectors"><i class="fa fa-check"></i><b>5.4.3</b> Logical vectors</a></li>
<li class="chapter" data-level="5.4.4" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-vectors-for-indexing"><i class="fa fa-check"></i><b>5.4.4</b> Logical vectors for indexing</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-types-struct.html"><a href="data-types-struct.html#more-on-rectangular-data"><i class="fa fa-check"></i><b>5.5</b> More on rectangular data</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data-types-struct.html"><a href="data-types-struct.html#data-frame"><i class="fa fa-check"></i><b>5.5.1</b> Data frame</a></li>
<li class="chapter" data-level="5.5.2" data-path="data-types-struct.html"><a href="data-types-struct.html#matrix"><i class="fa fa-check"></i><b>5.5.2</b> Matrix</a></li>
<li class="chapter" data-level="5.5.3" data-path="data-types-struct.html"><a href="data-types-struct.html#extensions-alternatives"><i class="fa fa-check"></i><b>5.5.3</b> Extensions &amp; alternatives</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-types-struct.html"><a href="data-types-struct.html#helpers-subset-and-transform"><i class="fa fa-check"></i><b>5.6</b> Helpers: <code>subset</code> and <code>transform</code></a></li>
<li class="chapter" data-level="5.7" data-path="data-types-struct.html"><a href="data-types-struct.html#list-struct"><i class="fa fa-check"></i><b>5.7</b> Free-style data: lists</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="data-types-struct.html"><a href="data-types-struct.html#background-2"><i class="fa fa-check"></i><b>5.7.1</b> Background</a></li>
<li class="chapter" data-level="5.7.2" data-path="data-types-struct.html"><a href="data-types-struct.html#basic_lists"><i class="fa fa-check"></i><b>5.7.2</b> Basic list</a></li>
<li class="chapter" data-level="5.7.3" data-path="data-types-struct.html"><a href="data-types-struct.html#named_lists"><i class="fa fa-check"></i><b>5.7.3</b> Named lists</a></li>
<li class="chapter" data-level="5.7.4" data-path="data-types-struct.html"><a href="data-types-struct.html#example-data-frames"><i class="fa fa-check"></i><b>5.7.4</b> Example: data frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-processing.html"><a href="data-processing.html"><i class="fa fa-check"></i><b>6</b> Processing data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-processing.html"><a href="data-processing.html#overview-1"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="data-processing.html"><a href="data-processing.html#group-stats"><i class="fa fa-check"></i><b>6.2</b> Groupwise statistics</a></li>
<li class="chapter" data-level="6.3" data-path="data-processing.html"><a href="data-processing.html#own-functions"><i class="fa fa-check"></i><b>6.3</b> Using your own functions</a></li>
<li class="chapter" data-level="6.4" data-path="data-processing.html"><a href="data-processing.html#split-apply-combine"><i class="fa fa-check"></i><b>6.4</b> Split - Apply - Combine</a></li>
<li class="chapter" data-level="6.5" data-path="data-processing.html"><a href="data-processing.html#merge-data-base"><i class="fa fa-check"></i><b>6.5</b> Merging data sets</a></li>
<li class="chapter" data-level="6.6" data-path="data-processing.html"><a href="data-processing.html#general-pipeline"><i class="fa fa-check"></i><b>6.6</b> Using pipelines</a></li>
<li class="chapter" data-level="6.7" data-path="data-processing.html"><a href="data-processing.html#next-steps"><i class="fa fa-check"></i><b>6.7</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-tidyverse.html"><a href="data-tidyverse.html"><i class="fa fa-check"></i><b>7</b> The <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-tidyverse.html"><a href="data-tidyverse.html#overview-2"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="data-tidyverse.html"><a href="data-tidyverse.html#example-using-dplyr-for-data-processing"><i class="fa fa-check"></i><b>7.2</b> Example: Using <code>dplyr</code> for data processing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-tidyverse.html"><a href="data-tidyverse.html#overview-3"><i class="fa fa-check"></i><b>7.2.1</b> Overview</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-tidyverse.html"><a href="data-tidyverse.html#basic-data-operations"><i class="fa fa-check"></i><b>7.2.2</b> Basic data operations</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-tidyverse.html"><a href="data-tidyverse.html#groupwise-data-operations"><i class="fa fa-check"></i><b>7.2.3</b> Groupwise data operations</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-tidyverse.html"><a href="data-tidyverse.html#tidyverse-vs-base-r"><i class="fa fa-check"></i><b>7.3</b> <code>tidyverse</code> vs base R?</a></li>
</ul></li>
<li class="part"><span><b>III Estimation, inference, modelling</b></span></li>
<li class="chapter" data-level="8" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html"><i class="fa fa-check"></i><b>8</b> Basic Statistics &amp; Epidemiology</a>
<ul>
<li class="chapter" data-level="8.1" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#descriptives"><i class="fa fa-check"></i><b>8.1</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#base-desc"><i class="fa fa-check"></i><b>8.1.1</b> In base R</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#using-package-summarytools"><i class="fa fa-check"></i><b>8.1.2</b> Using package <code>summarytools</code></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#confidence-intervals"><i class="fa fa-check"></i><b>8.2</b> Confidence intervals</a></li>
<li class="chapter" data-level="8.3" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#statistical-tests"><i class="fa fa-check"></i><b>8.3</b> Statistical tests</a></li>
<li class="chapter" data-level="8.4" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#epidemiological-risk-measures"><i class="fa fa-check"></i><b>8.4</b> Epidemiological risk measures</a></li>
<li class="chapter" data-level="8.5" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#pander-intro"><i class="fa fa-check"></i><b>8.5</b> Improved display of descriptives</a></li>
<li class="chapter" data-level="8.6" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#next-steps-1"><i class="fa fa-check"></i><b>8.6</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-linear.html"><a href="regression-linear.html"><i class="fa fa-check"></i><b>9</b> Linear regression</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression-linear.html"><a href="regression-linear.html#overview-4"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="regression-linear.html"><a href="regression-linear.html#background-3"><i class="fa fa-check"></i><b>9.2</b> Background</a></li>
<li class="chapter" data-level="9.3" data-path="regression-linear.html"><a href="regression-linear.html#simple-linear-regression"><i class="fa fa-check"></i><b>9.3</b> Simple linear regression</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="regression-linear.html"><a href="regression-linear.html#scatter-loess"><i class="fa fa-check"></i><b>9.3.1</b> Looking at the data</a></li>
<li class="chapter" data-level="9.3.2" data-path="regression-linear.html"><a href="regression-linear.html#fitting-a-linear-regression-model"><i class="fa fa-check"></i><b>9.3.2</b> Fitting a linear regression model</a></li>
<li class="chapter" data-level="9.3.3" data-path="regression-linear.html"><a href="regression-linear.html#regression-table-and-inference"><i class="fa fa-check"></i><b>9.3.3</b> Regression table and inference</a></li>
<li class="chapter" data-level="9.3.4" data-path="regression-linear.html"><a href="regression-linear.html#prediction"><i class="fa fa-check"></i><b>9.3.4</b> Prediction</a></li>
<li class="chapter" data-level="9.3.5" data-path="regression-linear.html"><a href="regression-linear.html#diagnostics"><i class="fa fa-check"></i><b>9.3.5</b> Diagnostics</a></li>
<li class="chapter" data-level="9.3.6" data-path="regression-linear.html"><a href="regression-linear.html#binary-predictor-and-dummy-coding"><i class="fa fa-check"></i><b>9.3.6</b> Binary predictor and dummy coding</a></li>
<li class="chapter" data-level="9.3.7" data-path="regression-linear.html"><a href="regression-linear.html#nicer-regression-tables"><i class="fa fa-check"></i><b>9.3.7</b> Nicer regression tables</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression-linear.html"><a href="regression-linear.html#multiple-linear-regression"><i class="fa fa-check"></i><b>9.4</b> Multiple linear regression</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="regression-linear.html"><a href="regression-linear.html#multiple-predictors"><i class="fa fa-check"></i><b>9.4.1</b> Multiple predictors</a></li>
<li class="chapter" data-level="9.4.2" data-path="regression-linear.html"><a href="regression-linear.html#categorical-predictors-with-2-levels"><i class="fa fa-check"></i><b>9.4.2</b> Categorical predictors with <span class="math inline">\(&gt;\)</span> 2 levels</a></li>
<li class="chapter" data-level="9.4.3" data-path="regression-linear.html"><a href="regression-linear.html#interactions"><i class="fa fa-check"></i><b>9.4.3</b> Interactions</a></li>
<li class="chapter" data-level="9.4.4" data-path="regression-linear.html"><a href="regression-linear.html#splines"><i class="fa fa-check"></i><b>9.4.4</b> Splines</a></li>
<li class="chapter" data-level="9.4.5" data-path="regression-linear.html"><a href="regression-linear.html#model-comparisons"><i class="fa fa-check"></i><b>9.4.5</b> Model comparisons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression-other.html"><a href="regression-other.html"><i class="fa fa-check"></i><b>10</b> More regression models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regression-other.html"><a href="regression-other.html#logistic-regression"><i class="fa fa-check"></i><b>10.1</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="regression-other.html"><a href="regression-other.html#ex.-birthweight-uterine-irritability"><i class="fa fa-check"></i><b>10.1.1</b> Ex.: Birthweight &amp; uterine irritability</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="regression-other.html"><a href="regression-other.html#survival-regression"><i class="fa fa-check"></i><b>10.2</b> Survival regression</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="regression-other.html"><a href="regression-other.html#survival-data"><i class="fa fa-check"></i><b>10.2.1</b> Survival data</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression-other.html"><a href="regression-other.html#survival-curves"><i class="fa fa-check"></i><b>10.2.2</b> Survival curves</a></li>
<li class="chapter" data-level="10.2.3" data-path="regression-other.html"><a href="regression-other.html#cox-regression"><i class="fa fa-check"></i><b>10.2.3</b> Cox regression</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression-other.html"><a href="regression-other.html#other-models"><i class="fa fa-check"></i><b>10.3</b> Other models</a></li>
</ul></li>
<li class="part"><span><b>IV Graphics</b></span></li>
<li class="chapter" data-level="11" data-path="graphics-base.html"><a href="graphics-base.html"><i class="fa fa-check"></i><b>11</b> Graphics in base R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="graphics-base.html"><a href="graphics-base.html#overview-5"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="graphics-base.html"><a href="graphics-base.html#base-plots-base-plots"><i class="fa fa-check"></i><b>11.2</b> Base plots</a></li>
<li class="chapter" data-level="11.3" data-path="graphics-base.html"><a href="graphics-base.html#graphical-parameters"><i class="fa fa-check"></i><b>11.3</b> Graphical parameters</a>
<ul>
<li class="chapter" data-level="" data-path="graphics-base.html"><a href="graphics-base.html#vectorized-graphical-parameters"><i class="fa fa-check"></i>Vectorized graphical parameters</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="graphics-base.html"><a href="graphics-base.html#displaying-and-saving-plots"><i class="fa fa-check"></i><b>11.4</b> Displaying and saving plots</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="graphics-base.html"><a href="graphics-base.html#device-par"><i class="fa fa-check"></i><b>11.4.1</b> Controlling a device through <code>par</code></a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="graphics-base.html"><a href="graphics-base.html#high-low-plots"><i class="fa fa-check"></i><b>11.5</b> High- vs. low-level plotting</a></li>
<li class="chapter" data-level="11.6" data-path="graphics-base.html"><a href="graphics-base.html#using-colors"><i class="fa fa-check"></i><b>11.6</b> Using colors</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="graphics-base.html"><a href="graphics-base.html#specifying-colors-by-name"><i class="fa fa-check"></i><b>11.6.1</b> Specifying colors by name</a></li>
<li class="chapter" data-level="11.6.2" data-path="graphics-base.html"><a href="graphics-base.html#specifying-colors-mathematically"><i class="fa fa-check"></i><b>11.6.2</b> Specifying colors mathematically</a></li>
<li class="chapter" data-level="11.6.3" data-path="graphics-base.html"><a href="graphics-base.html#using-sets-of-colors-palettes"><i class="fa fa-check"></i><b>11.6.3</b> Using sets of colors: palettes</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="graphics-base.html"><a href="graphics-base.html#next-steps-2"><i class="fa fa-check"></i><b>11.7</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html"><i class="fa fa-check"></i><b>12</b> Graphics using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#overview-6"><i class="fa fa-check"></i><b>12.1</b> Overview</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#data-example-hemoglobin"><i class="fa fa-check"></i><b>12.1.1</b> Data example: Hemoglobin</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#background-4"><i class="fa fa-check"></i><b>12.2</b> Background</a></li>
<li class="chapter" data-level="12.3" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#concepts"><i class="fa fa-check"></i><b>12.3</b> Concepts</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>12.3.1</b> Aesthetics</a></li>
<li class="chapter" data-level="12.3.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#example-data"><i class="fa fa-check"></i><b>12.3.2</b> Example data</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#background-5"><i class="fa fa-check"></i><b>12.4</b> Background</a></li>
<li class="chapter" data-level="12.5" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#basic-usage"><i class="fa fa-check"></i><b>12.5</b> Basic usage</a></li>
<li class="chapter" data-level="12.6" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#slightly-extended-usage"><i class="fa fa-check"></i><b>12.6</b> Slightly extended usage</a></li>
<li class="chapter" data-level="12.7" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#multiple-layers"><i class="fa fa-check"></i><b>12.7</b> Multiple layers</a></li>
<li class="chapter" data-level="12.8" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#splitting-the-plot"><i class="fa fa-check"></i><b>12.8</b> Splitting the plot</a></li>
<li class="chapter" data-level="12.9" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#messing-with-the-defaults"><i class="fa fa-check"></i><b>12.9</b> Messing with the defaults</a>
<ul>
<li class="chapter" data-level="12.9.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#fixing-aesthetics"><i class="fa fa-check"></i><b>12.9.1</b> {-} Fixing aesthetics</a></li>
<li class="chapter" data-level="" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#scales"><i class="fa fa-check"></i>Scales</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#messing-with-defaults-ii-themes"><i class="fa fa-check"></i><b>12.10</b> Messing with defaults II: themes</a></li>
<li class="chapter" data-level="12.11" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#extension-packages"><i class="fa fa-check"></i><b>12.11</b> Extension packages</a></li>
<li class="chapter" data-level="12.12" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#technical-notes"><i class="fa fa-check"></i><b>12.12</b> Technical notes</a></li>
</ul></li>
<li class="part"><span><b>V Organizing the analysis</b></span></li>
<li class="chapter" data-level="13" data-path="tables-nice.html"><a href="tables-nice.html"><i class="fa fa-check"></i><b>13</b> Generating nice tables</a></li>
<li class="chapter" data-level="14" data-path="dynamic-documents.html"><a href="dynamic-documents.html"><i class="fa fa-check"></i><b>14</b> Dynamic documents</a></li>
<li class="chapter" data-level="15" data-path="scripting-workflow.html"><a href="scripting-workflow.html"><i class="fa fa-check"></i><b>15</b> Scripting and workflow</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-tidyverse" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> The <code>tidyverse</code><a href="data-tidyverse.html#data-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="overview-2" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Overview<a href="data-tidyverse.html#overview-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <em>tidyverse</em> is a collection of R packages which aim to augment and replace much base R functionality, providing a more consistent user interface and focusing on data science rather than classical statistics or data analysis. The name is based on the concept of <em>tidy data</em><a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>, which essentially requires that the data is arranged in a rectangular table where every column represents a variable, and every row an observational unit (subject). Table <a href="data-tidyverse.html#tab:tidyverse">7.1</a> lists some important <code>tidyverse</code> packages.</p>
<table>
<caption><span id="tab:tidyverse">Table 7.1: </span> Core <code>tidyverse</code> packages and corresponding functionality in base R (and add-on packages)</caption>
<colgroup>
<col width="23%" />
<col width="30%" />
<col width="45%" />
</colgroup>
<thead>
<tr class="header">
<th>Tidyverse</th>
<th>Related R concept(s)</th>
<th>Base R functions / packages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ggplot2</td>
<td>Graphics</td>
<td><code>plot</code>, <code>boxplot</code>, <code>par</code></td>
</tr>
<tr class="even">
<td>dplyr</td>
<td>Data handling</td>
<td><code>[]</code>, <code>subset</code>, <code>transform</code>, <code>aggregate</code></td>
</tr>
<tr class="odd">
<td>tidyr</td>
<td>Data cleaning</td>
<td><code>reshape</code></td>
</tr>
<tr class="even">
<td>readr</td>
<td>Text data import</td>
<td><code>read.table</code></td>
</tr>
<tr class="odd">
<td>purrr</td>
<td>FIXME</td>
<td>FIXME</td>
</tr>
<tr class="even">
<td>tibble</td>
<td>Data frame</td>
<td><code>data.frame</code> and related</td>
</tr>
<tr class="odd">
<td>stringr</td>
<td>String processing</td>
<td><code>nchar</code>, <code>substr</code>, <code>paste</code> etc.</td>
</tr>
<tr class="even">
<td>forcats</td>
<td>Grouping variables</td>
<td><code>factor</code></td>
</tr>
<tr class="odd">
<td>haven</td>
<td>Data import</td>
<td>e.g. package foreign</td>
</tr>
<tr class="even">
<td>readxl</td>
<td>Excel data import</td>
<td>e.g. package openxlsx</td>
</tr>
<tr class="odd">
<td>lubridate</td>
<td>Dates &amp; times</td>
<td><code>as.Date</code>, <code>strptime</code></td>
</tr>
<tr class="even">
<td>magrittr</td>
<td>Pipelines</td>
<td><code>|&gt;</code></td>
</tr>
</tbody>
</table>
<p>Now in terms of data, <em>tidyness</em> is only a re-formulation of the concept of “rectangular statistical data” (though the examples of how this concept can be violated or achieved in the original publication are still interesting). However, there are a number of other common design features that are shared by many <code>tidyverse</code> packages:</p>
<ul>
<li>Functions tend to also generate tidy rectangular <em>output</em>, e.g. for statistical tests or regression models, which in base R are typically named lists (Section FIXME): this can be easier to read, and allows elegant processing of analysis results.<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a></li>
<li>A focus on arranging workflows as pipelines, where output from a function call is “pumped” directly into another function, rather than creating temporary objects for intermediate results, or using nested function calls: consequently, many <code>tidy</code> functions have a data frame or similar object as first argument, rather than as second argument (as in base R functions like <code>t.ttest</code> or <code>lm</code>).</li>
<li>Functions often accept variable names in data-frame like objects in a stripped down form, without making use of the <code>$</code>-notation or turning variables into quoted strings, similar to the interface for <code>subset</code> or <code>transform</code> in base R.<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></li>
</ul>
<p>Below, we will use <code>dplyr</code>, a popular package for data processing, to demonstrate these design features, and how typical interactions with a <code>tidyverse</code> package can look like.</p>
</div>
<div id="example-using-dplyr-for-data-processing" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Example: Using <code>dplyr</code> for data processing<a href="data-tidyverse.html#example-using-dplyr-for-data-processing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="overview-3" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Overview<a href="data-tidyverse.html#overview-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>dplyr</code><a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a> can be used for general processing of data frames and data frame-like objects, and
implements the same basic functionality for sorting, filtering, extracting and transforming data described for base R in Section <a href="data-types-struct.html#data-types-struct">5</a>; <code>dplyr</code> also supports merging and per-group processing of data as described for base R in Section <a href="data-processing.html#data-processing">6</a>. We will use the same example (data on blood pressure and salt intake) and replicate the operations in these sections.</p>
<table>
<caption><span id="tab:dplyr">Table 7.2: </span> Correspondence between <code>dplyr</code> and base R functionality</caption>
<colgroup>
<col width="32%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th><code>dplyr</code> functions</th>
<th>Purpose</th>
<th>Base R functions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>slice</code></td>
<td>Extract rows (by position)</td>
<td><code>subset</code>, <code>[</code> (positional)</td>
</tr>
<tr class="even">
<td><code>filter</code></td>
<td>Extract rows (conditionally)</td>
<td><code>subset</code>, <code>[</code> (conditional)</td>
</tr>
<tr class="odd">
<td><code>select</code></td>
<td>Extract columns</td>
<td><code>subset</code>, <code>[</code></td>
</tr>
<tr class="even">
<td><code>arrange</code></td>
<td>Sort rows</td>
<td><code>[</code> with <code>order</code></td>
</tr>
<tr class="odd">
<td><code>mutate</code></td>
<td>Transform/create columns</td>
<td><code>transform</code>, <code>[</code></td>
</tr>
<tr class="even">
<td><code>group_by</code> + <code>summarise</code></td>
<td>Groupwise processing</td>
<td><code>split</code> + <code>lapply</code></td>
</tr>
<tr class="odd">
<td><code>left_join</code> etc.</td>
<td>Combine datasets</td>
<td><code>merge</code></td>
</tr>
</tbody>
</table>
<p>As seen in Table <a href="data-tidyverse.html#tab:dplyr">7.2</a>, <code>dplyr</code> functionality is systematically implemented using functions, in contrast to base R, where we also use the <code>[</code>- and <code>$</code>-operators. These functions have a similar interface as base functions <code>subset</code> and <code>transform</code>, where the data object is the first argument, and where variable names can be used directly, without having to quote them or use the <code>$</code>-notation.<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a></p>
</div>
<div id="basic-data-operations" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Basic data operations<a href="data-tidyverse.html#basic-data-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Extracting rows of data</strong> (i.e. units of observation/subjects) by their position has its own command, namely <code>slice</code>. This code extracts rows 1, 3, 4 and 89:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data-tidyverse.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(dplyr)</span>
<span id="cb155-2"><a href="data-tidyverse.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">slice</span>(salt_ht, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">89</span>))</span>
<span id="cb155-3"><a href="data-tidyverse.html#cb155-3" aria-hidden="true" tabindex="-1"></a>    ID    sex sbp dbp saltadd age</span>
<span id="cb155-4"><a href="data-tidyverse.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4305</span>   male <span class="dv">110</span>  <span class="dv">80</span>     yes  <span class="dv">58</span></span>
<span id="cb155-5"><a href="data-tidyverse.html#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">5758</span> female <span class="dv">196</span> <span class="dv">128</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">53</span></span>
<span id="cb155-6"><a href="data-tidyverse.html#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2265</span>   male <span class="dv">167</span> <span class="dv">112</span>     yes  <span class="dv">68</span></span>
<span id="cb155-7"><a href="data-tidyverse.html#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">8627</span> female  <span class="dv">80</span>  <span class="dv">62</span>     yes  <span class="dv">31</span></span></code></pre></div>
<p>Extracting rows of data based on a logical condition, however, is done via command <code>filter</code>. This extracts all subjects older than 60 years:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-tidyverse.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">filter</span>(salt_ht, age <span class="sc">&gt;</span> <span class="dv">60</span>)</span>
<span id="cb156-2"><a href="data-tidyverse.html#cb156-2" aria-hidden="true" tabindex="-1"></a>     ID    sex sbp dbp saltadd age</span>
<span id="cb156-3"><a href="data-tidyverse.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">2265</span>   male <span class="dv">167</span> <span class="dv">112</span>     yes  <span class="dv">68</span></span>
<span id="cb156-4"><a href="data-tidyverse.html#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">9605</span>   male <span class="dv">198</span> <span class="dv">119</span>     yes  <span class="dv">63</span></span>
<span id="cb156-5"><a href="data-tidyverse.html#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">4767</span> female <span class="dv">149</span>  <span class="dv">72</span>     yes  <span class="dv">63</span></span>
<span id="cb156-6"><a href="data-tidyverse.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">1024</span> female <span class="dv">178</span> <span class="dv">128</span>     yes  <span class="dv">63</span></span>
<span id="cb156-7"><a href="data-tidyverse.html#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">9962</span>   male <span class="dv">140</span>  <span class="dv">90</span>      no  <span class="dv">67</span></span>
<span id="cb156-8"><a href="data-tidyverse.html#cb156-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">5034</span> female <span class="dv">128</span>  <span class="dv">84</span>      no  <span class="dv">64</span></span>
<span id="cb156-9"><a href="data-tidyverse.html#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">1842</span> female <span class="dv">184</span> <span class="dv">148</span>     yes  <span class="dv">61</span></span>
<span id="cb156-10"><a href="data-tidyverse.html#cb156-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">7146</span>   male <span class="dv">160</span>  <span class="dv">98</span>      no  <span class="dv">64</span></span>
<span id="cb156-11"><a href="data-tidyverse.html#cb156-11" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">1457</span>   male <span class="dv">170</span>  <span class="dv">98</span>      no  <span class="dv">66</span></span>
<span id="cb156-12"><a href="data-tidyverse.html#cb156-12" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">7276</span> female <span class="dv">201</span> <span class="dv">124</span>      no  <span class="dv">71</span></span>
<span id="cb156-13"><a href="data-tidyverse.html#cb156-13" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">5534</span>   male <span class="dv">200</span> <span class="dv">110</span>      no  <span class="dv">66</span></span>
<span id="cb156-14"><a href="data-tidyverse.html#cb156-14" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> <span class="dv">9899</span> female <span class="dv">223</span> <span class="dv">102</span>     yes  <span class="dv">63</span></span></code></pre></div>
<p>You can use multiple logical expressions separated by a comma, in which case the expression are connected via logical AND; so to extract all subjects who are both female and over 60, you can write</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data-tidyverse.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">filter</span>(salt_ht, sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>, age <span class="sc">&gt;</span> <span class="dv">60</span>)</span>
<span id="cb157-2"><a href="data-tidyverse.html#cb157-2" aria-hidden="true" tabindex="-1"></a>    ID    sex sbp dbp saltadd age</span>
<span id="cb157-3"><a href="data-tidyverse.html#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4767</span> female <span class="dv">149</span>  <span class="dv">72</span>     yes  <span class="dv">63</span></span>
<span id="cb157-4"><a href="data-tidyverse.html#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">1024</span> female <span class="dv">178</span> <span class="dv">128</span>     yes  <span class="dv">63</span></span>
<span id="cb157-5"><a href="data-tidyverse.html#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">5034</span> female <span class="dv">128</span>  <span class="dv">84</span>      no  <span class="dv">64</span></span>
<span id="cb157-6"><a href="data-tidyverse.html#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">1842</span> female <span class="dv">184</span> <span class="dv">148</span>     yes  <span class="dv">61</span></span>
<span id="cb157-7"><a href="data-tidyverse.html#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">7276</span> female <span class="dv">201</span> <span class="dv">124</span>      no  <span class="dv">71</span></span>
<span id="cb157-8"><a href="data-tidyverse.html#cb157-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="dv">9899</span> female <span class="dv">223</span> <span class="dv">102</span>     yes  <span class="dv">63</span></span></code></pre></div>
<p><strong>Extracting columns</strong> (instead of rows) from a data frame has yet another command, namely <code>select</code>.<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a> However, in contrast to <code>slice</code>/ <code>filter</code>, which are very specific about how you can extract rows, <code>select</code> is flexible in how you can select columns:<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a> both position (integers) and names work, e.g.:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="data-tidyverse.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">select</span>(salt_ht, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb158-2"><a href="data-tidyverse.html#cb158-2" aria-hidden="true" tabindex="-1"></a>      ID    sex sbp</span>
<span id="cb158-3"><a href="data-tidyverse.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">4305</span>   male <span class="dv">110</span></span>
<span id="cb158-4"><a href="data-tidyverse.html#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>   <span class="dv">6606</span> female  <span class="dv">85</span></span>
<span id="cb158-5"><a href="data-tidyverse.html#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   <span class="dv">5758</span> female <span class="dv">196</span></span>
<span id="cb158-6"><a href="data-tidyverse.html#cb158-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>   <span class="dv">2265</span>   male <span class="dv">167</span></span>
<span id="cb158-7"><a href="data-tidyverse.html#cb158-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>   <span class="dv">7408</span> female <span class="dv">145</span></span>
<span id="cb158-8"><a href="data-tidyverse.html#cb158-8" aria-hidden="true" tabindex="-1"></a>[Skipped <span class="dv">96</span> rows of output]</span></code></pre></div>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data-tidyverse.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">select</span>(salt_ht, sbp, dbp)</span>
<span id="cb159-2"><a href="data-tidyverse.html#cb159-2" aria-hidden="true" tabindex="-1"></a>    sbp dbp</span>
<span id="cb159-3"><a href="data-tidyverse.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">110</span>  <span class="dv">80</span></span>
<span id="cb159-4"><a href="data-tidyverse.html#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">85</span>  <span class="dv">55</span></span>
<span id="cb159-5"><a href="data-tidyverse.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   <span class="dv">196</span> <span class="dv">128</span></span>
<span id="cb159-6"><a href="data-tidyverse.html#cb159-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>   <span class="dv">167</span> <span class="dv">112</span></span>
<span id="cb159-7"><a href="data-tidyverse.html#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>   <span class="dv">145</span> <span class="dv">110</span></span>
<span id="cb159-8"><a href="data-tidyverse.html#cb159-8" aria-hidden="true" tabindex="-1"></a>[Skipped <span class="dv">96</span> rows of output]</span></code></pre></div>
<p><code>select</code> also supports special functions that allow pattern matching on variable names, like <code>starts_with</code> or <code>ends_with</code>, as well as selection by variable type, e.g. as</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="data-tidyverse.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">select</span>(salt_ht, <span class="fu">where</span>(is.numeric))</span>
<span id="cb160-2"><a href="data-tidyverse.html#cb160-2" aria-hidden="true" tabindex="-1"></a>      ID sbp dbp age</span>
<span id="cb160-3"><a href="data-tidyverse.html#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">4305</span> <span class="dv">110</span>  <span class="dv">80</span>  <span class="dv">58</span></span>
<span id="cb160-4"><a href="data-tidyverse.html#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>   <span class="dv">6606</span>  <span class="dv">85</span>  <span class="dv">55</span>  <span class="dv">32</span></span>
<span id="cb160-5"><a href="data-tidyverse.html#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   <span class="dv">5758</span> <span class="dv">196</span> <span class="dv">128</span>  <span class="dv">53</span></span>
<span id="cb160-6"><a href="data-tidyverse.html#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>   <span class="dv">2265</span> <span class="dv">167</span> <span class="dv">112</span>  <span class="dv">68</span></span>
<span id="cb160-7"><a href="data-tidyverse.html#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>   <span class="dv">7408</span> <span class="dv">145</span> <span class="dv">110</span>  <span class="dv">55</span></span>
<span id="cb160-8"><a href="data-tidyverse.html#cb160-8" aria-hidden="true" tabindex="-1"></a>[Skipped <span class="dv">96</span> rows of output]</span></code></pre></div>
<p><strong>Selecting a rectangular subset</strong> of a data frame object does not have a separate function in <code>dplyr</code>, in contrast to base R, where simultaneous selection of rows and columns via the <code>[,]</code>-notation is routine. Instead, this done in two steps, by first selecting rows from the original data frame, and then selecting columns from the selected rows (or the other waty around, of course). In classic R notation, this can be done as a nested function call:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data-tidyverse.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">select</span>(<span class="fu">slice</span>(salt_ht, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>), <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb161-2"><a href="data-tidyverse.html#cb161-2" aria-hidden="true" tabindex="-1"></a>  dbp saltadd</span>
<span id="cb161-3"><a href="data-tidyverse.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">80</span>     yes</span>
<span id="cb161-4"><a href="data-tidyverse.html#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">55</span>      no</span>
<span id="cb161-5"><a href="data-tidyverse.html#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">128</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb161-6"><a href="data-tidyverse.html#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">112</span>     yes</span>
<span id="cb161-7"><a href="data-tidyverse.html#cb161-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">select</span>(<span class="fu">filter</span>(salt_ht, age <span class="sc">&gt;</span> <span class="dv">65</span>), dbp, sbp)</span>
<span id="cb161-8"><a href="data-tidyverse.html#cb161-8" aria-hidden="true" tabindex="-1"></a>  dbp sbp</span>
<span id="cb161-9"><a href="data-tidyverse.html#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">112</span> <span class="dv">167</span></span>
<span id="cb161-10"><a href="data-tidyverse.html#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">90</span> <span class="dv">140</span></span>
<span id="cb161-11"><a href="data-tidyverse.html#cb161-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">98</span> <span class="dv">170</span></span>
<span id="cb161-12"><a href="data-tidyverse.html#cb161-12" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">124</span> <span class="dv">201</span></span>
<span id="cb161-13"><a href="data-tidyverse.html#cb161-13" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">110</span> <span class="dv">200</span></span></code></pre></div>
<p>Here, the first (inner) function call selects the subset of rows, including all columns; this smaller data set is then passed as argument to <code>select</code>, which extracts the specified columns.</p>
<p><strong>Piping</strong> Nested function calls can take time to get used to, will get harder to write and read the more processing steps are nested within each other. This is where the <code>tidyverse</code>’s love for pipeline operators comes in: typically, the rectangualr selections above would be written as</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-tidyverse.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">slice</span>(salt_ht, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb162-2"><a href="data-tidyverse.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">select</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb162-3"><a href="data-tidyverse.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  dbp saltadd</span>
<span id="cb162-4"><a href="data-tidyverse.html#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">80</span>     yes</span>
<span id="cb162-5"><a href="data-tidyverse.html#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">55</span>      no</span>
<span id="cb162-6"><a href="data-tidyverse.html#cb162-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">128</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb162-7"><a href="data-tidyverse.html#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">112</span>     yes</span>
<span id="cb162-8"><a href="data-tidyverse.html#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">110</span>     yes</span>
<span id="cb162-9"><a href="data-tidyverse.html#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">filter</span>(salt_ht, age <span class="sc">&gt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb162-10"><a href="data-tidyverse.html#cb162-10" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">select</span>(dbp, sbp)</span>
<span id="cb162-11"><a href="data-tidyverse.html#cb162-11" aria-hidden="true" tabindex="-1"></a>   dbp sbp</span>
<span id="cb162-12"><a href="data-tidyverse.html#cb162-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">112</span> <span class="dv">167</span></span>
<span id="cb162-13"><a href="data-tidyverse.html#cb162-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">119</span> <span class="dv">198</span></span>
<span id="cb162-14"><a href="data-tidyverse.html#cb162-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   <span class="dv">72</span> <span class="dv">149</span></span>
<span id="cb162-15"><a href="data-tidyverse.html#cb162-15" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">128</span> <span class="dv">178</span></span>
<span id="cb162-16"><a href="data-tidyverse.html#cb162-16" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>   <span class="dv">90</span> <span class="dv">140</span></span>
<span id="cb162-17"><a href="data-tidyverse.html#cb162-17" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">84</span> <span class="dv">128</span></span>
<span id="cb162-18"><a href="data-tidyverse.html#cb162-18" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">148</span> <span class="dv">184</span></span>
<span id="cb162-19"><a href="data-tidyverse.html#cb162-19" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>   <span class="dv">98</span> <span class="dv">160</span></span>
<span id="cb162-20"><a href="data-tidyverse.html#cb162-20" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>   <span class="dv">98</span> <span class="dv">170</span></span>
<span id="cb162-21"><a href="data-tidyverse.html#cb162-21" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">124</span> <span class="dv">201</span></span>
<span id="cb162-22"><a href="data-tidyverse.html#cb162-22" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">110</span> <span class="dv">200</span></span>
<span id="cb162-23"><a href="data-tidyverse.html#cb162-23" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> <span class="dv">102</span> <span class="dv">223</span></span></code></pre></div>
<p>Note that these pipelines are just a different way of specifying the same nested function calls (select rows, then select columns) - but now, we process the data in the same direction as we read &amp; write the code (i.e. from left to right), which many find more intuitive.<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a></p>
<p><strong>Sorting</strong> Let’s use the pipe-notation from this point forward: <code>dplyr</code> also has a special function for sorting data frames called <code>arrange</code>. If we want to sort subjects by increasing age, but only display the top five rows (to save space), we can do this:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data-tidyverse.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">arrange</span>(salt_ht, age) <span class="sc">%&gt;%</span></span>
<span id="cb163-2"><a href="data-tidyverse.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb163-3"><a href="data-tidyverse.html#cb163-3" aria-hidden="true" tabindex="-1"></a>    ID    sex sbp dbp saltadd age</span>
<span id="cb163-4"><a href="data-tidyverse.html#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">5514</span> female <span class="dv">132</span>  <span class="dv">80</span>      no  <span class="dv">26</span></span>
<span id="cb163-5"><a href="data-tidyverse.html#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">5618</span>   male <span class="dv">116</span>  <span class="dv">75</span>      no  <span class="dv">29</span></span>
<span id="cb163-6"><a href="data-tidyverse.html#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">7993</span> female <span class="dv">108</span>  <span class="dv">72</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">30</span></span>
<span id="cb163-7"><a href="data-tidyverse.html#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">4204</span>   male <span class="dv">125</span>  <span class="dv">84</span>      no  <span class="dv">30</span></span>
<span id="cb163-8"><a href="data-tidyverse.html#cb163-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">7663</span> female <span class="dv">105</span>  <span class="dv">78</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">31</span></span></code></pre></div>
<p>And we see five rows of participants, starting with age 26 and increasing from there.</p>
<p>This can easily be extended to sorting rows by multiple criteria:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="data-tidyverse.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">arrange</span>(salt_ht, age, sex, dbp) <span class="sc">%&gt;%</span></span>
<span id="cb164-2"><a href="data-tidyverse.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb164-3"><a href="data-tidyverse.html#cb164-3" aria-hidden="true" tabindex="-1"></a>     ID    sex sbp dbp saltadd age</span>
<span id="cb164-4"><a href="data-tidyverse.html#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">5514</span> female <span class="dv">132</span>  <span class="dv">80</span>      no  <span class="dv">26</span></span>
<span id="cb164-5"><a href="data-tidyverse.html#cb164-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">5618</span>   male <span class="dv">116</span>  <span class="dv">75</span>      no  <span class="dv">29</span></span>
<span id="cb164-6"><a href="data-tidyverse.html#cb164-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">7993</span> female <span class="dv">108</span>  <span class="dv">72</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">30</span></span>
<span id="cb164-7"><a href="data-tidyverse.html#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">4204</span>   male <span class="dv">125</span>  <span class="dv">84</span>      no  <span class="dv">30</span></span>
<span id="cb164-8"><a href="data-tidyverse.html#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">8627</span> female  <span class="dv">80</span>  <span class="dv">62</span>     yes  <span class="dv">31</span></span>
<span id="cb164-9"><a href="data-tidyverse.html#cb164-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">7663</span> female <span class="dv">105</span>  <span class="dv">78</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">31</span></span>
<span id="cb164-10"><a href="data-tidyverse.html#cb164-10" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">5988</span> female <span class="dv">118</span>  <span class="dv">82</span>     yes  <span class="dv">31</span></span>
<span id="cb164-11"><a href="data-tidyverse.html#cb164-11" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">8550</span>   male <span class="dv">120</span>  <span class="dv">68</span>     yes  <span class="dv">31</span></span>
<span id="cb164-12"><a href="data-tidyverse.html#cb164-12" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">5345</span>   male <span class="dv">110</span>  <span class="dv">72</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">31</span></span>
<span id="cb164-13"><a href="data-tidyverse.html#cb164-13" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2215</span>   male <span class="dv">120</span>  <span class="dv">82</span>      no  <span class="dv">31</span></span>
<span id="cb164-14"><a href="data-tidyverse.html#cb164-14" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">6606</span> female  <span class="dv">85</span>  <span class="dv">55</span>      no  <span class="dv">32</span></span>
<span id="cb164-15"><a href="data-tidyverse.html#cb164-15" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> <span class="dv">8202</span> female <span class="dv">110</span>  <span class="dv">70</span>      no  <span class="dv">32</span></span></code></pre></div>
<p>Here, rows are first sorted by age; subjects with the same ages are then sorted by sex<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>, and individuals with the same age/sex by diastolic blood pressure.</p>
<p><strong>Modifying data</strong> The function <code>mutate</code> can both modify existing variables and generate new variables in a data frame. If we want to add the (natural) logarithms of the blood pressure variable to the data, we do this:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data-tidyverse.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">mutate</span>(salt_ht, <span class="at">log_dbp =</span> <span class="fu">log</span>(dbp), <span class="at">log_sbp =</span> <span class="fu">log</span>(sbp)) <span class="sc">%&gt;%</span></span>
<span id="cb165-2"><a href="data-tidyverse.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb165-3"><a href="data-tidyverse.html#cb165-3" aria-hidden="true" tabindex="-1"></a>    ID    sex sbp dbp saltadd age  log_dbp  log_sbp</span>
<span id="cb165-4"><a href="data-tidyverse.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4305</span>   male <span class="dv">110</span>  <span class="dv">80</span>     yes  <span class="dv">58</span> <span class="fl">4.382027</span> <span class="fl">4.700480</span></span>
<span id="cb165-5"><a href="data-tidyverse.html#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">6606</span> female  <span class="dv">85</span>  <span class="dv">55</span>      no  <span class="dv">32</span> <span class="fl">4.007333</span> <span class="fl">4.442651</span></span>
<span id="cb165-6"><a href="data-tidyverse.html#cb165-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">5758</span> female <span class="dv">196</span> <span class="dv">128</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">53</span> <span class="fl">4.852030</span> <span class="fl">5.278115</span></span>
<span id="cb165-7"><a href="data-tidyverse.html#cb165-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2265</span>   male <span class="dv">167</span> <span class="dv">112</span>     yes  <span class="dv">68</span> <span class="fl">4.718499</span> <span class="fl">5.117994</span></span></code></pre></div>
<p><code>mutate</code> works broadly the same as base R <code>transform</code> (you could just exchange <code>mutate</code> for <code>transform</code> in the statement above, and it would still work.)<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a></p>
<p><strong>Merging data</strong> As in Section @ref{merge-data-base}, we can add the sampling location (health centers) to the basic data set, here using the function <code>left_join</code>:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-tidyverse.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> salt_ht_centers2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(salt_ht, centers, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb166-2"><a href="data-tidyverse.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">summary</span>(salt_ht_centers2)</span>
<span id="cb166-3"><a href="data-tidyverse.html#cb166-3" aria-hidden="true" tabindex="-1"></a>       ID           sex          sbp             dbp         saltadd        age        Center</span>
<span id="cb166-4"><a href="data-tidyverse.html#cb166-4" aria-hidden="true" tabindex="-1"></a> Min.   <span class="sc">:</span><span class="dv">1006</span>   female<span class="sc">:</span><span class="dv">55</span>   Min.   <span class="sc">:</span> <span class="fl">80.0</span>   Min.   <span class="sc">:</span> <span class="fl">55.00</span>   no  <span class="sc">:</span><span class="dv">37</span>   Min.   <span class="sc">:</span><span class="fl">26.00</span>   A<span class="sc">:</span><span class="dv">33</span>  </span>
<span id="cb166-5"><a href="data-tidyverse.html#cb166-5" aria-hidden="true" tabindex="-1"></a> 1st Qu.<span class="sc">:</span><span class="dv">2879</span>   male  <span class="sc">:</span><span class="dv">45</span>   1st Qu.<span class="sc">:</span><span class="fl">121.0</span>   1st Qu.<span class="sc">:</span> <span class="fl">80.00</span>   yes <span class="sc">:</span><span class="dv">43</span>   1st Qu.<span class="sc">:</span><span class="fl">39.75</span>   B<span class="sc">:</span><span class="dv">36</span>  </span>
<span id="cb166-6"><a href="data-tidyverse.html#cb166-6" aria-hidden="true" tabindex="-1"></a> Median <span class="sc">:</span><span class="dv">5237</span>               Median <span class="sc">:</span><span class="fl">148.5</span>   Median <span class="sc">:</span> <span class="fl">96.00</span>   NA<span class="st">&#39;s:20   Median :50.00   C:31  </span></span>
<span id="cb166-7"><a href="data-tidyverse.html#cb166-7" aria-hidden="true" tabindex="-1"></a><span class="st"> Mean   :5227               Mean   :154.3   Mean   : 98.51             Mean   :48.71         </span></span>
<span id="cb166-8"><a href="data-tidyverse.html#cb166-8" aria-hidden="true" tabindex="-1"></a><span class="st"> 3rd Qu.:7309               3rd Qu.:184.0   3rd Qu.:116.25             3rd Qu.:58.00         </span></span>
<span id="cb166-9"><a href="data-tidyverse.html#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="st"> Max.   :9962               Max.   :238.0   Max.   :158.00             Max.   :71.00         </span></span></code></pre></div>
<p>Again, <code>left_join</code> is more specialized than the corresponding base R function <code>merge</code>: it will keep all observations (rows) in the first (“left”) data object, and only add information from the second data object where the key variable (<code>ID</code>) matches; other types of data merges (e.g. only keeping rows where the key variable(s) appear in both data objects) have their function in <code>dplyr</code> (see <code>?inner_join</code>). In contrast, <code>merge</code> implements these different merging operations by setting different arguments (like <code>all.x</code>).<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a></p>
<p><strong>Exercises:</strong> Use the appropriate <code>dplyr</code>-commands to extract the follwing subsets of <code>salt_ht</code>:</p>
<ol style="list-style-type: decimal">
<li>the first row only;</li>
<li>all female participants;</li>
<li>all participants with systolic blood pressure over 160, or diastolic blood pressure over 100;</li>
<li>the first three columns of data;</li>
<li>all variables whose name ends in “bp”;</li>
<li>as for 3, but now sorted by decreasing age.</li>
</ol>
</div>
<div id="groupwise-data-operations" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Groupwise data operations<a href="data-tidyverse.html#groupwise-data-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Grouped data</strong> As seen in Section @ref{group-stats}, we can use the base R function <code>aggregate</code> to calculate per-group summaries, by specifying the data, the group memberships, and a suitable summary function. <code>dplyr</code> implements this functionality somewhat differently, by adding the grouping information directly to the data, via function <code>group_by</code>, and carrying this grouped data set forward for processing and analysis:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="data-tidyverse.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">group_by</span>(salt_ht, sex)</span>
<span id="cb167-2"><a href="data-tidyverse.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 100 × 6</span></span>
<span id="cb167-3"><a href="data-tidyverse.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb167-4"><a href="data-tidyverse.html#cb167-4" aria-hidden="true" tabindex="-1"></a>      ID sex      sbp   dbp saltadd   age</span>
<span id="cb167-5"><a href="data-tidyverse.html#cb167-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb167-6"><a href="data-tidyverse.html#cb167-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">4305</span> male     <span class="dv">110</span>    <span class="dv">80</span> yes        <span class="dv">58</span></span>
<span id="cb167-7"><a href="data-tidyverse.html#cb167-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">6606</span> female    <span class="dv">85</span>    <span class="dv">55</span> no         <span class="dv">32</span></span>
<span id="cb167-8"><a href="data-tidyverse.html#cb167-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="dv">5758</span> female   <span class="dv">196</span>   <span class="dv">128</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>       <span class="dv">53</span></span>
<span id="cb167-9"><a href="data-tidyverse.html#cb167-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="dv">2265</span> male     <span class="dv">167</span>   <span class="dv">112</span> yes        <span class="dv">68</span></span>
<span id="cb167-10"><a href="data-tidyverse.html#cb167-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="dv">7408</span> female   <span class="dv">145</span>   <span class="dv">110</span> yes        <span class="dv">55</span></span>
<span id="cb167-11"><a href="data-tidyverse.html#cb167-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">2160</span> female   <span class="dv">179</span>   <span class="dv">120</span> no         <span class="dv">60</span></span>
<span id="cb167-12"><a href="data-tidyverse.html#cb167-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="dv">8846</span> male     <span class="dv">111</span>    <span class="dv">78</span> no         <span class="dv">59</span></span>
<span id="cb167-13"><a href="data-tidyverse.html#cb167-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="dv">8202</span> female   <span class="dv">110</span>    <span class="dv">70</span> no         <span class="dv">32</span></span>
<span id="cb167-14"><a href="data-tidyverse.html#cb167-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="dv">9605</span> male     <span class="dv">198</span>   <span class="dv">119</span> yes        <span class="dv">63</span></span>
<span id="cb167-15"><a href="data-tidyverse.html#cb167-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="dv">4137</span> male     <span class="dv">171</span>   <span class="dv">102</span> yes        <span class="dv">58</span></span>
<span id="cb167-16"><a href="data-tidyverse.html#cb167-16" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 90 more rows</span></span></code></pre></div>
<p>However, because ordinary data frames do not support the inclusion of grouping information, the output from <code>group_by</code> is a generalization of the data frame object called a <code>tibble</code>: looking at the output above, we see that it is stated, right at the top, that this is a tibble with 100 rows and six columns; this is directly followed by the information that this is a <em>grouped tibble</em>, with the grouping variable <code>sex</code>, which has two distinct levels. Only then the actual content of the tibble is listed, which is the same as for the underlying data frame <code>salt_ht</code>.</p>
<p>Note that the display offers both more and less information than the display of data frames: for each column, the type of the variable is listed under the name, as integer or factor (more), but only the top ten rows are shown (less): the second part (fewer rows) is a feature, as this means that the relevant tibble / column information will not run out of the console, as it often does when listing data frames.<a href="#fn34" class="footnote-ref" id="fnref34"><sup>34</sup></a></p>
<p>An important point about the tibble is that it is a <em>generalized</em> data frame, in the sense that underneath, it is still a data frame. This means we can still use all the techniques we have seen for data frames (<code>[</code>s- and <code>$</code>-notation, <code>subset</code> etc.) for tibbles, and if worst comes to worst, use the function <code>as.data.frame</code> to drop all the tibble-parts and revert to a simple (non-generalized) data frame. In other words, this is not a radically new concept around which we have wrap our head, but rather a logical extension what we have been using all along.</p>
<p>For, now let’s store this grouped tibble as a separate object for re-use further down the line:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-tidyverse.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> salt_ht_bysex <span class="ot">&lt;-</span> <span class="fu">group_by</span>(salt_ht, sex)</span></code></pre></div>
<p><strong>Groupwise summaries</strong> We can caclulate pre-group summaries using the <code>dplyr</code>-function <code>summarise</code>:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data-tidyverse.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> salt_ht_bysex <span class="sc">%&gt;%</span></span>
<span id="cb169-2"><a href="data-tidyverse.html#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n</span>(), <span class="at">Mean_syst =</span> <span class="fu">mean</span>(sbp), <span class="at">StdDev_syst =</span> <span class="fu">sd</span>(sbp))</span>
<span id="cb169-3"><a href="data-tidyverse.html#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 4</span></span>
<span id="cb169-4"><a href="data-tidyverse.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  sex    Count Mean_syst StdDev_syst</span>
<span id="cb169-5"><a href="data-tidyverse.html#cb169-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb169-6"><a href="data-tidyverse.html#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> female    <span class="dv">55</span>      <span class="fl">158.</span>        <span class="fl">43.2</span></span>
<span id="cb169-7"><a href="data-tidyverse.html#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> male      <span class="dv">45</span>      <span class="fl">150.</span>        <span class="fl">33.8</span></span></code></pre></div>
<p>Here, we drop the grouped data as first argument into the <code>summarise</code>-function via the pipe operator <code>%&gt;%</code>, and we define three summaries that we want to have calculated for each sex:</p>
<ul>
<li>the number of samples, calculated via the helper function <code>n()</code>, and stored as variable <code>Count</code>,</li>
<li>the mean systolic blood pressure, calculated via base <code>mean</code> and stored as variable <code>Mean_syst</code>,</li>
<li>the standard deviation of the systolic blood pressure, calculated via base <code>sd</code> and stored as variable <code>StdDev_syst</code>.</li>
</ul>
<p>Note that we get choose the names of the new variables (on the left hand side) ourselves, but we refer to existing variables on the right hand side. The output is again a tibble, but no longer grouped, and with only two rows, one for each sex in the original grouped data, and four columns, the three new variables and the name of the group.</p>
<p>We can the same thing for more than one grouping variable, e.g. <code>sex</code> and <code>saltadd</code>:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-tidyverse.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">group_by</span>(salt_ht, sex, saltadd) <span class="sc">%&gt;%</span></span>
<span id="cb170-2"><a href="data-tidyverse.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n</span>(), <span class="at">Mean_syst =</span> <span class="fu">mean</span>(sbp), <span class="at">StdDev_syst =</span> <span class="fu">sd</span>(sbp))</span>
<span id="cb170-3"><a href="data-tidyverse.html#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 5</span></span>
<span id="cb170-4"><a href="data-tidyverse.html#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb170-5"><a href="data-tidyverse.html#cb170-5" aria-hidden="true" tabindex="-1"></a>  sex    saltadd Count Mean_syst StdDev_syst</span>
<span id="cb170-6"><a href="data-tidyverse.html#cb170-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb170-7"><a href="data-tidyverse.html#cb170-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> female no         <span class="dv">13</span>      <span class="fl">134.</span>        <span class="fl">35.1</span></span>
<span id="cb170-8"><a href="data-tidyverse.html#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> female yes        <span class="dv">28</span>      <span class="fl">164.</span>        <span class="fl">41.4</span></span>
<span id="cb170-9"><a href="data-tidyverse.html#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> female <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>       <span class="dv">14</span>      <span class="fl">167.</span>        <span class="fl">48.1</span></span>
<span id="cb170-10"><a href="data-tidyverse.html#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> male   no         <span class="dv">24</span>      <span class="fl">139.</span>        <span class="fl">26.8</span></span>
<span id="cb170-11"><a href="data-tidyverse.html#cb170-11" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> male   yes        <span class="dv">15</span>      <span class="fl">160.</span>        <span class="fl">36.4</span></span>
<span id="cb170-12"><a href="data-tidyverse.html#cb170-12" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> male   <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>        <span class="dv">6</span>      <span class="dv">167</span>         <span class="fl">42.8</span></span></code></pre></div>
<p>The output here is a tibble with six rows, as <code>dplyr</code> will by default include missing values in a grouping variable as an extra level, which is arguably preferable over silently dropping these rows.</p>
<p>(As it happens, here the individuals with missing salt-added information have rather high mean systolic blood pressures, so it would be interesting to look more closely at why the data is actually missing here.)</p>
<p><strong>Groupwise filtering</strong> Extracting rows from a grouped tibble via <code>filter</code> and <code>slice</code> also respects the groupind, i.e. rows will be extracted <em>per group</em>: while the condition <code>age==max(age)</code> will extract all participants with the highest age from the original tibble (one or more), it will extract the oldest participants <em>from each group</em> (so at least two):</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="data-tidyverse.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">filter</span>(salt_ht, age <span class="sc">==</span> <span class="fu">max</span>(age))</span>
<span id="cb171-2"><a href="data-tidyverse.html#cb171-2" aria-hidden="true" tabindex="-1"></a>    ID    sex sbp dbp saltadd age</span>
<span id="cb171-3"><a href="data-tidyverse.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">7276</span> female <span class="dv">201</span> <span class="dv">124</span>      no  <span class="dv">71</span></span>
<span id="cb171-4"><a href="data-tidyverse.html#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">filter</span>(salt_ht_bysex, age <span class="sc">==</span> <span class="fu">max</span>(age))</span>
<span id="cb171-5"><a href="data-tidyverse.html#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 6</span></span>
<span id="cb171-6"><a href="data-tidyverse.html#cb171-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb171-7"><a href="data-tidyverse.html#cb171-7" aria-hidden="true" tabindex="-1"></a>     ID sex      sbp   dbp saltadd   age</span>
<span id="cb171-8"><a href="data-tidyverse.html#cb171-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb171-9"><a href="data-tidyverse.html#cb171-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">2265</span> male     <span class="dv">167</span>   <span class="dv">112</span> yes        <span class="dv">68</span></span>
<span id="cb171-10"><a href="data-tidyverse.html#cb171-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">7276</span> female   <span class="dv">201</span>   <span class="dv">124</span> no         <span class="dv">71</span></span></code></pre></div>
<p><strong>Complex groupwise operations</strong> Grouped tibbles can also be used for more complex operations, like fitting separate regression models to different parts of the data. The most direct way is via the <code>do</code>-function:<a href="#fn35" class="footnote-ref" id="fnref35"><sup>35</sup></a></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-tidyverse.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> split_lm2 <span class="ot">&lt;-</span> salt_ht_bysex <span class="sc">%&gt;%</span></span>
<span id="cb172-2"><a href="data-tidyverse.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">do</span>(<span class="at">model =</span> <span class="fu">lm</span>(sbp <span class="sc">~</span> dbp, <span class="at">data =</span> .))</span>
<span id="cb172-3"><a href="data-tidyverse.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> split_lm2</span>
<span id="cb172-4"><a href="data-tidyverse.html#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 2</span></span>
<span id="cb172-5"><a href="data-tidyverse.html#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Rowwise: </span></span>
<span id="cb172-6"><a href="data-tidyverse.html#cb172-6" aria-hidden="true" tabindex="-1"></a>  sex    model </span>
<span id="cb172-7"><a href="data-tidyverse.html#cb172-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>list<span class="sc">&gt;</span></span>
<span id="cb172-8"><a href="data-tidyverse.html#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> female <span class="sc">&lt;</span>lm<span class="sc">&gt;</span>  </span>
<span id="cb172-9"><a href="data-tidyverse.html#cb172-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> male   <span class="sc">&lt;</span>lm<span class="sc">&gt;</span>  </span></code></pre></div>
<p>Note how we specify the per-group data here, namely via a single dot <code>.</code>: when running the <code>do</code>-function, the dot will be replaced by the corresponding subsets of the data, one per grouping level. The result is a tibble with as many rows as groups, and a new variable with our (freely chosen) name <code>model</code>, which is actually internally a <em>list</em> of linear models, even if this is not obvious from the tibble output:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data-tidyverse.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">is.list</span>(split_lm2<span class="sc">$</span>model)</span>
<span id="cb173-2"><a href="data-tidyverse.html#cb173-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>So we can use the double bracket <code>[[</code>-notation for list elements (Section @ref{basic_lists}), or function <code>lapply</code> (Section @{split-apply-combine}) to process all models:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="data-tidyverse.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> split_lm2<span class="sc">$</span>model[[<span class="dv">1</span>]]</span>
<span id="cb174-2"><a href="data-tidyverse.html#cb174-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-3"><a href="data-tidyverse.html#cb174-3" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span></span>
<span id="cb174-4"><a href="data-tidyverse.html#cb174-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">formula =</span> sbp <span class="sc">~</span> dbp, <span class="at">data =</span> .)</span>
<span id="cb174-5"><a href="data-tidyverse.html#cb174-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-6"><a href="data-tidyverse.html#cb174-6" aria-hidden="true" tabindex="-1"></a>Coefficients<span class="sc">:</span></span>
<span id="cb174-7"><a href="data-tidyverse.html#cb174-7" aria-hidden="true" tabindex="-1"></a>(Intercept)          dbp  </span>
<span id="cb174-8"><a href="data-tidyverse.html#cb174-8" aria-hidden="true" tabindex="-1"></a>      <span class="fl">11.63</span>         <span class="fl">1.45</span>  </span>
<span id="cb174-9"><a href="data-tidyverse.html#cb174-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">lapply</span>(split_lm2<span class="sc">$</span>model, summary)</span>
<span id="cb174-10"><a href="data-tidyverse.html#cb174-10" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb174-11"><a href="data-tidyverse.html#cb174-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-12"><a href="data-tidyverse.html#cb174-12" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span></span>
<span id="cb174-13"><a href="data-tidyverse.html#cb174-13" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">formula =</span> sbp <span class="sc">~</span> dbp, <span class="at">data =</span> .)</span>
<span id="cb174-14"><a href="data-tidyverse.html#cb174-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-15"><a href="data-tidyverse.html#cb174-15" aria-hidden="true" tabindex="-1"></a>Residuals<span class="sc">:</span></span>
<span id="cb174-16"><a href="data-tidyverse.html#cb174-16" aria-hidden="true" tabindex="-1"></a>    Min      1Q  Median      3Q     Max </span>
<span id="cb174-17"><a href="data-tidyverse.html#cb174-17" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="fl">42.271</span> <span class="sc">-</span><span class="fl">12.851</span>  <span class="sc">-</span><span class="fl">6.396</span>  <span class="fl">12.591</span>  <span class="fl">63.441</span> </span>
<span id="cb174-18"><a href="data-tidyverse.html#cb174-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-19"><a href="data-tidyverse.html#cb174-19" aria-hidden="true" tabindex="-1"></a>Coefficients<span class="sc">:</span></span>
<span id="cb174-20"><a href="data-tidyverse.html#cb174-20" aria-hidden="true" tabindex="-1"></a>            Estimate Std. Error t value <span class="fu">Pr</span>(<span class="sc">&gt;</span><span class="er">|</span>t<span class="sc">|</span>)    </span>
<span id="cb174-21"><a href="data-tidyverse.html#cb174-21" aria-hidden="true" tabindex="-1"></a>(Intercept)  <span class="fl">11.6308</span>    <span class="fl">12.5337</span>   <span class="fl">0.928</span>    <span class="fl">0.358</span>    </span>
<span id="cb174-22"><a href="data-tidyverse.html#cb174-22" aria-hidden="true" tabindex="-1"></a>dbp           <span class="fl">1.4503</span>     <span class="fl">0.1206</span>  <span class="fl">12.025</span>   <span class="sc">&lt;</span><span class="fl">2e-16</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb174-23"><a href="data-tidyverse.html#cb174-23" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb174-24"><a href="data-tidyverse.html#cb174-24" aria-hidden="true" tabindex="-1"></a>Signif. codes<span class="sc">:</span>  <span class="dv">0</span> <span class="st">&#39;***&#39;</span> <span class="fl">0.001</span> <span class="st">&#39;**&#39;</span> <span class="fl">0.01</span> <span class="st">&#39;*&#39;</span> <span class="fl">0.05</span> <span class="st">&#39;.&#39;</span> <span class="fl">0.1</span> <span class="st">&#39; &#39;</span> <span class="dv">1</span></span>
<span id="cb174-25"><a href="data-tidyverse.html#cb174-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-26"><a href="data-tidyverse.html#cb174-26" aria-hidden="true" tabindex="-1"></a>Residual standard error<span class="sc">:</span> <span class="fl">22.61</span> on <span class="dv">53</span> degrees of freedom</span>
<span id="cb174-27"><a href="data-tidyverse.html#cb174-27" aria-hidden="true" tabindex="-1"></a>Multiple R<span class="sc">-</span>squared<span class="sc">:</span>  <span class="fl">0.7318</span>,    Adjusted R<span class="sc">-</span>squared<span class="sc">:</span>  <span class="fl">0.7267</span> </span>
<span id="cb174-28"><a href="data-tidyverse.html#cb174-28" aria-hidden="true" tabindex="-1"></a>F<span class="sc">-</span>statistic<span class="sc">:</span> <span class="fl">144.6</span> on <span class="dv">1</span> and <span class="dv">53</span> DF,  p<span class="sc">-</span>value<span class="sc">:</span> <span class="er">&lt;</span> <span class="fl">2.2e-16</span></span>
<span id="cb174-29"><a href="data-tidyverse.html#cb174-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-30"><a href="data-tidyverse.html#cb174-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-31"><a href="data-tidyverse.html#cb174-31" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb174-32"><a href="data-tidyverse.html#cb174-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-33"><a href="data-tidyverse.html#cb174-33" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span></span>
<span id="cb174-34"><a href="data-tidyverse.html#cb174-34" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">formula =</span> sbp <span class="sc">~</span> dbp, <span class="at">data =</span> .)</span>
<span id="cb174-35"><a href="data-tidyverse.html#cb174-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-36"><a href="data-tidyverse.html#cb174-36" aria-hidden="true" tabindex="-1"></a>Residuals<span class="sc">:</span></span>
<span id="cb174-37"><a href="data-tidyverse.html#cb174-37" aria-hidden="true" tabindex="-1"></a>    Min      1Q  Median      3Q     Max </span>
<span id="cb174-38"><a href="data-tidyverse.html#cb174-38" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="fl">34.091</span> <span class="sc">-</span><span class="fl">10.973</span>  <span class="sc">-</span><span class="fl">1.218</span>  <span class="fl">10.609</span>  <span class="fl">35.968</span> </span>
<span id="cb174-39"><a href="data-tidyverse.html#cb174-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-40"><a href="data-tidyverse.html#cb174-40" aria-hidden="true" tabindex="-1"></a>Coefficients<span class="sc">:</span></span>
<span id="cb174-41"><a href="data-tidyverse.html#cb174-41" aria-hidden="true" tabindex="-1"></a>            Estimate Std. Error t value <span class="fu">Pr</span>(<span class="sc">&gt;</span><span class="er">|</span>t<span class="sc">|</span>)    </span>
<span id="cb174-42"><a href="data-tidyverse.html#cb174-42" aria-hidden="true" tabindex="-1"></a>(Intercept)  <span class="sc">-</span><span class="fl">1.6551</span>    <span class="fl">12.8944</span>  <span class="sc">-</span><span class="fl">0.128</span>    <span class="fl">0.898</span>    </span>
<span id="cb174-43"><a href="data-tidyverse.html#cb174-43" aria-hidden="true" tabindex="-1"></a>dbp           <span class="fl">1.5850</span>     <span class="fl">0.1323</span>  <span class="fl">11.983</span> <span class="fl">2.71e-15</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb174-44"><a href="data-tidyverse.html#cb174-44" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb174-45"><a href="data-tidyverse.html#cb174-45" aria-hidden="true" tabindex="-1"></a>Signif. codes<span class="sc">:</span>  <span class="dv">0</span> <span class="st">&#39;***&#39;</span> <span class="fl">0.001</span> <span class="st">&#39;**&#39;</span> <span class="fl">0.01</span> <span class="st">&#39;*&#39;</span> <span class="fl">0.05</span> <span class="st">&#39;.&#39;</span> <span class="fl">0.1</span> <span class="st">&#39; &#39;</span> <span class="dv">1</span></span>
<span id="cb174-46"><a href="data-tidyverse.html#cb174-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-47"><a href="data-tidyverse.html#cb174-47" aria-hidden="true" tabindex="-1"></a>Residual standard error<span class="sc">:</span> <span class="fl">16.42</span> on <span class="dv">43</span> degrees of freedom</span>
<span id="cb174-48"><a href="data-tidyverse.html#cb174-48" aria-hidden="true" tabindex="-1"></a>Multiple R<span class="sc">-</span>squared<span class="sc">:</span>  <span class="fl">0.7695</span>,    Adjusted R<span class="sc">-</span>squared<span class="sc">:</span>  <span class="fl">0.7642</span> </span>
<span id="cb174-49"><a href="data-tidyverse.html#cb174-49" aria-hidden="true" tabindex="-1"></a>F<span class="sc">-</span>statistic<span class="sc">:</span> <span class="fl">143.6</span> on <span class="dv">1</span> and <span class="dv">43</span> DF,  p<span class="sc">-</span>value<span class="sc">:</span> <span class="fl">2.707e-15</span></span></code></pre></div>
<p><strong>Exercise:</strong> Group the <code>salt_ht</code> data frame by <code>sex</code> and <code>saltadd</code>, and calculate the mean and median difference between systolic and diastolic blood pressure for each group.</p>
</div>
</div>
<div id="tidyverse-vs-base-r" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> <code>tidyverse</code> vs base R?<a href="data-tidyverse.html#tidyverse-vs-base-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If the question in the heading does not make sense to you: fine! I agree - R is a general purpose computer language, and the <code>tidyverse</code> just represents one specific, if rather opinionated and coherent, way of using that language to express things - a dialect, if you will, and so far a mutually intelligible dialect of R (in the sense that e.g. a tibble is still a data frame). By its nature, R can be extended and modified to serve different uses, and an extra set of well-designed add-on packages (which is what the <code>tidyverse</code> is after all) just adds to the available choices: we can and should mix and match pragmatically according to our needs and preferences.</p>
<p>If the question in the heading is obvious and important to you: fine! I can see where you are coming from, and FWIW, large (or at least noisy) parts of the internet agree with you (try googling “<code>tidyverse</code> vs base R”). When starting with R as a new language and analysis tool, its very flexibility can make it hard to get a grip on how to do things - even simple things, at first; encountering two very different approaches is not exactly helpful in this setting.</p>
<p>But consider these points:</p>
<ol style="list-style-type: decimal">
<li><p>If you are using R as primary analysis tool longer term, the choice of <em>how</em> to do things, whether to implement your own solution or try to find and adapt existing code, will come upon you; base R vs <code>tidyverse</code> vs e.g. <code>data.table</code> is just the beginning, so you may as well embrace diversity right from the start.</p></li>
<li><p>If you are using R only as a tool for a very specific project or study: you are missing out… but more seriously, that’s fine; suit yourself and go with whatever gets the job done better for you.</p></li>
<li><p>Which brings us to the next point, which is sadly absent in many discussions about base R and <code>tidyverse</code>: there is no general answer independent of the specific use case you are considering. A data scientist implementing a processing pipeline for massive amounts of continuously generated data, a researcher implementing a study protocol for an essentially fixed study cohort, and someone writing R code to implement new methods for other people to use on their data have very different needs and requirements.</p></li>
<li><p>Much online discussion is worthless: you can quite safely ignore everything technical older than 2-3 years, anything that argues merely based on elegance, and anything that comes to strong general conclusions without regard to the use case (see previous point). There is material for at least one fascinating ethnographic PhD in how the base R vs <code>tidyverse</code> dichotomy reflects a generational and social shift from the original R Core Team to, say, the developers currently employed at Posit Software… I’m not going to write it; but be aware that much online (and some offline) discussion is driven more by tribal affiliation than by sober consideration of facts.</p></li>
<li><p>In research at least, it is quite likely that you will spend orders of magnitude more time writing and debugging code than actually running it. Any discussion of performance and efficiency has to value the time you spend on these activities, not just the time spent on code execution (and this includes the time you spend on learning any new tools to do your coding &amp; debugging).</p></li>
<li><p>While this may seem like a momentous decision to be taken early on and followed through to the bitter end, I really don’t think it is. In the light of the rapid prototyping and incremental improvement approach that R so excels at, and much in line with the previous points, it is important to</p>
<ol style="list-style-type: lower-alpha">
<li>get something off the ground that is demonstrably correct, with whatever tool you are most familiar with,</li>
<li>modify and adapt your approach whenever you need to (e.g. because run times become unaccepatble).</li>
</ol>
<p>Of course, to do b. well, you have to at least be aware what alternatives there are, so maybe it was for the best that we had this little talk about the <code>tidyverse</code>…</p></li>
</ol>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="23">
<li id="fn23"><p>Wickham, H (2014): <em>Tidy Data</em>. Journal of Statistical Software, 59(10), 1–23. <a href="https://doi.org/10.18637/jss.v059.i10" class="uri">https://doi.org/10.18637/jss.v059.i10</a><a href="data-tidyverse.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p>Though not all - e.g. <code>ggplot2</code> predates the <code>tidyverse</code> concept and neither requires nor generates tidy data.<a href="data-tidyverse.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p>This is known as <em>non-standard evaluation</em>; the <a href="https://adv-r.hadley.nz">Advanced R book</a> has a good <a href="https://adv-r.hadley.nz/metaprogramming.html">introduction</a>.<a href="data-tidyverse.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>According to the author, <a href="https://github.com/tidyverse/dplyr/issues/1857">“The d is for dataframes, the plyr is to evoke pliers. Pronounce however you like.”</a><a href="data-tidyverse.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>Note that the names and the organisation of the <code>dplyr</code> functions is clearly inspired by SQL, so if you have experience with relational databases, much may look familiar.<a href="data-tidyverse.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>FIXME - should we talk about name collisions, dplyr / MASS, dplyr / plyr?<a href="data-tidyverse.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p>As a matter of fact, <code>select</code> supports a whole mini-language for specifying a subset of variables, which has been implemented as a separate package <code>tidyselect</code>, see e.g. <code>?starts_with</code>. This is IMO somewhat excessive.<a href="data-tidyverse.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>Note that “piping” is in no way limited to the <code>tidyverse</code> - you can use the operator <code>%&gt;%</code> implemented in package <code>magrittr</code> with any R code; indeed, since Version 4.1.0, base R has its own pipe operator <code>|&gt;</code> which works in a very similar manner (and does not require an add-on package).<a href="data-tidyverse.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>In the example alphabetically, but really according to the order of the levels of the factor variable on which we sort.<a href="data-tidyverse.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p>FIXME - explain differences (rolling definitions)?<a href="data-tidyverse.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p>Of course, <em>join</em> is again a relational database term, and the join-functions in <code>dplyr</code> correspond directly to the SQL commands of the same name.<a href="data-tidyverse.html#fnref33" class="footnote-back">↩︎</a></p></li>
<li id="fn34"><p>The printing method for tibbles will try to show as much of the data as it can fit into the current console window, but will list the number of skipped rows, and if applicable, also the names and number of skipped variables that did not fit.<a href="data-tidyverse.html#fnref34" class="footnote-back">↩︎</a></p></li>
<li id="fn35"><p>Actually, if you look at the help page <code>?do</code>, you find that this approach has been marked as “superseeded”: while it still works, it is no longer developed or maintained; the preferred approach (for now) is to use <code>nest_by</code> instead of <code>group_by</code>. So why bring this up at all?</p>
<p>The short answer is that this is just a very short overview of <code>dplyr</code>, and I don’t want to go into too much detail. The longer answer is that this is an example for how things can change in <code>tidyverse</code> packages: the explanation for superseeding <code>do</code> is given as “because its syntax never really felt like it belong with the rest of dplyr”, which seems somewhat arbitrary; also note that this now requires two new functions, <code>nest_by</code> and <code>across</code>, and the decidely non-tidy new concept of a “rowwise” tibble (<code>?rowwise</code>). So what started as a purist commitment to tidy principles and an elegant extension of the data frame concept, becomes increasingly complicated, and increasingly divorced from the underlying principles and concepts; and development is ongoing…<a href="data-tidyverse.html#fnref35" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-processing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basic-stats-epi.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/data_tidy.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introductio-to-r.pdf", "introductio-to-r.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
