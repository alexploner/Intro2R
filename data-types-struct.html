<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data types and structures | Introduction to R</title>
  <meta name="description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data types and structures | Introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data types and structures | Introduction to R" />
  
  <meta name="twitter:description" content="This is the material for the course Introduction to R, given at Karolinska Institutet, Stockholm, Sweden, as part of the doctoral program in epidemiology." />
  



<meta name="date" content="2022-03-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-example.html"/>
<link rel="next" href="data-processing.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this document</a></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="1" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="background.html"><a href="background.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="background.html"><a href="background.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2</b> What is RStudio?</a></li>
<li class="chapter" data-level="1.3" data-path="background.html"><a href="background.html#software-installation"><i class="fa fa-check"></i><b>1.3</b> Software installation</a></li>
<li class="chapter" data-level="1.4" data-path="background.html"><a href="background.html#references"><i class="fa fa-check"></i><b>1.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Working with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#starting-r"><i class="fa fa-check"></i><b>2.1</b> Starting R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#storing-data-as-objects"><i class="fa fa-check"></i><b>2.2</b> Storing data as objects</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#about-variable-names"><i class="fa fa-check"></i><b>2.2.1</b> About variable names</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#data-structure-i-the-vector"><i class="fa fa-check"></i><b>2.3</b> Data structure I: The vector</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#example-simple-descriptives"><i class="fa fa-check"></i><b>2.3.1</b> Example: simple descriptives</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#example-simple-plots"><i class="fa fa-check"></i><b>2.3.2</b> Example: simple plots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#non-numeric-data"><i class="fa fa-check"></i><b>2.4</b> Non-numeric data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#descriptives-for-grouping-data"><i class="fa fa-check"></i><b>2.4.1</b> Descriptives for grouping data</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#character-vector-vs-factor"><i class="fa fa-check"></i><b>2.4.2</b> Character vector vs factor</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#general-data-in-r"><i class="fa fa-check"></i><b>2.5</b> General data in R</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#extracting-parts-of-a-data-frame"><i class="fa fa-check"></i><b>2.5.1</b> Extracting parts of a data frame</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#example-descriptive-statistics"><i class="fa fa-check"></i><b>2.5.2</b> Example: descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#importing-data"><i class="fa fa-check"></i><b>2.6</b> Importing data</a></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#meta-activity"><i class="fa fa-check"></i><b>2.7</b> Meta-activity</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>2.7.1</b> Getting help</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction.html"><a href="introduction.html#keeping-track-of-objects"><i class="fa fa-check"></i><b>2.7.2</b> Keeping track of objects</a></li>
<li class="chapter" data-level="2.7.3" data-path="introduction.html"><a href="introduction.html#quitting-r"><i class="fa fa-check"></i><b>2.7.3</b> Quitting R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro_rstudio.html"><a href="intro_rstudio.html"><i class="fa fa-check"></i><b>3</b> Working in RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#getting-started"><i class="fa fa-check"></i><b>3.1</b> Getting started</a></li>
<li class="chapter" data-level="3.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#a-quick-tour-of-the-gui"><i class="fa fa-check"></i><b>3.2</b> A quick tour of the GUI</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#console-and-friends"><i class="fa fa-check"></i><b>3.2.1</b> Console and friends</a></li>
<li class="chapter" data-level="3.2.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#rstudio-console-specials"><i class="fa fa-check"></i><b>3.2.2</b> RStudio Console specials</a></li>
<li class="chapter" data-level="3.2.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#navigating-the-pane-layout"><i class="fa fa-check"></i><b>3.2.3</b> Navigating the pane layout</a></li>
<li class="chapter" data-level="3.2.4" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-default-upper-pane"><i class="fa fa-check"></i><b>3.2.4</b> The default upper pane</a></li>
<li class="chapter" data-level="3.2.5" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-default-lower-pane"><i class="fa fa-check"></i><b>3.2.5</b> The default lower pane</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#source-pane-scripting"><i class="fa fa-check"></i><b>3.3</b> Source pane &amp; scripting</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intro_rstudio.html"><a href="intro_rstudio.html#console2source"><i class="fa fa-check"></i><b>3.3.1</b> From console to source</a></li>
<li class="chapter" data-level="3.3.2" data-path="intro_rstudio.html"><a href="intro_rstudio.html#the-source-pane-file-editor"><i class="fa fa-check"></i><b>3.3.2</b> The Source pane file editor</a></li>
<li class="chapter" data-level="3.3.3" data-path="intro_rstudio.html"><a href="intro_rstudio.html#displays"><i class="fa fa-check"></i><b>3.3.3</b> Displays</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>4</b> A simple example</a>
<ul>
<li class="chapter" data-level="4.1" data-path="intro-example.html"><a href="intro-example.html#data-import"><i class="fa fa-check"></i><b>4.1</b> Data import</a></li>
<li class="chapter" data-level="4.2" data-path="intro-example.html"><a href="intro-example.html#analysis"><i class="fa fa-check"></i><b>4.2</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="intro-example.html"><a href="intro-example.html#desc-ex"><i class="fa fa-check"></i><b>4.2.1</b> Descriptives</a></li>
<li class="chapter" data-level="4.2.2" data-path="intro-example.html"><a href="intro-example.html#blood-pressure-by-salt-intake"><i class="fa fa-check"></i><b>4.2.2</b> Blood pressure by salt intake</a></li>
<li class="chapter" data-level="4.2.3" data-path="intro-example.html"><a href="intro-example.html#salt-intake-by-sex"><i class="fa fa-check"></i><b>4.2.3</b> Salt intake by sex</a></li>
<li class="chapter" data-level="4.2.4" data-path="intro-example.html"><a href="intro-example.html#save-results"><i class="fa fa-check"></i><b>4.2.4</b> Save results</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="intro-example.html"><a href="intro-example.html#turning-into-script"><i class="fa fa-check"></i><b>4.3</b> Turning it into a script</a></li>
<li class="chapter" data-level="4.4" data-path="intro-example.html"><a href="intro-example.html#exp-res"><i class="fa fa-check"></i><b>4.4</b> Exporting results</a></li>
</ul></li>
<li class="part"><span><b>II Working with data</b></span></li>
<li class="chapter" data-level="5" data-path="data-types-struct.html"><a href="data-types-struct.html"><i class="fa fa-check"></i><b>5</b> Data types and structures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-types-struct.html"><a href="data-types-struct.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-types-struct.html"><a href="data-types-struct.html#data-examples"><i class="fa fa-check"></i><b>5.1.1</b> Data examples</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-types-struct.html"><a href="data-types-struct.html#background-1"><i class="fa fa-check"></i><b>5.2</b> Background</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-types-struct.html"><a href="data-types-struct.html#recap"><i class="fa fa-check"></i><b>5.2.1</b> Recap</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-types-struct.html"><a href="data-types-struct.html#motivation"><i class="fa fa-check"></i><b>5.2.2</b> Motivation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-types-struct.html"><a href="data-types-struct.html#more-about-vectors"><i class="fa fa-check"></i><b>5.3</b> More about vectors</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-types-struct.html"><a href="data-types-struct.html#vector-calculations"><i class="fa fa-check"></i><b>5.3.1</b> Vector calculations</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-types-struct.html"><a href="data-types-struct.html#indexing-vectors-by-position"><i class="fa fa-check"></i><b>5.3.2</b> Indexing vectors by position</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-data"><i class="fa fa-check"></i><b>5.4</b> Logical data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-types-struct.html"><a href="data-types-struct.html#definition"><i class="fa fa-check"></i><b>5.4.1</b> Definition</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-expressions"><i class="fa fa-check"></i><b>5.4.2</b> Logical expressions</a></li>
<li class="chapter" data-level="5.4.3" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-vectors"><i class="fa fa-check"></i><b>5.4.3</b> Logical vectors</a></li>
<li class="chapter" data-level="5.4.4" data-path="data-types-struct.html"><a href="data-types-struct.html#logical-vectors-for-indexing"><i class="fa fa-check"></i><b>5.4.4</b> Logical vectors for indexing</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-types-struct.html"><a href="data-types-struct.html#more-on-rectangular-data"><i class="fa fa-check"></i><b>5.5</b> More on rectangular data</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data-types-struct.html"><a href="data-types-struct.html#data-frame"><i class="fa fa-check"></i><b>5.5.1</b> Data frame</a></li>
<li class="chapter" data-level="5.5.2" data-path="data-types-struct.html"><a href="data-types-struct.html#matrix"><i class="fa fa-check"></i><b>5.5.2</b> Matrix</a></li>
<li class="chapter" data-level="5.5.3" data-path="data-types-struct.html"><a href="data-types-struct.html#extensions-alternatives"><i class="fa fa-check"></i><b>5.5.3</b> Extensions &amp; alternatives</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-types-struct.html"><a href="data-types-struct.html#helpers-subset-and-transform"><i class="fa fa-check"></i><b>5.6</b> Helpers: <code>subset</code> and <code>transform</code></a></li>
<li class="chapter" data-level="5.7" data-path="data-types-struct.html"><a href="data-types-struct.html#list-struct"><i class="fa fa-check"></i><b>5.7</b> Free-style data: lists</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="data-types-struct.html"><a href="data-types-struct.html#background-2"><i class="fa fa-check"></i><b>5.7.1</b> Background</a></li>
<li class="chapter" data-level="5.7.2" data-path="data-types-struct.html"><a href="data-types-struct.html#basic_lists"><i class="fa fa-check"></i><b>5.7.2</b> Basic list</a></li>
<li class="chapter" data-level="5.7.3" data-path="data-types-struct.html"><a href="data-types-struct.html#named-lists"><i class="fa fa-check"></i><b>5.7.3</b> Named lists</a></li>
<li class="chapter" data-level="5.7.4" data-path="data-types-struct.html"><a href="data-types-struct.html#example-data-frames"><i class="fa fa-check"></i><b>5.7.4</b> Example: data frames</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="data-types-struct.html"><a href="data-types-struct.html#technical-notes"><i class="fa fa-check"></i><b>5.8</b> Technical notes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-processing.html"><a href="data-processing.html"><i class="fa fa-check"></i><b>6</b> Processing data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-processing.html"><a href="data-processing.html#overview-1"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="data-processing.html"><a href="data-processing.html#group-stats"><i class="fa fa-check"></i><b>6.2</b> Groupwise statistics</a></li>
<li class="chapter" data-level="6.3" data-path="data-processing.html"><a href="data-processing.html#own-functions"><i class="fa fa-check"></i><b>6.3</b> Using your own functions</a></li>
<li class="chapter" data-level="6.4" data-path="data-processing.html"><a href="data-processing.html#split-apply-combine"><i class="fa fa-check"></i><b>6.4</b> Split - Apply - Combine</a></li>
<li class="chapter" data-level="6.5" data-path="data-processing.html"><a href="data-processing.html#merge-data-base"><i class="fa fa-check"></i><b>6.5</b> Merging data sets</a></li>
<li class="chapter" data-level="6.6" data-path="data-processing.html"><a href="data-processing.html#general-pipeline"><i class="fa fa-check"></i><b>6.6</b> Using pipelines</a></li>
<li class="chapter" data-level="6.7" data-path="data-processing.html"><a href="data-processing.html#technical-notes-1"><i class="fa fa-check"></i><b>6.7</b> Technical notes</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-tidyverse.html"><a href="data-tidyverse.html"><i class="fa fa-check"></i><b>7</b> The <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-tidyverse.html"><a href="data-tidyverse.html#overview-2"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="data-tidyverse.html"><a href="data-tidyverse.html#example-using-dplyr-for-data-processing"><i class="fa fa-check"></i><b>7.2</b> Example: Using <code>dplyr</code> for data processing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-tidyverse.html"><a href="data-tidyverse.html#overview-3"><i class="fa fa-check"></i><b>7.2.1</b> Overview</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-tidyverse.html"><a href="data-tidyverse.html#basic-data-operations"><i class="fa fa-check"></i><b>7.2.2</b> Basic data operations</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-tidyverse.html"><a href="data-tidyverse.html#groupwise-data-operations"><i class="fa fa-check"></i><b>7.2.3</b> Groupwise data operations</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-tidyverse.html"><a href="data-tidyverse.html#tidyverse-vs-base-r"><i class="fa fa-check"></i><b>7.3</b> <code>tidyverse</code> vs base R?</a></li>
<li class="chapter" data-level="7.4" data-path="data-tidyverse.html"><a href="data-tidyverse.html#technical-notes-2"><i class="fa fa-check"></i><b>7.4</b> Technical notes</a></li>
</ul></li>
<li class="part"><span><b>III Estimation, inference, modelling</b></span></li>
<li class="chapter" data-level="8" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html"><i class="fa fa-check"></i><b>8</b> Basic Statistics &amp; Epidemiology</a>
<ul>
<li class="chapter" data-level="8.1" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#descriptives"><i class="fa fa-check"></i><b>8.1</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#base-desc"><i class="fa fa-check"></i><b>8.1.1</b> In base R</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#using-package-summarytools"><i class="fa fa-check"></i><b>8.1.2</b> Using package <code>summarytools</code></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#confidence-intervals"><i class="fa fa-check"></i><b>8.2</b> Confidence intervals</a></li>
<li class="chapter" data-level="8.3" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#statistical-tests"><i class="fa fa-check"></i><b>8.3</b> Statistical tests</a></li>
<li class="chapter" data-level="8.4" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#epidemiological-risk-measures"><i class="fa fa-check"></i><b>8.4</b> Epidemiological risk measures</a></li>
<li class="chapter" data-level="8.5" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#pander-intro"><i class="fa fa-check"></i><b>8.5</b> Improved display of descriptives</a></li>
<li class="chapter" data-level="8.6" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#next-steps"><i class="fa fa-check"></i><b>8.6</b> Next steps</a></li>
<li class="chapter" data-level="8.7" data-path="basic-stats-epi.html"><a href="basic-stats-epi.html#technical-notes-3"><i class="fa fa-check"></i><b>8.7</b> Technical notes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-linear.html"><a href="regression-linear.html"><i class="fa fa-check"></i><b>9</b> Linear regression</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression-linear.html"><a href="regression-linear.html#overview-4"><i class="fa fa-check"></i><b>9.1</b> Overview</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="regression-linear.html"><a href="regression-linear.html#data-example-hemoglobin"><i class="fa fa-check"></i><b>9.1.1</b> Data example: Hemoglobin</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="regression-linear.html"><a href="regression-linear.html#background-3"><i class="fa fa-check"></i><b>9.2</b> Background</a></li>
<li class="chapter" data-level="9.3" data-path="regression-linear.html"><a href="regression-linear.html#simple-linear-regression"><i class="fa fa-check"></i><b>9.3</b> Simple linear regression</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="regression-linear.html"><a href="regression-linear.html#looking-at-the-data"><i class="fa fa-check"></i><b>9.3.1</b> Looking at the data</a></li>
<li class="chapter" data-level="9.3.2" data-path="regression-linear.html"><a href="regression-linear.html#fitting-a-linear-regression-model"><i class="fa fa-check"></i><b>9.3.2</b> Fitting a linear regression model</a></li>
<li class="chapter" data-level="9.3.3" data-path="regression-linear.html"><a href="regression-linear.html#regression-table-and-inference"><i class="fa fa-check"></i><b>9.3.3</b> Regression table and inference</a></li>
<li class="chapter" data-level="9.3.4" data-path="regression-linear.html"><a href="regression-linear.html#prediction"><i class="fa fa-check"></i><b>9.3.4</b> Prediction</a></li>
<li class="chapter" data-level="9.3.5" data-path="regression-linear.html"><a href="regression-linear.html#diagnostics"><i class="fa fa-check"></i><b>9.3.5</b> Diagnostics</a></li>
<li class="chapter" data-level="9.3.6" data-path="regression-linear.html"><a href="regression-linear.html#binary-predictor-and-dummy-coding"><i class="fa fa-check"></i><b>9.3.6</b> Binary predictor and dummy coding</a></li>
<li class="chapter" data-level="9.3.7" data-path="regression-linear.html"><a href="regression-linear.html#aside-generating-nice-regression-tables"><i class="fa fa-check"></i><b>9.3.7</b> Aside: generating nice regression tables</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression-linear.html"><a href="regression-linear.html#multiple-linear-regression"><i class="fa fa-check"></i><b>9.4</b> Multiple linear regression</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="regression-linear.html"><a href="regression-linear.html#multiple-predictors"><i class="fa fa-check"></i><b>9.4.1</b> Multiple predictors</a></li>
<li class="chapter" data-level="9.4.2" data-path="regression-linear.html"><a href="regression-linear.html#categorical-predictors-with-2-levels"><i class="fa fa-check"></i><b>9.4.2</b> Categorical predictors with <span class="math inline">\(&gt;\)</span> 2 levels</a></li>
<li class="chapter" data-level="9.4.3" data-path="regression-linear.html"><a href="regression-linear.html#interactions"><i class="fa fa-check"></i><b>9.4.3</b> Interactions</a></li>
<li class="chapter" data-level="9.4.4" data-path="regression-linear.html"><a href="regression-linear.html#splines"><i class="fa fa-check"></i><b>9.4.4</b> Splines</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="regression-linear.html"><a href="regression-linear.html#technical-notes-4"><i class="fa fa-check"></i><b>9.5</b> Technical notes</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression-other.html"><a href="regression-other.html"><i class="fa fa-check"></i><b>10</b> More regression models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regression-other.html"><a href="regression-other.html#logistic-regression"><i class="fa fa-check"></i><b>10.1</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="regression-other.html"><a href="regression-other.html#ex.-birthweight-uterine-irritability"><i class="fa fa-check"></i><b>10.1.1</b> Ex.: Birthweight &amp; uterine irritability</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="regression-other.html"><a href="regression-other.html#survival-regression"><i class="fa fa-check"></i><b>10.2</b> Survival regression</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="regression-other.html"><a href="regression-other.html#survival-data"><i class="fa fa-check"></i><b>10.2.1</b> Survival data</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression-other.html"><a href="regression-other.html#survival-curves"><i class="fa fa-check"></i><b>10.2.2</b> Survival curves</a></li>
<li class="chapter" data-level="10.2.3" data-path="regression-other.html"><a href="regression-other.html#cox-regression"><i class="fa fa-check"></i><b>10.2.3</b> Cox regression</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression-other.html"><a href="regression-other.html#other-models"><i class="fa fa-check"></i><b>10.3</b> Other models</a></li>
</ul></li>
<li class="part"><span><b>IV Graphics</b></span></li>
<li class="chapter" data-level="11" data-path="graphics-base.html"><a href="graphics-base.html"><i class="fa fa-check"></i><b>11</b> Graphics in base R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="graphics-base.html"><a href="graphics-base.html#overview-5"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="graphics-base.html"><a href="graphics-base.html#base-plots"><i class="fa fa-check"></i><b>11.2</b> Base plots</a>
<ul>
<li class="chapter" data-level="" data-path="graphics-base.html"><a href="graphics-base.html#vectorized-graphical-parameters"><i class="fa fa-check"></i>Vectorized graphical parameters</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="graphics-base.html"><a href="graphics-base.html#low-level-and-high-level-plotting"><i class="fa fa-check"></i><b>11.3</b> Low-level and high-level plotting</a></li>
<li class="chapter" data-level="11.4" data-path="graphics-base.html"><a href="graphics-base.html#displaying-saving-coloring-plots"><i class="fa fa-check"></i><b>11.4</b> Displaying, saving, coloring plots</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html"><i class="fa fa-check"></i><b>12</b> Graphics using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#overview-6"><i class="fa fa-check"></i><b>12.1</b> Overview</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#data-example-hemoglobin-1"><i class="fa fa-check"></i><b>12.1.1</b> Data example: Hemoglobin</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#background-4"><i class="fa fa-check"></i><b>12.2</b> Background</a></li>
<li class="chapter" data-level="12.3" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#concepts"><i class="fa fa-check"></i><b>12.3</b> Concepts</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>12.3.1</b> Aesthetics</a></li>
<li class="chapter" data-level="12.3.2" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#example-data"><i class="fa fa-check"></i><b>12.3.2</b> Example data</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#background-5"><i class="fa fa-check"></i><b>12.4</b> Background</a></li>
<li class="chapter" data-level="12.5" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#basic-usage"><i class="fa fa-check"></i><b>12.5</b> Basic usage</a></li>
<li class="chapter" data-level="12.6" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#slightly-extended-usage"><i class="fa fa-check"></i><b>12.6</b> Slightly extended usage</a></li>
<li class="chapter" data-level="12.7" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#multiple-layers"><i class="fa fa-check"></i><b>12.7</b> Multiple layers</a></li>
<li class="chapter" data-level="12.8" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#splitting-the-plot"><i class="fa fa-check"></i><b>12.8</b> Splitting the plot</a></li>
<li class="chapter" data-level="12.9" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#messing-with-the-defaults"><i class="fa fa-check"></i><b>12.9</b> Messing with the defaults</a>
<ul>
<li class="chapter" data-level="12.9.1" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#fixing-aesthetics"><i class="fa fa-check"></i><b>12.9.1</b> {-} Fixing aesthetics</a></li>
<li class="chapter" data-level="" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#scales"><i class="fa fa-check"></i>Scales</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#messing-with-defaults-ii-themes"><i class="fa fa-check"></i><b>12.10</b> Messing with defaults II: themes</a></li>
<li class="chapter" data-level="12.11" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#extension-packages"><i class="fa fa-check"></i><b>12.11</b> Extension packages</a></li>
<li class="chapter" data-level="12.12" data-path="graphics-ggplot2.html"><a href="graphics-ggplot2.html#technical-notes-5"><i class="fa fa-check"></i><b>12.12</b> Technical notes</a></li>
</ul></li>
<li class="part"><span><b>V Organizing the analysis</b></span></li>
<li class="chapter" data-level="13" data-path="tables-nice.html"><a href="tables-nice.html"><i class="fa fa-check"></i><b>13</b> Generating nice tables</a></li>
<li class="chapter" data-level="14" data-path="dynamic-documents.html"><a href="dynamic-documents.html"><i class="fa fa-check"></i><b>14</b> Dynamic documents</a></li>
<li class="chapter" data-level="15" data-path="scripting-workflow.html"><a href="scripting-workflow.html"><i class="fa fa-check"></i><b>15</b> Scripting and workflow</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-types-struct" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Data types and structures</h1>
<div id="overview" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Overview</h2>
<p>This document assumes that you can interact with R/RStudio in a basic manner (start the program, load data, perform simple analysis, quit safely) and a working knowledge of basic data types (numerical, character, factors) and data structures (vectors and data frames). Having gone through the accompanying <a href="https://pingpong.ki.se/courseId/19390/node.do?id=26018238&amp;ts=1553678408872&amp;u=84756180">Starting in R</a> should provide the necessary context.</p>
<p>The goal of this document is to inform you about:</p>
<ul>
<li>vectors as basic data structures in R,</li>
<li>calculations on vectors,</li>
<li>extracting and modifying parts of a vector by position (indexing),</li>
<li>the <code>logical</code> data type for storing true/false data in R,</li>
<li>logical operators and functions that return true/false values,</li>
<li>the use of logical expression to extract and modify part of a vector (logical indexing),</li>
<li>indexing for rectangular data structures like data frames,</li>
<li>lists as general all-purpose data structure in R,</li>
<li>names in data frames and lists.</li>
</ul>
<p>After going through this document and working through the examples in it, you should be able to</p>
<ul>
<li>extract parts of a vector or data frame by position,</li>
<li>build and evaluate logical conditions in your data,</li>
<li>extract parts of a vector or data frame based on logical conditions,</li>
<li>modify parts of an existing vector or data frame.</li>
</ul>
<div id="data-examples" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Data examples</h3>
<p>We will use two standard examples for demonstrating operations on vectors and data frames respectively throughout: for vectors, we have a mini data set of five subjects with body weights in kg before and after a diet:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-types-struct.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">83</span>, <span class="dv">102</span>, <span class="dv">57</span>, <span class="dv">72</span>, <span class="dv">68</span>)</span>
<span id="cb57-2"><a href="data-types-struct.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="dv">94</span>, <span class="dv">59</span>, <span class="dv">71</span>, <span class="dv">62</span>)</span></code></pre></div>
<p>For a data frame, we use the data on blood pressure and salt consumption in 100 subjects from the introduction, the top five rows of which are shown below: FIXME reference</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-types-struct.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(salt_ht, <span class="at">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb58-2"><a href="data-types-struct.html#cb58-2" aria-hidden="true" tabindex="-1"></a>    ID    sex sbp dbp saltadd age</span>
<span id="cb58-3"><a href="data-types-struct.html#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4305</span>   male <span class="dv">110</span>  <span class="dv">80</span>     yes  <span class="dv">58</span></span>
<span id="cb58-4"><a href="data-types-struct.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">6606</span> female  <span class="dv">85</span>  <span class="dv">55</span>      no  <span class="dv">32</span></span>
<span id="cb58-5"><a href="data-types-struct.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">5758</span> female <span class="dv">196</span> <span class="dv">128</span>    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">53</span></span>
<span id="cb58-6"><a href="data-types-struct.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2265</span>   male <span class="dv">167</span> <span class="dv">112</span>     yes  <span class="dv">68</span></span>
<span id="cb58-7"><a href="data-types-struct.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">7408</span> female <span class="dv">145</span> <span class="dv">110</span>     yes  <span class="dv">55</span></span>
<span id="cb58-8"><a href="data-types-struct.html#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="dv">2160</span> female <span class="dv">179</span> <span class="dv">120</span>      no  <span class="dv">60</span></span></code></pre></div>
</div>
</div>
<div id="background-1" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Background</h2>
<div id="recap" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Recap</h3>
<p>In the introduction, we have seen how statistical data can be combined into aggregated structures for manipulation, display and analysis. The two structures we have discussed were linear <em>vectors</em> and rectangular <em>data frames</em>. As originally mentioned, we still want to be able to extract, inspect, display and process smaller parts of the combined data, and we have very briefly looked at how to do this for data frames using the <code>$</code>-notation and the <code>subset</code>-function.</p>
</div>
<div id="motivation" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Motivation</h3>
<p>Data extraction and -manipulation and their technical details may not be the most exciting subjects, but they are essential for any practical statistical work. They are crucial for transforming raw original data into clean analysis data; they are an integral part of descriptive statistics, and they will pop up naturally when doing subgroup- or sensitivity analyses.</p>
<p>Additionally, the concepts discussed in this document (vectors, data frames, lists, indexing) are central for how R works. Understanding them at a somewhat more technical level makes it possible to read, understand and modify existing code for one’s own analysis, and provides context for extension methods (like the <a href="https://www.google.com/url?q=https://www.tidyverse.org">tidyverse</a>) that build upon it. FIXME: reference</p>
</div>
</div>
<div id="more-about-vectors" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> More about vectors</h2>
<div id="vector-calculations" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Vector calculations</h3>
<p>As discussed, a vector is a simple linear arrangement of data items of the same type (e.g. all numerical or all character). It is also an extremely fundamental data type in R, both technically and conceptually: actually, individual numbers or character strings are really just vectors of length one, rather than some different type. This is exactly why R displays a single number with the trailing <code>[1]</code> just as it does for vectors:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-types-struct.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">42</span></span>
<span id="cb59-2"><a href="data-types-struct.html#cb59-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span>
<span id="cb59-3"><a href="data-types-struct.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before</span>
<span id="cb59-4"><a href="data-types-struct.html#cb59-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">57</span>  <span class="dv">72</span>  <span class="dv">68</span></span></code></pre></div>
<p>Consequently, many basic operations in R and many of the better functions in add-on packages are <em>vector-oriented</em>, i.e. they work for vectors in the same way as for individual data items, simply by acting component-wise. So in order to calculate the change in weight in our five individuals from before to after the diet, we can simply subtract the two vectors:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-types-struct.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after <span class="sc">-</span> before</span>
<span id="cb60-2"><a href="data-types-struct.html#cb60-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="dv">2</span> <span class="sc">-</span><span class="dv">8</span>  <span class="dv">2</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">-</span><span class="dv">6</span></span></code></pre></div>
<p>Note how the subtraction is performed for each matching pair of weights from the two operand vectors, and the resulting collection of differences is returned as a vector of the same length. The same works also for multiplication, so if we want to express the weight after the diet as a proportion of the weight before the diet, we can simply write:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-types-struct.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after<span class="sc">/</span>before</span>
<span id="cb61-2"><a href="data-types-struct.html#cb61-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.9759036</span> <span class="fl">0.9215686</span> <span class="fl">1.0350877</span> <span class="fl">0.9861111</span> <span class="fl">0.9117647</span></span></code></pre></div>
<p>We can extend this calculation to the percentage in an intuitive manner:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-types-struct.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> after<span class="sc">/</span>before)</span>
<span id="cb62-2"><a href="data-types-struct.html#cb62-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">98</span>  <span class="dv">92</span> <span class="dv">104</span>  <span class="dv">99</span>  <span class="dv">91</span></span></code></pre></div>
<p>Clearly, the function <code>round</code>, which rounds a real number to the closest, integer is also vector-oriented, in that it can work component-wise on a vector of numbers and return a vector of results. You may be a bit puzzled by the role of the multiplier 100: while we can interpret this as a vector of length one, as per above, how is this combined work with the vector <code>after/before</code>, which is of length five? The answer is that when two vectors of different lengths are combined in an operation, then the shorter is repeated as often as necessary to create two vectors of the same length, chopping off extra parts if necessary (last repetition may be partial). This is not a problem if the shorter vector has length one, it is just replaced by as many copies of itself as necessary. In our case, the operation above is the same as</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-types-struct.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>) <span class="sc">*</span> after<span class="sc">/</span>before)</span>
<span id="cb63-2"><a href="data-types-struct.html#cb63-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">98</span>  <span class="dv">92</span> <span class="dv">104</span>  <span class="dv">99</span>  <span class="dv">91</span></span></code></pre></div>
<p>which makes perfect sense. If the shorter vector is not of length one, this is more often than not unintended (i.e. an error), and R will generate a warning whenever information is chopped off<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>Exercises:</p>
<ol style="list-style-type: decimal">
<li>Using the conversion factor 1 kg = 2.205 lbs, convert the dieters’ weights to pounds.</li>
<li>Use vector arithmetic to calculate the variance of a vector of numbers. Hint: use functions <code>mean</code>, <code>sum</code>, <code>length</code> and the exponentiation operator <code>^</code>.</li>
</ol>
</div>
<div id="indexing-vectors-by-position" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Indexing vectors by position</h3>
<p>By construction, the easiest way to specify part of a vector is by position: data items are lined up one after the other, from first to last, so each datum has a specific position, or number, or address, starting with one (unlike our friends from the computer sciences, we count starting with one). In R, this is specified via square brackets <code>[]</code>; so if we want to extract the weight after diet of the second subject, we just write</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-types-struct.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after[<span class="dv">2</span>]</span>
<span id="cb64-2"><a href="data-types-struct.html#cb64-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">94</span></span></code></pre></div>
<p>Calling the bracket-expression an index just highlights the connection to the mathematical idea of a vector, as an <span class="math inline">\(n\)</span>-tuple of numbers <span class="math inline">\((x_1, \ldots x_n)\)</span>. In other words, <code>x[i]</code> is just the R expression for the dreaded <span class="math inline">\(x_i\)</span> so beloved by teachers of statistics courses.</p>
<p>As it turns out, the extraction function implemented by the brackets is itself vector-oriented, in the sense explained above. This means that we can specify a whole <em>vector</em> of index positions, e.g. to extract the weights before diet for the three first subjects in the data:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-types-struct.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)]</span>
<span id="cb65-2"><a href="data-types-struct.html#cb65-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">57</span></span></code></pre></div>
<p>A useful shorthand for writing an index vector in this context is the <code>:</code>-operator, which generates a vector of consecutive integers<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, as in</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-types-struct.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb66-2"><a href="data-types-struct.html#cb66-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>which we can use to achieve the same extraction with much less typing:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-types-struct.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb67-2"><a href="data-types-struct.html#cb67-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">57</span></span></code></pre></div>
<p>We can use the same technique for <em>changing</em> parts of a vector, simply by moving the expression with the brackets to the left hand side of an assignment. So e.g. assuming that the weight after diet for the second subject was originally misspecified and should really by 96, we can fix this by</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-types-struct.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">96</span></span>
<span id="cb68-2"><a href="data-types-struct.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after</span>
<span id="cb68-3"><a href="data-types-struct.html#cb68-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">81</span> <span class="dv">96</span> <span class="dv">59</span> <span class="dv">71</span> <span class="dv">62</span></span></code></pre></div>
<p>And of course, if we come to the conclusion that 94 war correct all along, we can easily change it back via
<code>after[2] &lt;- 94</code>. This works in the same way for an index vector, so assuming that the last three pre-diet weights were measured on a mis-calibrated scale that added +2 kg to the true weights, we can fix this via</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-types-struct.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before</span>
<span id="cb69-2"><a href="data-types-struct.html#cb69-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">57</span>  <span class="dv">72</span>  <span class="dv">68</span></span>
<span id="cb69-3"><a href="data-types-struct.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> before[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb69-4"><a href="data-types-struct.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before</span>
<span id="cb69-5"><a href="data-types-struct.html#cb69-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">55</span>  <span class="dv">70</span>  <span class="dv">66</span></span></code></pre></div>
<p>Now this may be fairly cool functionality from a pure data manipulation point of view, but it’s actually relatively uncommon that we want to extract or modify observations simply based on their position in a data set<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. In practice, we are much more interested in selecting observations based on information contained in one or more other variables, like splitting a data set by sex or age groups. We can still do this using brackets, but we additionally need the concept of logical data introduced in the next section.</p>
<p>Exercises:</p>
<ol style="list-style-type: decimal">
<li>Use indexing to extract the weight before diet of the last subject in the vector, regardless of the actual number of subjects.</li>
<li>What happens if you evaluate the expression <code>after[1:3] &lt;- 72</code>? Experiment and explain.</li>
</ol>
</div>
</div>
<div id="logical-data" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Logical data</h2>
<div id="definition" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Definition</h3>
<p>We have encountered two basic data types so far: <code>numeric</code> data can take on any value that can be represented as a floating point number with 53 bit precision (see <code>?double</code> and <code>?.Machine</code> for details); <code>character</code> data can contain any sequence of alphanumeric characters. In contrast, <code>logical</code> is a basic data type in R that only allows two possible values: <code>TRUE</code> and <code>FALSE</code><a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>.</p>
<p>As such, it can be used to represent binary data; however, while it is not uncommon, it is not really necessary to do that, and often a factor with two levels is more informative and easier to read: e.g. I prefer using a factor variable <code>smoking_status</code> with levels <code>smoker</code> and <code>non-smoker</code> to a logical variable <code>smoker</code> with possible values <code>TRUE</code> and <code>FALSE</code>.</p>
<p>More importantly, this data type is used to store values of logical expressions and comparisons. One application for this is in programming with R, where different code may be executed depending on whether some value of interest is over or under a specified threshold (e.g. via an <code>if</code>-statement). Another application is the extraction and modification of parts of a data set based on conditions involving observed values.</p>
</div>
<div id="logical-expressions" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Logical expressions</h3>
<p>We can use the comparison operators <code>==</code> (for equality), <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code> and <code>&gt;=</code> to compare two objects in an expression. R will evaluate the expression and return <code>TRUE</code> or <code>FALSE</code> based on whether the expression is valid:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-types-struct.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">4</span></span>
<span id="cb71-2"><a href="data-types-struct.html#cb71-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb71-3"><a href="data-types-struct.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&lt;=</span> <span class="dv">4</span></span>
<span id="cb71-4"><a href="data-types-struct.html#cb71-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb71-5"><a href="data-types-struct.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">4</span></span>
<span id="cb71-6"><a href="data-types-struct.html#cb71-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
<p>As for numerical expressions, we can include arithmetic operators, functions and objects (variables):</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-types-struct.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">3</span> <span class="sc">&gt;</span> <span class="fu">sqrt</span>(<span class="dv">17</span>)</span>
<span id="cb72-2"><a href="data-types-struct.html#cb72-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb72-3"><a href="data-types-struct.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sqrt</span>(pi) <span class="sc">&lt;</span> <span class="fl">1.4</span></span>
<span id="cb72-4"><a href="data-types-struct.html#cb72-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
<p>Furthermore, we can also use standard logical operators to combine logical expressions: these are logical AND (<code>&amp;</code>), logical OR (<code>|</code>) and logical NOT (<code>!</code>). E.g.:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-types-struct.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">TRUE</span></span>
<span id="cb73-2"><a href="data-types-struct.html#cb73-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb73-3"><a href="data-types-struct.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> (<span class="fu">sqrt</span>(<span class="dv">32</span>) <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">&amp;</span> (<span class="fu">cos</span>(pi) <span class="sc">&lt;=</span> <span class="dv">0</span>)</span>
<span id="cb73-4"><a href="data-types-struct.html#cb73-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb73-5"><a href="data-types-struct.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> (<span class="fu">sqrt</span>(<span class="dv">32</span>) <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">|</span> (<span class="fu">cos</span>(pi) <span class="sc">&lt;=</span> <span class="dv">0</span>)</span>
<span id="cb73-6"><a href="data-types-struct.html#cb73-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>And then there are functions with logical return values. A simple example for such a function is <code>is.numeric</code>, which is often used when writing code to check that an input from the user was indeed numerical:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-types-struct.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">is.numeric</span>(<span class="dv">42</span>)</span>
<span id="cb74-2"><a href="data-types-struct.html#cb74-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb74-3"><a href="data-types-struct.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">is.numeric</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb74-4"><a href="data-types-struct.html#cb74-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
</div>
<div id="logical-vectors" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Logical vectors</h3>
<p>As for the other basic data types, the basic logical operations listed above are vector-oriented, so if we want to record for each subject in our little toy example whether or not whether their weight after diet was above 65 kg, we can just write</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-types-struct.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after <span class="sc">&gt;</span> <span class="dv">65</span></span>
<span id="cb75-2"><a href="data-types-struct.html#cb75-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>And of course, we can store the result of any such expression as an object (variable) in R under any technically valid name:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-types-struct.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> over65after <span class="ot">&lt;-</span> after <span class="sc">&gt;</span> <span class="dv">65</span></span>
<span id="cb76-2"><a href="data-types-struct.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> over65after</span>
<span id="cb76-3"><a href="data-types-struct.html#cb76-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>And needless to say, we can use this object again to build further logical expressions, like</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-types-struct.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> over65after <span class="sc">&amp;</span> (before <span class="sc">&gt;</span> <span class="dv">65</span>)</span>
<span id="cb77-2"><a href="data-types-struct.html#cb77-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>As an aside, logical expressions tabulate well, so this can actually be useful in data analysis. Switching to the data example on adding salt to food, we can easily count subjects over 60, with or without elevated systolic blood pressure:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-types-struct.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">table</span>(salt_ht<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">60</span>)</span>
<span id="cb78-2"><a href="data-types-struct.html#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="data-types-struct.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>  <span class="cn">TRUE</span> </span>
<span id="cb78-4"><a href="data-types-struct.html#cb78-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">88</span>    <span class="dv">12</span> </span>
<span id="cb78-5"><a href="data-types-struct.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">table</span>(salt_ht<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">60</span>, salt_ht<span class="sc">$</span>sbp <span class="sc">&gt;</span> <span class="dv">130</span>)</span>
<span id="cb78-6"><a href="data-types-struct.html#cb78-6" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb78-7"><a href="data-types-struct.html#cb78-7" aria-hidden="true" tabindex="-1"></a>        <span class="cn">FALSE</span> <span class="cn">TRUE</span></span>
<span id="cb78-8"><a href="data-types-struct.html#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="cn">FALSE</span>    <span class="dv">37</span>   <span class="dv">51</span></span>
<span id="cb78-9"><a href="data-types-struct.html#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span>      <span class="dv">1</span>   <span class="dv">11</span></span></code></pre></div>
<p>R also has useful summary functions that can complement <code>table</code> when it is of interest whether e.g. <em>any</em> subject over 60 years of age has high systolic blood pressure, or whether <em>all</em> subjects under 30 are female<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>Logical vectors can also be generated by function calls. A useful and common example for such a function is <code>is.na</code>: it accepts (among other things) a vector as argument, and returns a vector of the same length, where each entry indicates whether the corresponding value in the original vector was indeed the special value <code>NA</code> indicating missingness (<code>TRUE</code>) or not (<code>FALSE</code>)<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-types-struct.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">is.na</span>(before)</span>
<span id="cb81-2"><a href="data-types-struct.html#cb81-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span></span>
<span id="cb81-3"><a href="data-types-struct.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">is.na</span>(<span class="fu">c</span>(<span class="st">&quot;case&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;control&quot;</span>))</span>
<span id="cb81-4"><a href="data-types-struct.html#cb81-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
</div>
<div id="logical-vectors-for-indexing" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Logical vectors for indexing</h3>
<p>We can use logical vectors together with brackets to extract all observations for which a logical condition holds (or equivalently, dropping all observations where the condition does not hold). Conceptually, the bracketed vector (of any data type) and the logical index vector are lined up side by side, and only those values of the bracketed vector where the index vector evaluates to <code>TRUE</code> are returned. So e.g.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-types-struct.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)]</span>
<span id="cb82-2"><a href="data-types-struct.html#cb82-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">81</span> <span class="dv">94</span> <span class="dv">62</span></span></code></pre></div>
<p>returns the first, second and fifth value of vector <code>after</code>.</p>
<p>Of course this is not how logical vectors are commonly used (we know already how to extract by position). Rather, we use logical expressions as index vectors; if we want to extract all weights post-diet that are over 65 kg, we just write</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-types-struct.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after[after <span class="sc">&gt;</span> <span class="dv">65</span>]</span>
<span id="cb83-2"><a href="data-types-struct.html#cb83-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">81</span> <span class="dv">94</span> <span class="dv">71</span></span></code></pre></div>
<p>This is of course not limited to expressions involving the bracketed vector:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-types-struct.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before[after <span class="sc">&gt;</span> <span class="dv">65</span>]</span>
<span id="cb84-2"><a href="data-types-struct.html#cb84-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">72</span></span></code></pre></div>
<p>And of course we can use extended logical expressions for indexing:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-types-struct.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> before[after <span class="sc">&lt;</span> <span class="dv">95</span> <span class="sc">&amp;</span> before <span class="sc">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb85-2"><a href="data-types-struct.html#cb85-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">102</span></span></code></pre></div>
<p>As before, the same technique can be used to change parts of a vector; as before, one has to be careful that the vectors on the left (assignee) and the right (assigned) have compatible lengths and line up as they should. Let’s look at a slightly convoluted example for our diet mini data: let’s assume that subjects should have been weighed twice after their diet (repeated measurements) to reduce technical variability, but by mistake this did not happen for all subjects. So we have a second vector of post-diet weights with some missing values:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-types-struct.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after2 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="cn">NA</span>, <span class="dv">60</span>, <span class="dv">69</span>, <span class="cn">NA</span>)</span>
<span id="cb86-2"><a href="data-types-struct.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after2</span>
<span id="cb86-3"><a href="data-types-struct.html#cb86-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">81</span> <span class="cn">NA</span> <span class="dv">60</span> <span class="dv">69</span> <span class="cn">NA</span></span></code></pre></div>
<p>Let’s also assume that the researchers also decide to report the average of the two values where available, and otherwise only the single measured value (which is frankly not a great idea, but crazier things happen, so let’s go with this here). We can try some vector arithemtic:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-types-struct.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after_new <span class="ot">&lt;-</span> (after <span class="sc">+</span> after2)<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb87-2"><a href="data-types-struct.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after_new</span>
<span id="cb87-3"><a href="data-types-struct.html#cb87-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">81.0</span>   <span class="cn">NA</span> <span class="fl">59.5</span> <span class="fl">70.0</span>   <span class="cn">NA</span></span></code></pre></div>
<p>This works where we actually have two observations, but only shows <code>NA</code> where we only have one - which is actually correct, as the result of any arithmetic operation involving a missing value should properly be missing. However, we can specify that the averaging should only take place at the positions where the second vector of weights <code>after2</code> has no missing values. Function <code>is.na</code> is vector-oriented, so we can do this:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-types-struct.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> ndx <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">is.na</span>(after2)</span>
<span id="cb88-2"><a href="data-types-struct.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> ndx</span>
<span id="cb88-3"><a href="data-types-struct.html#cb88-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>Based on this logical vector, we can calculate the valid averages and store them at the correct locations:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-types-struct.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after_new <span class="ot">&lt;-</span> after</span>
<span id="cb89-2"><a href="data-types-struct.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after_new[ndx] <span class="ot">&lt;-</span> (after[ndx] <span class="sc">+</span> after2[ndx])<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb89-3"><a href="data-types-struct.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> after_new</span>
<span id="cb89-4"><a href="data-types-struct.html#cb89-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">81.0</span> <span class="fl">94.0</span> <span class="fl">59.5</span> <span class="fl">70.0</span> <span class="fl">62.0</span></span></code></pre></div>
<p>Note how storing the logical vector as object <code>ndx</code> here saves some calculations (the index vector is only calculated once, but used three times in the averaging) and makes the expressions easier to write and read, at the expense of some extra memory for object <code>ndx</code>.</p>
<p>Exercises:</p>
<ol style="list-style-type: decimal">
<li>What would the expression <code>after[TRUE]</code> return? Experiment and explain.</li>
<li>What does the expression <code>before[before &gt; 120]</code> return? What is this, and does it make sense?</li>
<li>Select the after-diet weights of those subjects whose weight has a) gone down by at least 2 kg, b) changed by at least 2 kg.</li>
</ol>
</div>
</div>
<div id="more-on-rectangular-data" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> More on rectangular data</h2>
<p>With all the fun we have had so far with indexing, analysis data is not usually processed as a collection of unrelated vectors. The standard data set format is still a rectangular table, with subjects as rows and measurements / variables as columns, for good reasons (not the least to keep the variables and measurements synchronized and available for joint processing).</p>
<p>As it turns out, the idea of indexing and the use of brackets translates easily from vectors to rectangular data tables: here, observations are not lined up linearly, but in a grid of rows and columns; to uniquely identify an observation, we have two specify <em>two</em> indices, one for the rows and one for the columns. Correspondingly, we can refer to a specific observation via</p>
<pre><code>x[ &lt;row index&gt;, &lt;column index&gt;]</code></pre>
<p>i.e. we still use brackets, specify the row index first and separate it from the column index with a comma. Note that this is again directly inspired by standard algebraic notation <span class="math inline">\(x_{ij}\)</span> for the element in the <span class="math inline">\(i\)</span>-th row and <span class="math inline">\(j\)</span>-th column of a general matrix <span class="math inline">\(X\)</span>.</p>
<p>How this works in practice will be demonstrated directly below for data frames. I will then briefly introduce a simpler way for arranging data in a rectangular manner in R, the <em>matrix</em>, and compare it with the more general data frames (including use of indexing.)</p>
<div id="data-frame" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Data frame</h3>
<p>Let’s formalize our toy example from above as a data frame (reverting to the original observations), with a subject identifier<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> added:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-types-struct.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Before =</span> before, <span class="at">After =</span> after, <span class="at">ID =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>))</span>
<span id="cb91-2"><a href="data-types-struct.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet</span>
<span id="cb91-3"><a href="data-types-struct.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  Before After ID</span>
<span id="cb91-4"><a href="data-types-struct.html#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span>  A</span>
<span id="cb91-5"><a href="data-types-struct.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span>  B</span>
<span id="cb91-6"><a href="data-types-struct.html#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span>  C</span>
<span id="cb91-7"><a href="data-types-struct.html#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span>  D</span>
<span id="cb91-8"><a href="data-types-struct.html#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>    <span class="dv">62</span>  E</span></code></pre></div>
<div id="indexing-by-position" class="section level4" number="5.5.1.1">
<h4><span class="header-section-number">5.5.1.1</span> Indexing by position</h4>
<p>As before, we can simply indicate a specific observation by its position; so if we want to refer to the weight after diet (second column) for the third subject, we can just do</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-types-struct.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[<span class="dv">3</span>, <span class="dv">2</span>]</span>
<span id="cb92-2"><a href="data-types-struct.html#cb92-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">59</span></span></code></pre></div>
<p>As before, we can also change the content of the data frame at the specified location by putting it on the left hand side of an assignment, as in</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-types-struct.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[<span class="dv">3</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">60</span></span></code></pre></div>
<p>though we don’t want to do that here.</p>
<p>Again as before, we can use vectors of positions for both rows and columns: if we want to extract only the weight after diet (second column), but also keep the identifier (third column), only for subjects B-D, we can specify</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-types-struct.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb94-2"><a href="data-types-struct.html#cb94-2" aria-hidden="true" tabindex="-1"></a>  After ID</span>
<span id="cb94-3"><a href="data-types-struct.html#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">94</span>  B</span>
<span id="cb94-4"><a href="data-types-struct.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    <span class="dv">59</span>  C</span>
<span id="cb94-5"><a href="data-types-struct.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    <span class="dv">71</span>  D</span></code></pre></div>
<p>In this way, we can extract <em>any rectangular subset</em> from the original data frame, i.e. any combination of rows and columns, in any order we want.</p>
<p>A useful shorthand applies when we only want to drop some subjects from the data, but keep all variables, or reversely, only drop some variables, but keep all subjects: by keeping the corresponding index slot empty, R will automatically return all rows or all columns. So we can get e.g. all variables for subjects A-C via</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data-types-struct.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span>
<span id="cb95-2"><a href="data-types-struct.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  Before After ID</span>
<span id="cb95-3"><a href="data-types-struct.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span>  A</span>
<span id="cb95-4"><a href="data-types-struct.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span>  B</span>
<span id="cb95-5"><a href="data-types-struct.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span>  C</span></code></pre></div>
<p>or all subjects for only the weight variables via</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data-types-struct.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb96-2"><a href="data-types-struct.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  Before After</span>
<span id="cb96-3"><a href="data-types-struct.html#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span></span>
<span id="cb96-4"><a href="data-types-struct.html#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span></span>
<span id="cb96-5"><a href="data-types-struct.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span></span>
<span id="cb96-6"><a href="data-types-struct.html#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span></span>
<span id="cb96-7"><a href="data-types-struct.html#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>    <span class="dv">62</span></span></code></pre></div>
<p>Note that we still need the comma to indicate whether the row- or column index was dropped<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>. Formally, this is the counterpart to the algebraic notation <span class="math inline">\(x_{i\cdot}\)</span> and <span class="math inline">\(x_{\cdot j}\)</span> for indicating the whole <span class="math inline">\(i\)</span>-th row or <span class="math inline">\(j\)</span>-th column of a general matrix <span class="math inline">\(X\)</span>.</p>
<p>Exercise: Use a column index to re-sort the variables in data frame <code>diet</code> so that the identifier is the first column.</p>
</div>
<div id="logical-indexing" class="section level4" number="5.5.1.2">
<h4><span class="header-section-number">5.5.1.2</span> Logical indexing</h4>
<p>This works as we would expect at this point, i.e. we can plug in logical expressions for either row- or column index. In practice though this is more natural for selecting subjects (rows): we have the same set of variables for all subjects, making them all comparable and addressable via a logical expression; variables (columns) on the other hand can be of widely different types (numerical, categorical etc.), so more care must be taken when formulating a logical expression that makes sense for all columns.</p>
<p>As a simple example, let’s extract all subjects whose weight before diet was over 70 kg:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-types-struct.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[diet<span class="sc">$</span>Before <span class="sc">&gt;</span> <span class="dv">70</span>, ]</span>
<span id="cb97-2"><a href="data-types-struct.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  Before After ID</span>
<span id="cb97-3"><a href="data-types-struct.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span>  A</span>
<span id="cb97-4"><a href="data-types-struct.html#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span>  B</span>
<span id="cb97-5"><a href="data-types-struct.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span>  D</span></code></pre></div>
<p>What’s a bit awkward here is that we have to specify that the variable <code>Before</code> is part of the same <code>diet</code> data frame from which we extract anyway - more about that later.</p>
<p>Exercise: Extract all subjects with weight before diet less or equal to 70 kg, using only bracket notation (i.e. no <code>$</code>-notation).</p>
</div>
<div id="mix-match" class="section level4" number="5.5.1.3">
<h4><span class="header-section-number">5.5.1.3</span> Mix &amp; match</h4>
<p>Just to point out what you would expect: you can combine different styles of indexing for rows and columns, so e.g.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-types-struct.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[diet<span class="sc">$</span>Before <span class="sc">&gt;</span> <span class="dv">70</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb98-2"><a href="data-types-struct.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  Before After</span>
<span id="cb98-3"><a href="data-types-struct.html#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span></span>
<span id="cb98-4"><a href="data-types-struct.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span></span>
<span id="cb98-5"><a href="data-types-struct.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span></span></code></pre></div>
<p>is absolutely ok and works as it should<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>.</p>
</div>
</div>
<div id="matrix" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Matrix</h3>
<p>In contrast to a data frame, where all observations in the same column have the same type, a matrix in R is a rectangular arrangement where <em>all</em> elements have the same type, e.g. numeric or character. A matrix is more limited as a container of general data, but due to its simple structure can be efficient for large amounts of data of the same type, e.g. as generated in high-throughput molecular assays. For general data with different variable types (numerical, categorical, dates etc.) however, data frames (or some comparable general container, see below) are more appropriate.</p>
<p>On the other hand, for actual statistical calculations (model fitting etc.), general data has to be converted to a numerical matrix, using dummy coding for categorical variables etc. This is generally not done by hand, but internally by the respective statistical procedures. We will see some examples of this later.</p>
<p>For completeness sake, let it be stated that brackets and indexing work exactly the same way as for data frames. If we e.g. construct a matrix from our toy example by binding the two weight vectors together as columns (<code>cbind</code>), we get</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-types-struct.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_mat <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">Before =</span> before, <span class="at">After =</span> after)</span>
<span id="cb100-2"><a href="data-types-struct.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_mat</span>
<span id="cb100-3"><a href="data-types-struct.html#cb100-3" aria-hidden="true" tabindex="-1"></a>     Before After</span>
<span id="cb100-4"><a href="data-types-struct.html#cb100-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]     <span class="dv">83</span>    <span class="dv">81</span></span>
<span id="cb100-5"><a href="data-types-struct.html#cb100-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">102</span>    <span class="dv">94</span></span>
<span id="cb100-6"><a href="data-types-struct.html#cb100-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]     <span class="dv">57</span>    <span class="dv">59</span></span>
<span id="cb100-7"><a href="data-types-struct.html#cb100-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]     <span class="dv">72</span>    <span class="dv">71</span></span>
<span id="cb100-8"><a href="data-types-struct.html#cb100-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]     <span class="dv">68</span>    <span class="dv">62</span></span></code></pre></div>
<p>which looks similar to a data frame, though without the default row names we see there (instead, we have an obvious extension of the <code>[1]</code> notation that R displays when printing vectors).</p>
<p>Now we can do</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="data-types-struct.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_mat[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span>
<span id="cb101-2"><a href="data-types-struct.html#cb101-2" aria-hidden="true" tabindex="-1"></a>     Before After</span>
<span id="cb101-3"><a href="data-types-struct.html#cb101-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]     <span class="dv">83</span>    <span class="dv">81</span></span>
<span id="cb101-4"><a href="data-types-struct.html#cb101-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">102</span>    <span class="dv">94</span></span>
<span id="cb101-5"><a href="data-types-struct.html#cb101-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]     <span class="dv">57</span>    <span class="dv">59</span></span></code></pre></div>
<p>for extracting the first three rows / subjects.</p>
<p>A note<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> on some further technical aspects of matrices. FIXME: clean up awkward reference.</p>
</div>
<div id="extensions-alternatives" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Extensions &amp; alternatives</h3>
<p>An <code>array</code> is a generalization of a <code>matrix</code> which has more than two indices, e.g. a three dimensional array has three indices, separated by two commas, and so on in higher dimensions. This has its specialized uses with data processing.</p>
<p><code>data.table</code> is a re-implementation of the idea of a data frame (as a rectangular arrangement of data with mixed variable types) provided by the add-on package <code>data.table</code>. It is highly efficient, even for large data sets, and supports a range of database functionality, as well as the usual indexing via brackets.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-types-struct.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(data.table)</span>
<span id="cb102-2"><a href="data-types-struct.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(diet)</span>
<span id="cb102-3"><a href="data-types-struct.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_dt[After <span class="sc">&gt;</span> <span class="dv">70</span>, ]</span>
<span id="cb102-4"><a href="data-types-struct.html#cb102-4" aria-hidden="true" tabindex="-1"></a>   Before After ID</span>
<span id="cb102-5"><a href="data-types-struct.html#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>     <span class="dv">83</span>    <span class="dv">81</span>  A</span>
<span id="cb102-6"><a href="data-types-struct.html#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">:</span>    <span class="dv">102</span>    <span class="dv">94</span>  B</span>
<span id="cb102-7"><a href="data-types-struct.html#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">:</span>     <span class="dv">72</span>    <span class="dv">71</span>  D</span></code></pre></div>
<p><code>tibble</code> is another re-implementation of the data frame concept, provided by package <code>tibble</code>, which is part of the larger collection of packages known as the <em>tidyverse</em>, which will be discussed in more detail later. It also supports database operations and is efficient for large data sets. FIXME: clean up reference</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data-types-struct.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tibble)</span>
<span id="cb103-2"><a href="data-types-struct.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(diet)</span>
<span id="cb103-3"><a href="data-types-struct.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet_tib[diet_tib<span class="sc">$</span>After <span class="sc">&gt;</span> <span class="dv">70</span>, ]</span>
<span id="cb103-4"><a href="data-types-struct.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb103-5"><a href="data-types-struct.html#cb103-5" aria-hidden="true" tabindex="-1"></a>  Before After ID   </span>
<span id="cb103-6"><a href="data-types-struct.html#cb103-6" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span></span>
<span id="cb103-7"><a href="data-types-struct.html#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span> A    </span>
<span id="cb103-8"><a href="data-types-struct.html#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span> B    </span>
<span id="cb103-9"><a href="data-types-struct.html#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">72</span>    <span class="dv">71</span> D    </span></code></pre></div>
</div>
</div>
<div id="helpers-subset-and-transform" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Helpers: <code>subset</code> and <code>transform</code></h2>
<p>We have already used the function <code>subset</code> to achieve some of what we can do using brackets and indexing. Indeed, using a so far unused extra argument to the <code>subset</code> function, namely <code>select</code>, as well as the companion function <code>transform</code>, we can do all logical indexing for extraction as well as <em>some</em> modification, at least for data frames and objects that extend them, like <code>data.table</code>. And we can save some typing, too.</p>
<p><code>subset</code> handles the extraction side:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data-types-struct.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">subset</span>(diet, After <span class="sc">&gt;</span> <span class="dv">70</span> <span class="sc">&amp;</span> Before <span class="sc">&gt;</span> <span class="dv">70</span>)</span>
<span id="cb104-2"><a href="data-types-struct.html#cb104-2" aria-hidden="true" tabindex="-1"></a>  Before After ID</span>
<span id="cb104-3"><a href="data-types-struct.html#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span>  A</span>
<span id="cb104-4"><a href="data-types-struct.html#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span>  B</span>
<span id="cb104-5"><a href="data-types-struct.html#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span>  D</span></code></pre></div>
<p>The extra argument applies to variables, so if we only want the weight variables, we can use</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-types-struct.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">subset</span>(diet, <span class="at">select =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb105-2"><a href="data-types-struct.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  Before After</span>
<span id="cb105-3"><a href="data-types-struct.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span></span>
<span id="cb105-4"><a href="data-types-struct.html#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span></span>
<span id="cb105-5"><a href="data-types-struct.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span></span>
<span id="cb105-6"><a href="data-types-struct.html#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span></span>
<span id="cb105-7"><a href="data-types-struct.html#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>    <span class="dv">62</span></span></code></pre></div>
<p>And of course, we can combine both things<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-types-struct.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">subset</span>(diet, After <span class="sc">&gt;</span> <span class="dv">70</span> <span class="sc">&amp;</span> Before <span class="sc">&gt;</span> <span class="dv">70</span>, <span class="at">select =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb107-2"><a href="data-types-struct.html#cb107-2" aria-hidden="true" tabindex="-1"></a>  Before After</span>
<span id="cb107-3"><a href="data-types-struct.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span></span>
<span id="cb107-4"><a href="data-types-struct.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span></span>
<span id="cb107-5"><a href="data-types-struct.html#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span></span></code></pre></div>
<p><code>transform</code> covers both the generation of new variables (as function of existing ones) and the genuine transformation of existing variables, i.e. the original variables get overwritten. Let’s add the weight loss to the current data frame:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-types-struct.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet <span class="ot">&lt;-</span> <span class="fu">transform</span>(diet, <span class="at">WeightLoss =</span> Before <span class="sc">-</span> After)</span>
<span id="cb108-2"><a href="data-types-struct.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet</span>
<span id="cb108-3"><a href="data-types-struct.html#cb108-3" aria-hidden="true" tabindex="-1"></a>  Before After ID WeightLoss</span>
<span id="cb108-4"><a href="data-types-struct.html#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span>  A          <span class="dv">2</span></span>
<span id="cb108-5"><a href="data-types-struct.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span>  B          <span class="dv">8</span></span>
<span id="cb108-6"><a href="data-types-struct.html#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span>  C         <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb108-7"><a href="data-types-struct.html#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span>  D          <span class="dv">1</span></span>
<span id="cb108-8"><a href="data-types-struct.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>    <span class="dv">62</span>  E          <span class="dv">6</span></span></code></pre></div>
<p>We immediately change our mind and want to report the weight loss as a percentage of the original weight. We can modify the new variable:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-types-struct.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet <span class="ot">&lt;-</span> <span class="fu">transform</span>(diet, <span class="at">WeightLoss =</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> WeightLoss<span class="sc">/</span>Before, <span class="dv">1</span>))</span>
<span id="cb109-2"><a href="data-types-struct.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet</span>
<span id="cb109-3"><a href="data-types-struct.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  Before After ID WeightLoss</span>
<span id="cb109-4"><a href="data-types-struct.html#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">83</span>    <span class="dv">81</span>  A        <span class="fl">2.4</span></span>
<span id="cb109-5"><a href="data-types-struct.html#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">102</span>    <span class="dv">94</span>  B        <span class="fl">7.8</span></span>
<span id="cb109-6"><a href="data-types-struct.html#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span>  C       <span class="sc">-</span><span class="fl">3.5</span></span>
<span id="cb109-7"><a href="data-types-struct.html#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span>  D        <span class="fl">1.4</span></span>
<span id="cb109-8"><a href="data-types-struct.html#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>    <span class="dv">62</span>  E        <span class="fl">8.8</span></span></code></pre></div>
<p>Note that both <code>subset</code> and <code>transform</code> are convenience functions for use at the command line and in scripts, but not for serious programming.</p>
</div>
<div id="list-struct" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Free-style data: lists</h2>
<div id="background-2" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Background</h3>
<p>All data structures so far have had some kind of limitation with regard to the type of data they can hold: either all data items have to be of the same type (vectors, matrices), or all items in the same column have to be of the same type (data frames). In contrast, R has also a general purpose type of structure that can hold all kinds of data known to R, the <em>list</em>.</p>
<p>As it often happens, with greater flexibility comes less specific utility: lists are not especially useful for holding generic tabular analysis data, compared to matrices and data frames. When you are starting out in R with more or less straightforward analyses, you can mostly do without lists. I still introduce them at this point for a number of reasons:</p>
<ol style="list-style-type: decimal">
<li><p>Lists can be very handy for processing group-wise data, or data where a large number of outcome variables is of interest (say high-throughput molecular data)</p></li>
<li><p>Parameters for more complex algorithms are often collected in lists and passed to functions for fine-tuning how the algorithms are run.</p></li>
<li><p>Most complicated data structures in base R, like hypothesis tests or regression models, are at core built as lists, with some extra magic for display; the same holds for many complicated data structures outside of base R, e.g. <code>ggplot2</code>-objects are essenitally just fancy lists, too. Understanding lists therefore increases understanding of how data and results are handled in R, and allows direct access to results (e.g. the p-value in a t-test).</p></li>
<li><p>Finally, lists emphasise that R is by design not just a statistics program, but rather a programming language and environment built on more general ideas about data, processing and structures than simple generic tables.</p></li>
</ol>
</div>
<div id="basic_lists" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Basic list</h3>
<p>A list can be generated by listing any number of R expressions, of any type, as arguments to the function <code>list</code>. So if we want to combine numerical data, character data and the result of a statistical procedure in one handy R object, we can just write</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-types-struct.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&quot;a&quot;</span>, <span class="fu">t.test</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>)))</span>
<span id="cb110-2"><a href="data-types-struct.html#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist</span>
<span id="cb110-3"><a href="data-types-struct.html#cb110-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb110-4"><a href="data-types-struct.html#cb110-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb110-5"><a href="data-types-struct.html#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="data-types-struct.html#cb110-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb110-7"><a href="data-types-struct.html#cb110-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span></span>
<span id="cb110-8"><a href="data-types-struct.html#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="data-types-struct.html#cb110-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb110-10"><a href="data-types-struct.html#cb110-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-11"><a href="data-types-struct.html#cb110-11" aria-hidden="true" tabindex="-1"></a>    One Sample t<span class="sc">-</span>test</span>
<span id="cb110-12"><a href="data-types-struct.html#cb110-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-13"><a href="data-types-struct.html#cb110-13" aria-hidden="true" tabindex="-1"></a>data<span class="sc">:</span>  <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb110-14"><a href="data-types-struct.html#cb110-14" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fl">1.7935</span>, df <span class="ot">=</span> <span class="dv">9</span>, p<span class="sc">-</span>value <span class="ot">=</span> <span class="fl">0.1065</span></span>
<span id="cb110-15"><a href="data-types-struct.html#cb110-15" aria-hidden="true" tabindex="-1"></a>alternative hypothesis<span class="sc">:</span> true mean is not equal to <span class="dv">0</span></span>
<span id="cb110-16"><a href="data-types-struct.html#cb110-16" aria-hidden="true" tabindex="-1"></a><span class="dv">95</span> percent confidence interval<span class="sc">:</span></span>
<span id="cb110-17"><a href="data-types-struct.html#cb110-17" aria-hidden="true" tabindex="-1"></a> <span class="sc">-</span><span class="fl">0.1534716</span>  <span class="fl">1.3281702</span></span>
<span id="cb110-18"><a href="data-types-struct.html#cb110-18" aria-hidden="true" tabindex="-1"></a>sample estimates<span class="sc">:</span></span>
<span id="cb110-19"><a href="data-types-struct.html#cb110-19" aria-hidden="true" tabindex="-1"></a>mean of x </span>
<span id="cb110-20"><a href="data-types-struct.html#cb110-20" aria-hidden="true" tabindex="-1"></a><span class="fl">0.5873493</span> </span></code></pre></div>
<p>In this sense, <code>list()</code> works similar to <code>c()</code>, except for the part about <em>any type of data</em>. Specifically, this means that within the list, the different components are stored in the order they were originally specified. This is indicated in the output above by the component number written in double brackets <code>[[</code> (as opposed to the single brackets we have used so far).</p>
<p>It may come as not much of a surprise that at this point that we can use these double brackets to access an element of the list by position:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data-types-struct.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist[[<span class="dv">1</span>]]</span>
<span id="cb111-2"><a href="data-types-struct.html#cb111-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb111-3"><a href="data-types-struct.html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist[[<span class="dv">2</span>]]</span>
<span id="cb111-4"><a href="data-types-struct.html#cb111-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span></span></code></pre></div>
<p>The important difference to single brackets is that a) we can only access a <em>single</em> element of the list (i.e. no vector indexing) and b) we cannot use logical indexing to extract a matching subset of elements from a list<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>. However, within these limitations, the double bracket works as one would expect, and specifically allows assignments and modifications. If we want to replace the second element in our toy list with the standard deviation of the first element, this works straightforwardly:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data-types-struct.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">sd</span>(mylist[[<span class="dv">1</span>]])</span>
<span id="cb113-2"><a href="data-types-struct.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist</span>
<span id="cb113-3"><a href="data-types-struct.html#cb113-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb113-4"><a href="data-types-struct.html#cb113-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb113-5"><a href="data-types-struct.html#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="data-types-struct.html#cb113-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb113-7"><a href="data-types-struct.html#cb113-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span></span>
<span id="cb113-8"><a href="data-types-struct.html#cb113-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-9"><a href="data-types-struct.html#cb113-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb113-10"><a href="data-types-struct.html#cb113-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-11"><a href="data-types-struct.html#cb113-11" aria-hidden="true" tabindex="-1"></a>    One Sample t<span class="sc">-</span>test</span>
<span id="cb113-12"><a href="data-types-struct.html#cb113-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-13"><a href="data-types-struct.html#cb113-13" aria-hidden="true" tabindex="-1"></a>data<span class="sc">:</span>  <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb113-14"><a href="data-types-struct.html#cb113-14" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fl">1.7935</span>, df <span class="ot">=</span> <span class="dv">9</span>, p<span class="sc">-</span>value <span class="ot">=</span> <span class="fl">0.1065</span></span>
<span id="cb113-15"><a href="data-types-struct.html#cb113-15" aria-hidden="true" tabindex="-1"></a>alternative hypothesis<span class="sc">:</span> true mean is not equal to <span class="dv">0</span></span>
<span id="cb113-16"><a href="data-types-struct.html#cb113-16" aria-hidden="true" tabindex="-1"></a><span class="dv">95</span> percent confidence interval<span class="sc">:</span></span>
<span id="cb113-17"><a href="data-types-struct.html#cb113-17" aria-hidden="true" tabindex="-1"></a> <span class="sc">-</span><span class="fl">0.1534716</span>  <span class="fl">1.3281702</span></span>
<span id="cb113-18"><a href="data-types-struct.html#cb113-18" aria-hidden="true" tabindex="-1"></a>sample estimates<span class="sc">:</span></span>
<span id="cb113-19"><a href="data-types-struct.html#cb113-19" aria-hidden="true" tabindex="-1"></a>mean of x </span>
<span id="cb113-20"><a href="data-types-struct.html#cb113-20" aria-hidden="true" tabindex="-1"></a><span class="fl">0.5873493</span> </span></code></pre></div>
</div>
<div id="named-lists" class="section level3" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> Named lists</h3>
<p>As an additional service, mostly to readability, we can also <em>name</em> the components of a list, e.g. by simple specifying the name in the call to <code>list</code>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-types-struct.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">label =</span> <span class="st">&quot;a&quot;</span>, <span class="at">test_result =</span> <span class="fu">t.test</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>)))</span>
<span id="cb114-2"><a href="data-types-struct.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named</span>
<span id="cb114-3"><a href="data-types-struct.html#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>data</span>
<span id="cb114-4"><a href="data-types-struct.html#cb114-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb114-5"><a href="data-types-struct.html#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="data-types-struct.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>label</span>
<span id="cb114-7"><a href="data-types-struct.html#cb114-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span></span>
<span id="cb114-8"><a href="data-types-struct.html#cb114-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-9"><a href="data-types-struct.html#cb114-9" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>test_result</span>
<span id="cb114-10"><a href="data-types-struct.html#cb114-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-11"><a href="data-types-struct.html#cb114-11" aria-hidden="true" tabindex="-1"></a>    One Sample t<span class="sc">-</span>test</span>
<span id="cb114-12"><a href="data-types-struct.html#cb114-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-13"><a href="data-types-struct.html#cb114-13" aria-hidden="true" tabindex="-1"></a>data<span class="sc">:</span>  <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb114-14"><a href="data-types-struct.html#cb114-14" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.1359</span>, df <span class="ot">=</span> <span class="dv">9</span>, p<span class="sc">-</span>value <span class="ot">=</span> <span class="fl">0.2853</span></span>
<span id="cb114-15"><a href="data-types-struct.html#cb114-15" aria-hidden="true" tabindex="-1"></a>alternative hypothesis<span class="sc">:</span> true mean is not equal to <span class="dv">0</span></span>
<span id="cb114-16"><a href="data-types-struct.html#cb114-16" aria-hidden="true" tabindex="-1"></a><span class="dv">95</span> percent confidence interval<span class="sc">:</span></span>
<span id="cb114-17"><a href="data-types-struct.html#cb114-17" aria-hidden="true" tabindex="-1"></a> <span class="sc">-</span><span class="fl">1.1779132</span>  <span class="fl">0.3904081</span></span>
<span id="cb114-18"><a href="data-types-struct.html#cb114-18" aria-hidden="true" tabindex="-1"></a>sample estimates<span class="sc">:</span></span>
<span id="cb114-19"><a href="data-types-struct.html#cb114-19" aria-hidden="true" tabindex="-1"></a> mean of x </span>
<span id="cb114-20"><a href="data-types-struct.html#cb114-20" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="fl">0.3937525</span> </span></code></pre></div>
<p>The components of the list are the same, but now they have somewhat informative names, which is displayed in the output above instead of their number, and with leading <code>$</code> instead of the double brackets.</p>
<p>And of course we can use this <code>$</code>-notation to access (and change) the elements of a named list via their name:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data-types-struct.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named<span class="sc">$</span>data</span>
<span id="cb115-2"><a href="data-types-struct.html#cb115-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb115-3"><a href="data-types-struct.html#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named<span class="sc">$</span>label <span class="ot">&lt;-</span> <span class="st">&quot;A&quot;</span></span></code></pre></div>
<p>Note that a) the plot thickens (as the <code>$</code> notation is already familiar at this point), and b) we can still use the double bracket as before for named lists:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-types-struct.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named<span class="sc">$</span>label</span>
<span id="cb116-2"><a href="data-types-struct.html#cb116-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;A&quot;</span></span>
<span id="cb116-3"><a href="data-types-struct.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named[[<span class="dv">2</span>]]</span>
<span id="cb116-4"><a href="data-types-struct.html#cb116-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;A&quot;</span></span></code></pre></div>
<p>As a matter of fact, we can even use the double bracket <em>with</em> the name:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data-types-struct.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist_named[[<span class="st">&quot;label&quot;</span>]]</span>
<span id="cb117-2"><a href="data-types-struct.html#cb117-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;A&quot;</span></span></code></pre></div>
<p>All three notations above for accessing the second element / element with name <code>label</code> are equivalent<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a>.</p>
</div>
<div id="example-data-frames" class="section level3" number="5.7.4">
<h3><span class="header-section-number">5.7.4</span> Example: data frames</h3>
<p>What we have been leading up to is the simple fact that internally, data frames are just lists of vectors of the same length. There is some extra functionality implemented in R to make the row/column-indexing work as for a matrix, but at heart, data frames are somewhat constrained lists:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data-types-struct.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">is.list</span>(diet)</span>
<span id="cb119-2"><a href="data-types-struct.html#cb119-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>If we strip away all the extra data frame goodness with the function <code>unclass</code>, we see this directly:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-types-struct.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">unclass</span>(diet)</span>
<span id="cb120-2"><a href="data-types-struct.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Before</span>
<span id="cb120-3"><a href="data-types-struct.html#cb120-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">57</span>  <span class="dv">72</span>  <span class="dv">68</span></span>
<span id="cb120-4"><a href="data-types-struct.html#cb120-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-5"><a href="data-types-struct.html#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>After</span>
<span id="cb120-6"><a href="data-types-struct.html#cb120-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">81</span> <span class="dv">94</span> <span class="dv">59</span> <span class="dv">71</span> <span class="dv">62</span></span>
<span id="cb120-7"><a href="data-types-struct.html#cb120-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-8"><a href="data-types-struct.html#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>ID</span>
<span id="cb120-9"><a href="data-types-struct.html#cb120-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;A&quot;</span> <span class="st">&quot;B&quot;</span> <span class="st">&quot;C&quot;</span> <span class="st">&quot;D&quot;</span> <span class="st">&quot;E&quot;</span></span>
<span id="cb120-10"><a href="data-types-struct.html#cb120-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-11"><a href="data-types-struct.html#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>WeightLoss</span>
<span id="cb120-12"><a href="data-types-struct.html#cb120-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="fl">2.4</span>  <span class="fl">7.8</span> <span class="sc">-</span><span class="fl">3.5</span>  <span class="fl">1.4</span>  <span class="fl">8.8</span></span>
<span id="cb120-13"><a href="data-types-struct.html#cb120-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-14"><a href="data-types-struct.html#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;row.names&quot;</span>)</span>
<span id="cb120-15"><a href="data-types-struct.html#cb120-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></span></code></pre></div>
<p>This explains why we have been able to use the <code>$</code>-notation in our ivestigations so far: we just use the fact that this notation works for lists. As a consequence, we can also write e.g. </p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data-types-struct.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> diet[[<span class="st">&quot;Before&quot;</span>]]</span>
<span id="cb121-2"><a href="data-types-struct.html#cb121-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">83</span> <span class="dv">102</span>  <span class="dv">57</span>  <span class="dv">72</span>  <span class="dv">68</span></span></code></pre></div>
<p>though this is not very common.</p>
</div>
</div>
<div id="technical-notes" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Technical notes</h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Conceptually, one can think of a vector in R as a continuous stretch of sequential memory locations that hold the machine representation of the data elements in the vector in the correct order. What with the requirements of memory management, this is not literally true, but it’s close enough when thinking e.g. about vectors and matrices.<a href="data-types-struct.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>A more general helper function for generating regular integer vectors that can be useful in extracting or modifying data is <code>seq</code>.<a href="data-types-struct.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>R also has predefined constants <code>T</code> and <code>F</code> that evaluate to <code>TRUE</code> and <code>FALSE</code>, respectively. Note however that anyone can re-define these objects, intentionally or by mistake, with hilarious consequences (e.g. <code>T = FALSE</code>). Best to avoid, IMO.<a href="data-types-struct.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Indeed, the function <code>is.na</code> is (almost) the only legitimate way of checking for the special code <code>NA</code> in R. Should your try to use a comparison operator, as in</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">==</span> <span class="cn">NA</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="cn">NA</span> <span class="sc">==</span> <span class="cn">NA</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span></span></code></pre></div>
<p>the expression will simply evaluate to <code>NA</code> again, which is not helpful.<a href="data-types-struct.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Useful to know, R has two pre-defined objects available, <code>LETTERS</code> and <code>letters</code>, which contain exactly what their names suggest; so we could have defined the identifiers here simply as <code>ID = LETTERS[1:5]</code>.<a href="data-types-struct.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>Note that in R, the type of object that is returned from a bracketing operation on a data frame will depend on what index was specified: for a single element, it will always be a vector of length one, of whatever type the corresponding column in the data frame is; when selecting rows only, the operation will always return a data frame. However, when specifying columns only, it depends on whether one column was selected, in which case a vector is returned, or more than one column was specified, in which case a data frame is returned. This inconsistency is rarely a problem when doing interactive data analysis, but it can be annoying when writing code, and more database-oriented implementation of rectangular data structures like <code>data.table</code> or <code>tibble</code> will always return an object of the same class when bracketed.<a href="data-types-struct.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>Note that the <code>select</code>-argument to<code>subset</code> allows you to use the names of the variables (columns) in a very non-standard, un-Ry way (though written in and fully compatible with R, alas, such is its power<span class="math inline">\(\ldots\)</span>). We can write vectors of variable names without quotation marks and even use the <code>:</code> for ranges of variables:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">subset</span>(diet, Before <span class="sc">&lt;</span> <span class="dv">80</span>, <span class="at">select =</span> <span class="fu">c</span>(Before, ID))</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  Before ID</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>  C</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>  D</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>  E</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">subset</span>(diet, Before <span class="sc">&lt;</span> <span class="dv">80</span>, <span class="at">select =</span> Before<span class="sc">:</span>ID)</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>  Before After ID</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">57</span>    <span class="dv">59</span>  C</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">72</span>    <span class="dv">71</span>  D</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">68</span>    <span class="dv">62</span>  E</span></code></pre></div>
<p>This is done through some really clever programming, but is rather fragile, and one of the reasons that <code>subset</code> is not recommended for programming use.<a href="data-types-struct.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>Actually, we can use single brackets with lists, with all the goodness of vector indexing and logical indexing. However, the result is always going to be a list, even if the list only contains a single element:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mylist[<span class="dv">1</span>]</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>which may or may not be what we want (note however that this is <em>consistent</em> behavior: single brackets applied to a list will always return a list, which is not true e.g. for data frames, as outlined above).<a href="data-types-struct.html#fnref12" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-example.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-processing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/data_types_structures.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introductio-to-r.pdf", "introductio-to-r.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
